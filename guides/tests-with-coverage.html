<!DOCTYPE html>
<html lang="en">







<head>
  <title>Measuring the coverage of your tests - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://embed.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/guides/tests-with-coverage" />
  <meta property="og:title" content="Measuring the coverage of your tests" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/tests-with-coverage">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/guides/tests-with-coverage" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/guides/tests-with-coverage" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/guides/tests-with-coverage" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/guides/tests-with-coverage" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/guides/tests-with-coverage" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/continuum" class="">VERSATILITY</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/guides/tests-with-coverage" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/guides/tests-with-coverage">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/guides/tests-with-coverage">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/guides/tests-with-coverage">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/guides/tests-with-coverage">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" selected>3.16.2 - Latest</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <a class="editlink" href="https://github.com/quarkusio/quarkus/edit/main/docs/src/main/asciidoc/tests-with-coverage.adoc">Edit this Page</a>
      
      <h1 class="text-caps">Measuring the coverage of your tests </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Learn how to measure the test coverage of your application. This guide covers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Measuring the coverage of your Unit Tests</p>
</li>
<li>
<p>Measuring the coverage of your Integration Tests</p>
</li>
<li>
<p>Separating the execution of your Unit Tests and Integration Tests</p>
</li>
<li>
<p>Consolidating the coverage for all your tests</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please note that code coverage is not supported in native mode.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>1. Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Roughly 15 minutes</p>
</li>
<li>
<p>An IDE</p>
</li>
<li>
<p>JDK 17+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.9.9</p>
</li>
<li>
<p>Optionally the <a href="cli-tooling">Quarkus CLI</a> if you want to use it</p>
</li>
<li>
<p>Optionally Mandrel or GraalVM installed and <a href="building-native-image#configuring-graalvm">configured appropriately</a> if you want to build a native executable (or Docker if you use a native container build)</p>
</li>
<li>
<p>Having completed the <a href="getting-started-testing">Testing your application guide</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>2. Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application built in this guide is just a Jakarta REST endpoint (hello world) that relies on dependency injection to use a service.
The service will be tested with JUnit 5 and the endpoint will be annotated via a <code>@QuarkusTest</code> annotation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>3. Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you follow the instructions in the next sections and create the application step by step. However, you can go right to the completed example.
Clone the Git repository: <code>git clone <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code>, or download an <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/main.zip">archive</a>.</p>
</div>
<div class="paragraph">
<p>The solution is located in the <code>tests-with-coverage-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/main/tests-with-coverage-quickstart">directory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starting-from-a-simple-project-and-two-tests"><a class="anchor" href="#starting-from-a-simple-project-and-two-tests"></a>4. Starting from a simple project and two tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s start from an empty application created with the Quarkus Maven plugin:</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-sync-cli">
<div class="content">
<div class="title">CLI</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus create app org.acme:tests-with-coverage-quickstart \
    --extension='rest' \
    --no-code
cd tests-with-coverage-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a Gradle project, add the <code>--gradle</code> or <code>--gradle-kotlin-dsl</code> option.</p>
</div>
<div class="paragraph">
<p>For more information about how to install and use the Quarkus CLI, see the <a href="cli-tooling">Quarkus CLI</a> guide.</p>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-sync-maven">
<div class="content">
<div class="title">Maven</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn io.quarkus.platform:quarkus-maven-plugin:3.16.2:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=tests-with-coverage-quickstart \
    -Dextensions='rest' \
    -DnoCode
cd tests-with-coverage-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a Gradle project, add the <code>-DbuildTool=gradle</code> or <code>-DbuildTool=gradle-kotlin-dsl</code> option.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>For Windows users:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If using cmd, (don&#8217;t use backward slash <code>\</code> and put everything on the same line)</p>
</li>
<li>
<p>If using Powershell, wrap <code>-D</code> parameters in double quotes e.g. <code>"-DprojectArtifactId=tests-with-coverage-quickstart"</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now we&#8217;ll be adding all the elements necessary to have an application that is properly covered with tests.</p>
</div>
<div class="paragraph">
<p>First, a Jakarta REST resource serving a hello endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.testcoverage;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/hello")
public class GreetingResource {

    private final GreetingService service;

    @Inject
    public GreetingResource(GreetingService service) {
        this.service = service;
    }

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    @Path("/greeting/{name}")
    public String greeting(String name) {
        return service.greeting(name);
    }

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "hello";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This endpoint uses a greeting service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.testcoverage;

import jakarta.enterprise.context.ApplicationScoped;

@ApplicationScoped
public class GreetingService {

    public String greeting(String name) {
        return "hello " + name;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The project will also need a test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.testcoverage;

import io.quarkus.test.junit.QuarkusTest;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.Tag;

import java.util.UUID;

import static io.restassured.RestAssured.given;
import static org.hamcrest.CoreMatchers.is;

@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/hello")
          .then()
             .statusCode(200)
             .body(is("hello"));
    }

    @Test
    public void testGreetingEndpoint() {
        String uuid = UUID.randomUUID().toString();
        given()
          .pathParam("name", uuid)
          .when().get("/hello/greeting/{name}")
          .then()
            .statusCode(200)
            .body(is("hello " + uuid));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up-jacoco"><a class="anchor" href="#setting-up-jacoco"></a>5. Setting up JaCoCo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we need to add JaCoCo to our project. To do this we need to add the following to the build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-jacoco&lt;/artifactId&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">testImplementation("io.quarkus:quarkus-jacoco")</code></pre>
</div>
</div>
<div class="paragraph">
<p>This Quarkus extension takes care of everything that would usually be done via the JaCoCo Maven plugin, so no additional
config is required.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Using both the extension and the plugin requires special configuration, if you add both you will get lots of errors about classes
already being instrumented. The configuration needed is detailed below.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="working-with-multi-module-projects"><a class="anchor" href="#working-with-multi-module-projects"></a>6. Working with multi-module projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Up until <code>3.2</code>, <code>data-file</code> and <code>report-location</code> were always relative to the module&#8217;s build output directory, which prevented from
working with multi-module projects where you want to aggregate all coverages into a single parent directory. Starting in <code>3.3</code>,
specifying a <code>data-file</code> or <code>report-location</code> will assume the path as is. Here is an example on how to set up the <code>surefire</code> plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;systemPropertyVariables&gt;
      &lt;quarkus.jacoco.data-file&gt;${maven.multiModuleProjectDirectory}/target/jacoco.exec&lt;/quarkus.jacoco.data-file&gt;
      &lt;quarkus.jacoco.reuse-data-file&gt;true&lt;/quarkus.jacoco.reuse-data-file&gt;
      &lt;quarkus.jacoco.report-location&gt;${maven.multiModuleProjectDirectory}/target/coverage&lt;/quarkus.jacoco.report-location&gt;
    &lt;/systemPropertyVariables&gt;
  &lt;/configuration&gt;
&lt;/plugin</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you need to configure the <code>argLine</code> property of the Surefire plugin (e.g. for setting memory parameters), you need to use <a href="https://maven.apache.org/surefire/maven-surefire-plugin/faq.html#late-property-evaluation" target="_blank" rel="noopener">Maven late property evaluation</a>, otherwise the Jacoco agent will not be correctly added, and regular JUnit tests and Quarkus <code>ComponentTest</code> will not get covered. Example: <code>&lt;argLine&gt;@{argLine} -your -extra -arguments&lt;/argLine&gt;</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-tests-with-coverage"><a class="anchor" href="#running-the-tests-with-coverage"></a>7. Running the tests with coverage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run <code>mvn verify</code>, the tests will be run and the results will end up in <code>target/jacoco-reports</code>. This is all that is needed,
the <code>quarkus-jacoco</code> extension allows JaCoCo to just work out of the box.</p>
</div>
<div class="paragraph">
<p>There are some config options that affect this:</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-enabled"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-enabled"><code>quarkus.jacoco.enabled</code></a></span></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether or not the jacoco extension is enabled.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8586">QUARKUS_JACOCO_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8586" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-data-file"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-data-file"><code>quarkus.jacoco.data-file</code></a></span></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The jacoco data file. The path can be relative (to the module) or absolute.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8587">QUARKUS_JACOCO_DATA_FILE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8587" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>target/jacoco-quarkus.exec</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-reuse-data-file"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-reuse-data-file"><code>quarkus.jacoco.reuse-data-file</code></a></span></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Whether to reuse (<code>true</code>) or delete (<code>false</code>) the jacoco data file on each run.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8588">QUARKUS_JACOCO_REUSE_DATA_FILE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8588" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-report"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-report"><code>quarkus.jacoco.report</code></a></span></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If Quarkus should generate the Jacoco report</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8589">QUARKUS_JACOCO_REPORT</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8589" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-output-encoding"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-output-encoding"><code>quarkus.jacoco.output-encoding</code></a></span></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Encoding of the generated reports.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8590">QUARKUS_JACOCO_OUTPUT_ENCODING</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8590" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>UTF-8</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-title"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-title"><code>quarkus.jacoco.title</code></a></span></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Name of the root node HTML report pages.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8591">QUARKUS_JACOCO_TITLE</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8591" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>${quarkus.application.name}</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-footer"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-footer"><code>quarkus.jacoco.footer</code></a></span></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Footer text used in HTML report pages.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8592">QUARKUS_JACOCO_FOOTER</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8592" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-source-encoding"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-source-encoding"><code>quarkus.jacoco.source-encoding</code></a></span></p>
</div>
<div id="conf-collapsible-desc-8" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Encoding of the source files.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8593">QUARKUS_JACOCO_SOURCE_ENCODING</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8593" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>UTF-8</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-includes"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-includes"><code>quarkus.jacoco.includes</code></a></span></p>
</div>
<div id="conf-collapsible-desc-9" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A list of class files to include in the report. May use wildcard characters (* and ?). When not specified everything will be included.</p>
</div>
<div class="paragraph">
<p>For instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>**/fo/**/*</code> targets all classes under fo and sub packages</p>
</li>
<li>
<p><code>**/bar/*</code> targets all classes directly under bar</p>
</li>
<li>
<p><code>**/*BAR*.class</code> targets classes that contain BAR in their name regardless of path</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8594">QUARKUS_JACOCO_INCLUDES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8594" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>**</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-excludes"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-excludes"><code>quarkus.jacoco.excludes</code></a></span></p>
</div>
<div id="conf-collapsible-desc-10" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>A list of class files to exclude from the report. May use wildcard characters (* and ?). When not specified nothing will be excluded.</p>
</div>
<div class="paragraph">
<p>For instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>**/fo/**/*</code> targets all classes under fo and sub packages</p>
</li>
<li>
<p><code>**/bar/*</code> targets all classes directly under bar</p>
</li>
<li>
<p><code>**/*BAR*.class</code> targets classes that contain BAR in their name regardless of path</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8595">QUARKUS_JACOCO_EXCLUDES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8595" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-jacoco_quarkus-jacoco-report-location"></a> <span class="property-path"><a href="#quarkus-jacoco_quarkus-jacoco-report-location"><code>quarkus.jacoco.report-location</code></a></span></p>
</div>
<div id="conf-collapsible-desc-11" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The location of the report files. The path can be relative (to the module) or absolute.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-8596">QUARKUS_JACOCO_REPORT_LOCATION</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-8596" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>target/jacoco-report</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When working with a multi-module project, then for code coverage to work properly, the upstream modules need to be properly <a href="cdi-reference#bean_discovery">indexed</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="coverage-for-tests-not-using-quarkustest"><a class="anchor" href="#coverage-for-tests-not-using-quarkustest"></a>8. Coverage for tests not using @QuarkusTest</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus automatic JaCoCo config will only work for tests that are annotated with <code>@QuarkusTest</code>. If you want to check
the coverage of other tests as well then you will need to fall back to the JaCoCo maven plugin.</p>
</div>
<div class="paragraph">
<p>In addition to including the <code>quarkus-jacoco</code> extension in your <code>pom.xml</code> you will need the following config:</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="content">
<div class="title">pom.xml</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            ...
            &lt;plugin&gt;
                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${jacoco.version}&lt;/version&gt;
                &lt;executions&gt;
                   &lt;execution&gt;
                      &lt;id&gt;default-prepare-agent&lt;/id&gt;
                      &lt;goals&gt;
                           &lt;goal&gt;prepare-agent&lt;/goal&gt;
                      &lt;/goals&gt;
                      &lt;configuration&gt;
                        &lt;exclClassLoaders&gt;*QuarkusClassLoader&lt;/exclClassLoaders&gt;  <i class="conum" data-value="1"></i><b>(1)</b>
                        &lt;destFile&gt;${project.build.directory}/jacoco-quarkus.exec&lt;/destFile&gt;
                        &lt;append&gt;true&lt;/append&gt;
                      &lt;/configuration&gt;
                   &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This config tells it to ignore <code>@QuarkusTest</code> related classes, as they are loaded by <code>QuarkusClassLoader</code></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-target-sync-gradle">
<div class="content">
<div class="title">build.gradle</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">plugins {
    id 'jacoco' <i class="conum" data-value="1"></i><b>(1)</b>
}

test {
    finalizedBy jacocoTestReport
    jacoco {
        excludeClassLoaders = ["*QuarkusClassLoader"] <i class="conum" data-value="2"></i><b>(2)</b>
        destinationFile = layout.buildDirectory.file("jacoco-quarkus.exec").get().asFile <i class="conum" data-value="2"></i><b>(2)</b>
    }
    jacocoTestReport.enabled = false <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add the <code>jacoco</code> gradle plugin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This config tells it to ignore <code>@QuarkusTest</code> related classes, as they are loaded by <code>QuarkusClassLoader</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set this config to <code>false</code> if you are also using the <code>quarkus-jacoco</code> extension and have at least one <code>@QuarkusTest</code>.  The default <code>jacocoTestReport</code> task can be skipped since <code>quarkus-jacoco</code> will generate the combined report of regular unit tests and <code>@QuarkusTest</code> classes since the execution data is recorded in the same file.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This config will only work if at least one <code>@QuarkusTest</code> is being run. If you are not using <code>@QuarkusTest</code> then
you can simply use the JaCoCo plugin in the standard manner with no additional config.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="coverage-for-integration-tests"><a class="anchor" href="#coverage-for-integration-tests"></a>8.1. Coverage for Integration Tests</h3>
<div class="paragraph">
<p>To get code coverage data from integration tests, the following requirements need to be met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The built artifact is a jar (and not a container or native binary).</p>
</li>
<li>
<p>JaCoCo needs to be configured in your build tool.</p>
</li>
<li>
<p>The application must have been built with <code>quarkus.package.write-transformed-bytecode-to-build-output</code> set to <code>true</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Setting <code>quarkus.package.write-transformed-bytecode-to-build-output=true</code> should be done with caution and only if subsequent builds are done in a clean environment - i.e. the build tool&#8217;s output directory has been completely cleaned.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the <code>pom.xml</code>, you can add the following plugin configuration for JaCoCo. This will append integration test data into the same destination file as unit tests,
re-build the JaCoCo report after the integration tests are complete, and thus produce a comprehensive code-coverage report.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
    ...
    &lt;plugins&gt;
        ...
        &lt;plugin&gt;
            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;${jacoco.version}&lt;/version&gt;
            &lt;executions&gt;
                ... <i class="conum" data-value="1"></i><b>(1)</b>

                &lt;execution&gt;
                    &lt;id&gt;default-prepare-agent-integration&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;prepare-agent-integration&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;destFile&gt;${project.build.directory}/jacoco-quarkus.exec&lt;/destFile&gt;
                        &lt;append&gt;true&lt;/append&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
                &lt;execution&gt;
                    &lt;id&gt;report&lt;/id&gt;
                    &lt;phase&gt;post-integration-test&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;report&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;dataFile&gt;${project.build.directory}/jacoco-quarkus.exec&lt;/dataFile&gt;
                        &lt;outputDirectory&gt;${project.build.directory}/jacoco-report&lt;/outputDirectory&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
        ...
    &lt;/plugins&gt;
    ...
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>All executions should be in the same <code>&lt;plugin&gt;</code> definition so make sure you concatenate all of them.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to run the integration tests as a jar with the JaCoCo agent, add the following to your <code>pom.xml</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
    ...
    &lt;plugins&gt;
        ...
        &lt;plugin&gt;
            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;
            &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;integration-test&lt;/goal&gt;
                        &lt;goal&gt;verify&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;systemPropertyVariables&gt;
                            &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;
                            &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;
                            &lt;quarkus.test.arg-line&gt;${argLine}&lt;/quarkus.test.arg-line&gt;
                        &lt;/systemPropertyVariables&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
        ...
    &lt;/plugins&gt;
    ...
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Sharing the same value for <code>quarkus.test.arg-line</code> might break integration test runs that test different types of Quarkus artifacts. In such cases, the use of Maven profiles is advised.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-coverage-thresholds"><a class="anchor" href="#setting-coverage-thresholds"></a>9. Setting coverage thresholds</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can set thresholds for code coverage using the JaCoCo Maven plugin. Note the element <code>&lt;dataFile&gt;${project.build.directory}/jacoco-quarkus.exec&lt;/dataFile&gt;</code>.
You must set it matching your choice for <code>quarkus.jacoco.data-file</code>.</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="content">
<div class="title">pom.xml</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
    ...
    &lt;plugins&gt;
        ...
        &lt;plugin&gt;
            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;${jacoco.version}&lt;/version&gt;
            &lt;executions&gt;
                ... <i class="conum" data-value="1"></i><b>(1)</b>

                &lt;execution&gt;
                    &lt;id&gt;jacoco-check&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;check&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;phase&gt;post-integration-test&lt;/phase&gt;
                    &lt;configuration&gt;
                        &lt;dataFile&gt;${project.build.directory}/jacoco-quarkus.exec&lt;/dataFile&gt;
                        &lt;rules&gt;
                            &lt;rule&gt;
                                &lt;element&gt;BUNDLE&lt;/element&gt;
                                &lt;limits&gt;
                                    &lt;limit&gt;
                                        &lt;counter&gt;LINE&lt;/counter&gt;
                                        &lt;value&gt;COVEREDRATIO&lt;/value&gt;
                                        &lt;minimum&gt;0.8&lt;/minimum&gt;
                                    &lt;/limit&gt;
                                    &lt;limit&gt;
                                        &lt;counter&gt;BRANCH&lt;/counter&gt;
                                        &lt;value&gt;COVEREDRATIO&lt;/value&gt;
                                        &lt;minimum&gt;0.72&lt;/minimum&gt;
                                    &lt;/limit&gt;
                                &lt;/limits&gt;
                            &lt;/rule&gt;
                        &lt;/rules&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
        ...
    &lt;/plugins&gt;
    ...
&lt;/build&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>All executions should be in the same <code>&lt;plugin&gt;</code> definition so make sure you concatenate all of them.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-target-sync-gradle">
<div class="content">
<div class="title">build.gradle</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">jacocoTestCoverageVerification {
    executionData.setFrom("$project.buildDir/jacoco-quarkus.exec")
    violationRules {
        rule {
            limit {
                counter = 'INSTRUCTION'
                value = 'COVEREDRATIO'
                minimum = 0.80
            }
            limit {
                counter = 'BRANCH'
                value = 'COVEREDRATIO'
                minimum = 0.72
            }
        }
    }
}
check.dependsOn jacocoTestCoverageVerification</code></pre>
</div>
</div>
<div class="paragraph">
<p>Excluding classes from the verification task can be configured as following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">jacocoTestCoverageVerification {
    afterEvaluate { <i class="conum" data-value="1"></i><b>(1)</b>
        classDirectories.setFrom(files(classDirectories.files.collect { <i class="conum" data-value="2"></i><b>(2)</b>
            fileTree(dir: it, exclude: [
                    "org/example/package/**/*" <i class="conum" data-value="3"></i><b>(3)</b>
            ])
        }))
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>classDirectories</code> needs to be read after evaluation phase in Gradle</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Currently, there is a bug in Gradle JaCoCo which requires the <code>excludes</code> to be specified in this manner - <a href="https://github.com/gradle/gradle/issues/14760" class="bare">https://github.com/gradle/gradle/issues/14760</a>.  Once this issue is fixed, excludes</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Exclude all classes in <code>org/example/package</code> package</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>10. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You now have all the information you need to study the coverage of your tests!
But remember, some code that is not covered is certainly not well tested. But some code that is covered is not necessarily <strong>well</strong> tested. Make sure to write good tests!</p>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">1. Prerequisites</a></li>
<li><a href="#architecture">2. Architecture</a></li>
<li><a href="#solution">3. Solution</a></li>
<li><a href="#starting-from-a-simple-project-and-two-tests">4. Starting from a simple project and two tests</a></li>
<li><a href="#setting-up-jacoco">5. Setting up JaCoCo</a></li>
<li><a href="#working-with-multi-module-projects">6. Working with multi-module projects</a></li>
<li><a href="#running-the-tests-with-coverage">7. Running the tests with coverage</a></li>
<li><a href="#coverage-for-tests-not-using-quarkustest">8. Coverage for tests not using @QuarkusTest</a>
<ul class="sectlevel2">
<li><a href="#coverage-for-integration-tests">8.1. Coverage for Integration Tests</a></li>
</ul>
</li>
<li><a href="#setting-coverage-thresholds">9. Setting coverage thresholds</a></li>
<li><a href="#conclusion">10. Conclusion</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/guides/continuous-testing">Continuous Testing</a></li>
      
        
        <li class="guide"><a href="/guides/testing-components">Testing components</a></li>
      
        
        <li class="guide"><a href="/guides/getting-started-testing">Testing Your Application</a></li>
      
        
        <li class="guide"><a href="/guides/cli-tooling">Building Quarkus apps with Quarkus Command Line Interface (CLI)</a></li>
      
        
        <li class="guide"><a href="/guides/upx">Compressing native executables using UPX</a></li>
      
        
        <li class="howto"><a href="/guides/security-openid-connect-dev-services">Dev Services and Dev UI for OpenID Connect (OIDC)</a></li>
      
        
        <li class="guide"><a href="/guides/amqp-dev-services">Dev Services for AMQP</a></li>
      
        
        <li class="guide"><a href="/guides/apicurio-registry-dev-services">Dev Services for Apicurio Registry</a></li>
      
        
        <li class="guide"><a href="/guides/databases-dev-services">Dev Services for Databases</a></li>
      
        
        <li class="guide"><a href="/guides/elasticsearch-dev-services">Dev Services for Elasticsearch</a></li>
      
        
        <li class="guide"><a href="/guides/infinispan-dev-services">Dev Services for Infinispan</a></li>
      
        
        <li class="guide"><a href="/guides/kafka-dev-services">Dev Services for Kafka</a></li>
      
        
        <li class="guide"><a href="/guides/kubernetes-dev-services">Dev Services for Kubernetes</a></li>
      
        
        <li class="guide"><a href="/guides/pulsar-dev-services">Dev Services for Pulsar</a></li>
      
        
        <li class="guide"><a href="/guides/rabbitmq-dev-services">Dev Services for RabbitMQ</a></li>
      
        
        <li class="guide"><a href="/guides/redis-dev-services">Dev Services for Redis</a></li>
      
        
        <li class="guide"><a href="/guides/dev-services">Dev Services Overview</a></li>
      
        
        <li class="guide"><a href="/guides/dev-ui">Dev UI for extension developers</a></li>
      
        
        <li class="guide"><a href="/guides/jreleaser">Packaging And Releasing With JReleaser</a></li>
      
        
        <li class="guide"><a href="/guides/gradle-tooling">Quarkus and Gradle</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

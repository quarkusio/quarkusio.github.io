<!DOCTYPE html>
<html lang="en">







<head>
  <title>Conditional Extension Dependencies - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/guides/conditional-extension-dependencies" />
  <meta property="og:title" content="Conditional Extension Dependencies" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/conditional-extension-dependencies">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/guides/conditional-extension-dependencies" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/guides/conditional-extension-dependencies" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/guides/conditional-extension-dependencies" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/guides/conditional-extension-dependencies" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/guides/conditional-extension-dependencies" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/guides/conditional-extension-dependencies" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/guides/conditional-extension-dependencies">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/guides/conditional-extension-dependencies">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/guides/conditional-extension-dependencies">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/guides/conditional-extension-dependencies">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" selected>3.23.4 - Latest</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <a class="editlink" href="https://github.com/quarkusio/quarkus/edit/main/docs/src/main/asciidoc/conditional-extension-dependencies.adoc">Edit this Page</a>
      
      <h1 class="text-caps">Conditional Extension Dependencies </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus extension dependencies are usually configured in the same way as any other project dependencies in a project&#8217;s build file, for example the Maven <code>pom.xml</code> or the Gradle build scripts. However, Quarkus also supports types of dependencies that aren&#8217;t supported out-of-the-box by Maven and Gradle. Conditional Quarkus extension dependencies is one such example.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conditional-dependencies"><a class="anchor" href="#conditional-dependencies"></a>Conditional Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A conditional dependency is a dependency that is activated only if a certain condition is satisfied. If the condition is not satisfied then the dependency <strong>will not</strong> be activated. In that regard, conditional dependencies can be categorized as optional, meaning they may or may not appear in the resulting dependency graph.</p>
</div>
<div class="paragraph">
<p>A typical example of a conditional dependency would be a component that should be added to the classpath <strong>only</strong> in case all of its required dependencies are present on the classpath. If one or more of the component&#8217;s required dependencies aren&#8217;t available, instead of failing, the component should simply not be added.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conditional-quarkus-extension-dependencies"><a class="anchor" href="#conditional-quarkus-extension-dependencies"></a>Conditional Quarkus Extension Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Quarkus extension may declare one or more conditional dependencies on other Quarkus extensions or regular Maven artifacts.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider the following scenario as an example: <code>quarkus-extension-a</code> has an optional dependency on <code>quarkus-extension-b</code> which should be included in a Quarkus application only if <code>quarkus-extension-c</code> is found among the application dependencies (direct or transitive). In this case, the presence of <code>quarkus-extension-c</code> is the condition, which, if satisfied, will trigger inclusion of the <code>quarkus-extension-b</code> when Quarkus application dependencies are resolved.</p>
</div>
<div class="paragraph">
<p>The condition which triggers activation of an extension is configured in the extension&#8217;s <code>META-INF/quarkus-extension.properties</code>, which is included in the runtime artifact of the extension. Extension developers can add the following configuration to express the condition which would have to be satisfied for the extension to be activated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;artifactId&gt;quarkus-extension-b&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-extension-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${quarkus.version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;process-resources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;extension-descriptor&lt;/goal&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;dependencyCondition&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                &lt;artifact&gt;org.acme:quarkus-extension-c&lt;/artifact&gt; <i class="conum" data-value="4"></i><b>(4)</b>
              &lt;/dependencyCondition&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;

  &lt;!-- SKIPPED CONTENT --&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>runtime Quarkus extension artifact ID;</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the goal that generates the extension descriptor which every Quarkus runtime extension project should be configured with;</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>configuration of the dependency condition which will have to be satisfied for this extension to be added to a Quarkus application expressed as a list of artifacts that must be present among the application dependencies;</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>an artifact key (in the format of <code>groupId:artifactId[:&lt;classifier&gt;:&lt;extension&gt;]</code> but typically simply <code>&lt;groupId&gt;:&lt;artifactId&gt;</code>) of the artifact that must be present among the application dependencies for the condition to be satisfied.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the example above the <code>artifact</code> used in the condition configuration happens to be a runtime Quarkus extension artifact but it could as well be any other artifact.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>dependencyCondition</code> element may contain more than <code>artifact</code>, in which case all the configured artifacts must be present on the classpath for the condition to be satisfied.</p>
</div>
<div class="paragraph">
<p>Now, having a dependency condition recorded in the descriptor of the <code>quarkus-extension-b</code>, other extensions may declare a conditional dependency on it.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
extensions with dependency conditions present in their metadata could still appear as regular dependencies in Maven <code>pom.xml</code> and Gradle build scripts, in which case their conditions will simply be ignored.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A conditional dependency is configured in the runtime artifact of a Quarkus extension. In this example, the <code>quarkus-extension-a</code> will declare a conditional dependency on the <code>quarkus-extension-b</code>, which can be done in the following two ways.</p>
</div>
<div class="sect2">
<h3 id="declaring-a-dependency-as-optional"><a class="anchor" href="#declaring-a-dependency-as-optional"></a>Declaring a dependency as <code>optional</code></h3>
<div class="paragraph">
<p>If an extension includes a dependency condition in its descriptor, other extensions may configure a conditional dependency on it by simply adding <code>&lt;optional&gt;true&lt;/optional&gt;</code> to the dependency configuration. In our example it would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;artifactId&gt;quarkus-extension-a&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.acme&lt;/groupId&gt;
      &lt;artifactId&gt;quarkus-extension-b&lt;/artifactId&gt; <i class="conum" data-value="2"></i><b>(2)</b>
      &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;

  &lt;!-- SKIPPED CONTENT --&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the runtime extension artifact <code>quarkus-extension-a</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declares an optional Maven dependency on the runtime extension artifact <code>quarkus-extension-b</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Given that <code>quarkus-extension-b</code> includes a dependency condition, Quarkus will interpret an optional dependency on the <code>quarkus-extension-b</code> as conditional.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In general, for every runtime extension artifact dependency on another runtime extension artifact there must be the corresponding deployment extension artifact dependency on the other deployment extension artifact. And if the runtime dependency is declared as optional then the corresponding deployment dependency <strong>must</strong> also be configured as optional.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;artifactId&gt;quarkus-extension-a-deployment&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.acme&lt;/groupId&gt;
      &lt;artifactId&gt;quarkus-extension-b-deployment&lt;/artifactId&gt; <i class="conum" data-value="2"></i><b>(2)</b>
      &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;

  &lt;!-- SKIPPED CONTENT --&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the deployment extension artifact <code>quarkus-extension-a-deployment</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>declares an optional Maven dependency on the deployment extension artifact <code>quarkus-extension-b-deployment</code></td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If the <code>quarkus-extension-b</code> dependency wasn&#8217;t declared as <code>&lt;optional&gt;true&lt;/optional&gt;</code> it would make the <code>quarkus-extension-b</code> a required dependency of the <code>quarkus-extension-a</code> and its dependency condition would be ignored by the application dependency resolver.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="declaring-a-conditional-dependency-in-the-quarkus-extension-descriptor"><a class="anchor" href="#declaring-a-conditional-dependency-in-the-quarkus-extension-descriptor"></a>Declaring a conditional dependency in the Quarkus extension descriptor</h3>
<div class="paragraph">
<p>Conditional dependencies can also be configured in the Quarkus extension descriptor directly. Here is an example of how it can be done in the Quarkus extension plugin configuration of the <code>quarkus-extension-a</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;artifactId&gt;quarkus-extension-a&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-extension-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${quarkus.version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;process-resources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;extension-descriptor&lt;/goal&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;conditionalDependencies&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                &lt;artifact&gt;org.acme:quarkus-extension-b:${b.version}&lt;/artifact&gt; <i class="conum" data-value="4"></i><b>(4)</b>
              &lt;/conditionalDependencies&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;

  &lt;!-- SKIPPED CONTENT --&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the runtime Quarkus extension artifact ID;</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the goal that generates the extension descriptor which every Quarkus runtime extension project should be configured with;</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the conditional dependency configuration element;</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the artifact coordinates of conditional dependencies on other extensions.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this case, the Maven dependency is not at all required in the <code>pom.xml</code> file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-mode-only-extension-dependencies"><a class="anchor" href="#dev-mode-only-extension-dependencies"></a>Dev mode-only extension dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Extensions can also declare conditional dependencies on other extensions using dev mode as the condition or one of the conditions for those dependencies to be activated.</p>
</div>
<div class="paragraph">
<p>Dev mode-only extension dependencies can be configured in the Quarkus extension plugin in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;artifactId&gt;quarkus-extension-a&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-extension-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${quarkus.version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;process-resources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;extension-descriptor&lt;/goal&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;conditionalDevDependencies&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                &lt;artifact&gt;org.acme:quarkus-extension-b:${b.version}&lt;/artifact&gt; <i class="conum" data-value="4"></i><b>(4)</b>
              &lt;/conditionalDevDependencies&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;

  &lt;!-- SKIPPED CONTENT --&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the runtime Quarkus extension artifact ID;</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the goal that generates the extension descriptor which every Quarkus runtime extension project should be configured with;</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>conditional dependencies that should be evaluated only in dev mode;</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the artifact coordinates of a conditional dependency.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>quarkus-extension-b</code>, in this example, may or may not define its own condition to be evaluated.</p>
</div>
<div class="paragraph">
<p>If the <code>quarkus-extension-b</code> does not define a dependency condition on its own (there is no dependency condition recorded in its <code>META-INF/quarkus-extension.properties</code>), the <code>quarkus-extension-b</code> will only be added as a dependency of the <code>quarkus-extension-a</code> in dev mode but not in other modes (prod or test).</p>
</div>
<div class="paragraph">
<p>If the <code>quarkus-extension-b</code> does define a dependency condition on its own (a dependency condition recorded in its <code>META-INF/quarkus-extension.properties</code>), the <code>quarkus-extension-b</code> will be added as a dependency of the <code>quarkus-extension-a</code> in dev mode only if its condition is satisfied (the artifacts it requires are present in the application dependency graph).</p>
</div>
<div class="sect2">
<h3 id="dev-mode-dependencies-on-regular-maven-artifacts"><a class="anchor" href="#dev-mode-dependencies-on-regular-maven-artifacts"></a>Dev mode dependencies on regular Maven artifacts</h3>
<div class="paragraph">
<p>Extensions may also declare conditional dependencies on regular Maven artifacts, that are not Quarkus extensions. Given that regular Maven artifacts do not include Quarkus metadata, the condition for their inclusion is configured by an extension depending on them.</p>
</div>
<div class="paragraph">
<p>For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;artifactId&gt;quarkus-extension-a&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>

  &lt;!-- SKIPPED CONTENT --&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-extension-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${quarkus.version}&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;process-resources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;extension-descriptor&lt;/goal&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;conditionalDevDependencies&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                &lt;artifact&gt;org.acme:library-b:${b.version}&lt;/artifact&gt; <i class="conum" data-value="4"></i><b>(4)</b>
              &lt;/conditionalDevDependencies&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;

  &lt;!-- SKIPPED CONTENT --&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the runtime Quarkus extension artifact ID;</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the goal that generates the extension descriptor which every Quarkus runtime extension project should be configured with;</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>conditional dependencies that should be evaluated only in dev mode;</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the artifact coordinates of a conditional dependency.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this example <code>library-b</code> is a regular Maven artifact that will be added as a dependency of the <code>quarkus-extension-a</code> only when an application is launched in dev mode.</p>
</div>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#conditional-dependencies">Conditional Dependencies</a></li>
<li><a href="#conditional-quarkus-extension-dependencies">Conditional Quarkus Extension Dependencies</a>
<ul class="sectlevel2">
<li><a href="#declaring-a-dependency-as-optional">Declaring a dependency as <code>optional</code></a></li>
<li><a href="#declaring-a-conditional-dependency-in-the-quarkus-extension-descriptor">Declaring a conditional dependency in the Quarkus extension descriptor</a></li>
</ul>
</li>
<li><a href="#dev-mode-only-extension-dependencies">Dev mode-only extension dependencies</a>
<ul class="sectlevel2">
<li><a href="#dev-mode-dependencies-on-regular-maven-artifacts">Dev mode dependencies on regular Maven artifacts</a></li>
</ul>
</li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="concepts"><a href="/guides/extension-maturity-matrix">A maturity matrix for Quarkus extensions</a></li>
      
        
        <li class="guide"><a href="/guides/building-my-first-extension">Building my first extension</a></li>
      
        
        <li class="reference"><a href="/guides/class-loading-reference">Class Loading Reference</a></li>
      
        
        <li class="concepts"><a href="/guides/duplicated-context">Duplicated context, context locals, asynchronous processing and propagation</a></li>
      
        
        <li class="guide"><a href="/guides/capabilities">Extension Capabilities</a></li>
      
        
        <li class="guide"><a href="/guides/extension-codestart">Extension codestart</a></li>
      
        
        <li class="guide"><a href="/guides/extension-metadata">Quarkus Extension Metadata</a></li>
      
        
        <li class="guide"><a href="/guides/extension-registry-user">Quarkus Extension Registry</a></li>
      
        
        <li class="guide"><a href="/guides/writing-native-applications-tips">Tips for writing native applications</a></li>
      
        
        <li class="howto"><a href="/guides/extension-writing-dev-service">Writing a Dev Service</a></li>
      
        
        <li class="guide"><a href="/guides/writing-extensions">Writing Your Own Extension</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">







<head>
  <title>Quarkus - a component testing update</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/quarkus-component-test-update/" />
  <meta property="og:title" content="Quarkus - a component testing update" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/quarkus-component-test-update/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/blog/quarkus-component-test-update/" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/blog/quarkus-component-test-update/" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/blog/quarkus-component-test-update/" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/blog/quarkus-component-test-update/" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/blog/quarkus-component-test-update/" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="post">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="active">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/blog/quarkus-component-test-update/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/blog/quarkus-component-test-update/">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/blog/quarkus-component-test-update/">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/blog/quarkus-component-test-update/">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/blog/quarkus-component-test-update/">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="full-width-breadcrumb-bg align-self">
  <div class="width-12-12">
      <p class="returnlink"><a href="/blog">Blog</a> <i class="fas fa-chevron-right"></i> Quarkus - a component testing update</p>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <div class="post-date">
          October 20, 2025 
          
            <span class="tags"><a href="/blog/tag/testing">#testing</a></span>
          
        </div>
        <h1 class="post-title">Quarkus - a component testing update</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            
            
              <img class="headshot" src="https://www.gravatar.com/avatar/8036ef0e54eaf768510dcc9be07762a6">
            
            <p class="byline">By <a href="/author/mkouba">Martin Kouba</a></p>
          </div>
          <div class="width-12-12">
              <div class="paragraph">
<p>It&#8217;s been a while since we <a href="https://quarkus.io/blog/quarkus-component-test/">introduced the component testing</a> in Quarkus.
In this blogpost, we will first quickly summarize the basic principles and then describe some of the new interesting features.</p>
</div>
<div class="sect1">
<h2 id="quick-summary"><a class="anchor" href="#quick-summary"></a>Quick summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, just a quick summary.
The component model of Quarkus is built on top of CDI.
An idiomatic way to test a Quarkus application is to use the <code>quarkus-junit5</code> module and <code>@QuarkusTest</code>.
However, in this case, a full Quarkus application needs to be built and started.
In order to avoid unnecessary rebuilds and restarts the application is shared for multiple tests, unless a <a href="https://quarkus.io/guides/getting-started-testing#testing_different_profiles">different test profile</a> is used.
One of the consequences is that some components (typically <code>@ApplicationScoped</code> and <code>@Singleton</code> CDI beans) are shared as well.
What if you need to test the business logic of a component in isolation, with different states and inputs?
For this use case, a plain unit test would make a lot of sense.
However, writing unit tests for CDI beans without a running CDI container is often a tedious work.
Dependency injection, events, interceptors - all the work has to be done manually and everything needs to be wired together by hand.
In Quarkus 3.2, we introduced an experimental feature to ease the testing of CDI components and mocking of their dependencies.
It&#8217;s a JUnit 5 extension that does not start a full Quarkus application but merely the CDI container and the Configuration service.</p>
</div>
<div class="sect2">
<h3 id="the-lifecycle"><a class="anchor" href="#the-lifecycle"></a>The lifecycle</h3>
<div class="paragraph">
<p>So when exactly does the <code>QuarkusComponentTest</code> start the CDI container?
It depends on the value of <code>@org.junit.jupiter.api.TestInstance#lifecycle</code>.
If the test instance lifecycle is <code>Lifecycle#PER_METHOD</code> (default) then the container is started during the <em>before each</em> test phase and stopped during the <em>after each</em> test phase.
If the test instance lifecycle is <code>Lifecycle#PER_CLASS`</code> then the container is started during the <em>before all</em> test phase and stopped during the <em>after all</em> test phase.</p>
</div>
</div>
<div class="sect2">
<h3 id="components-under-test"><a class="anchor" href="#components-under-test"></a>Components under test</h3>
<div class="paragraph">
<p>When writing a component test, it&#8217;s essential to understand how the set of <em>tested components</em> is built.
It&#8217;s because the <em>tested components</em> are treated as real beans, but all <em>unsatisfied dependencies</em> are mocked automatically.
What does it mean?
Imagine that we have a bean <code>Foo</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.example;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;

@ApplicationScoped
public class Foo {

    @Inject
    Charlie charlie;

    public String ping() {
        return charlie.ping();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It has one dependency - a bean <code>Charlie</code>.
Now if you want to write a unit test for <code>Foo</code> you need to make sure the <code>Charlie</code> dependency is injected and functional.
In <code>QuarkusComponentTest</code>, if you include <code>Foo</code> in the set of tested components but <code>Charlie</code> is not included, then a mock is automatically injected into <code>Foo.charlie</code>.
What&#8217;s also important is that you can inject the mock directly in the test using the <code>@InjectMock</code> annotation and configure the mock in a test method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.junit.jupiter.api.Assertions.assertEquals;

import jakarta.inject.Inject;
import io.quarkus.test.InjectMock;
import io.quarkus.test.component.QuarkusComponentTest;
import org.junit.jupiter.api.Test;
import org.mockito.Mockito;

@QuarkusComponentTest <i class="conum" data-value="1"></i><b>(1)</b>
public class FooTest {

    @Inject
    Foo foo; <i class="conum" data-value="2"></i><b>(2)</b>

    @InjectMock
    Charlie charlieMock; <i class="conum" data-value="3"></i><b>(3)</b>

    @Test
    public void testPing() {
        Mockito.when(charlieMock.ping()).thenReturn("OK"); <i class="conum" data-value="4"></i><b>(4)</b>
        assertEquals("OK", foo.ping());
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>QuarkusComponentTest</code> annotation registers the JUnit extension.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The test injects <code>Foo</code> - it&#8217;s included in the set of tested components. In other words, it&#8217;s treated as a real CDI bean.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The test also injects a mock for <code>Charlie</code>. <code>Charlie</code> is an <em>unsatisfied</em> dependency for which a synthetic <code>@Singleton</code> bean is registered automatically. The injected reference is an "unconfigured" Mockito mock.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We can leverage the Mockito API in a test method to configure the behavior.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The initial set of tested components is derived from the test class:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, the types of all fields annotated with <code>@jakarta.inject.Inject</code> are considered the component types.</p>
</li>
<li>
<p>The types of test methods parameters that are not annotated with <code>@InjectMock</code>, <code>@SkipInject</code>, or <code>@org.mockito.Mock</code> are also considered the component types.</p>
</li>
<li>
<p>Finally, if <code>@QuarkusComponentTest#addNestedClassesAsComponents()</code> is set to <code>true</code> (it is by default) then all static nested classes declared on the test class are components too.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Additional component classes can be set using <code>@QuarkusComponentTest#value()</code> or <code>QuarkusComponentTestExtensionBuilder#addComponentClasses()</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whats-new"><a class="anchor" href="#whats-new"></a>What&#8217;s new?</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Quarkus 3.13</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Removed the experimental status</p>
</li>
</ol>
</div>
</li>
<li>
<p>Quarkus 3.21</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Basic support for nested tests</p>
</li>
</ol>
</div>
</li>
<li>
<p>Quarkus 3.29</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Class loading refactoring</p>
</li>
<li>
<p><code>QuarkusComponentTestCallbacks</code></p>
</li>
<li>
<p>Integration with <code>quarkus-panache-mock</code></p>
</li>
<li>
<p>Support <code>@InjectMock</code> for built-in <code>Event</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="class-loading-refactoring"><a class="anchor" href="#class-loading-refactoring"></a>Class loading refactoring</h3>
<div class="paragraph">
<p>In the previous versions of <code>QuarkusComponentTest</code> it wasn&#8217;t possible to perform bytecode transformations.
As a result, features like <a href="https://quarkus.io/guides/cdi-reference#simplified-constructor-injection">simplified constructor injection</a> or ability to <a href="https://quarkus.io/guides/cdi-reference#unproxyable_classes_transformation">handle final classes and methods</a> were not supported.
That wasn&#8217;t ideal because the tested CDI beans may have required changes before being used in a <code>QuarkusComponentTest</code>.
This limitation is gone!
The class loading is now more similar to a real Quarkus application.</p>
</div>
</div>
<div class="sect2">
<h3 id="quarkuscomponenttestcallbacks"><a class="anchor" href="#quarkuscomponenttestcallbacks"></a>QuarkusComponentTestCallbacks</h3>
<div class="paragraph">
<p>We also introduced a new SPI - <code>QuarkusComponentTestCallbacks</code> - that can be used to contribute additional logic to the <code>QuarkusComponentTest</code> extension.
There are several callbacks that can be used to modify the behavior before the container is built, after the container is started, etc.
It is a service provider, so all you have to do is to create a file located in <code>META-INF/services/io.quarkus.test.component.QuarkusComponentTestCallbacks</code> that contains the fully qualified name of your implementation class.</p>
</div>
</div>
<div class="sect2">
<h3 id="integration-with-quarkus-panache-mock"><a class="anchor" href="#integration-with-quarkus-panache-mock"></a>Integration with <code>quarkus-panache-mock</code></h3>
<div class="paragraph">
<p>Thanks to class loading refactoring and <code>QuarkusComponentTestCallbacks</code> SPI, we&#8217;re now able to do interesting stuff.
Previously, whenever we got a question like:
<em>"What if I use Panache entities with the active record pattern? How I do write a test for a component that is using such entities?"</em>, we had to admit that it wasn&#8217;t possible.
But it&#8217;s no longer true.
Once you add the <code>quarkus-panache-mock</code> module in your application you can write the component test in a similar way as with the <a href="https://quarkus.io/guides/hibernate-orm-panache#using-the-active-record-pattern"><code>PanacheMock</code> API</a>.</p>
</div>
<div class="paragraph">
<p>Given this simple entity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Person extends PanacheEntity {

   public String name;

   public Person(String name) {
      this.name = name;
   }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That is used in a simple bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.enterprise.context.ApplicationScoped;

@ApplicationScoped
public class PersonService {

   public List&lt;Person&gt; getPersons() {
      return Person.listAll();
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can write a component test like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.junit.jupiter.api.Assertions.assertEquals;

import jakarta.inject.Inject;
import io.quarkus.test.component.QuarkusComponentTest;
import io.quarkus.panache.mock.MockPanacheEntities;
import org.junit.jupiter.api.Test;
import org.mockito.Mockito;

@QuarkusComponentTest <i class="conum" data-value="1"></i><b>(1)</b>
@MockPanacheEntities(Person.class) <i class="conum" data-value="2"></i><b>(2)</b>
public class PersonServiceTest {

    @Inject
    PersonService personService; <i class="conum" data-value="3"></i><b>(3)</b>

    @Test
    public void testGetPersons() {
        Mockito.when(Person.listAll()).thenReturn(List.of(new Person("Tom")));
        List&lt;Person&gt; list = personService.getPersons();
        assertEquals(1, list.size());
        assertEquals("Tom", list.get(0).name);
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>QuarkusComponentTest</code> annotation registers the JUnit extension.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@MockPanacheEntities</code> installs mocks for the given entity classes.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The test injects the component under the test - <code>PersonService</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="support-injectmock-for-built-in-event"><a class="anchor" href="#support-injectmock-for-built-in-event"></a>Support <code>@InjectMock</code> for built-in <code>Event</code></h3>
<div class="paragraph">
<p>It is now possible to mock the built-in bean for <code>jakarta.enterprise.event.Event</code>.</p>
</div>
<div class="paragraph">
<p>Given this simple CDI bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.enterprise.context.ApplicationScoped;
import jakarta.enterprise.event.Event;
import jakarta.inject.Inject;

@ApplicationScoped
public class PersonService {

   @Inject
   Event&lt;Person&gt; event;

   void register(Person person) {
      event.fire(person);
      // ... business logic
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can write a component test like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.mockito.ArgumentMatchers.any;

import jakarta.inject.Inject;
import io.quarkus.test.component.QuarkusComponentTest;
import io.quarkus.test.InjectMock;
import org.junit.jupiter.api.Test;
import org.mockito.Mockito;

@QuarkusComponentTest <i class="conum" data-value="1"></i><b>(1)</b>
public class PersonServiceTest {

   @Inject
   PersonService personService; <i class="conum" data-value="2"></i><b>(2)</b>

   @InjectMock
   Event&lt;Person&gt; event; <i class="conum" data-value="3"></i><b>(3)</b>

   @Test
   public void testRegister() {
      personService.register(new Person()); <i class="conum" data-value="4"></i><b>(4)</b>
      Mockito.verify(event, Mockito.times(1)).fire(any()); <i class="conum" data-value="5"></i><b>(5)</b>
   }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>QuarkusComponentTest</code> annotation registers the JUnit extension.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The test injects the component under the test - <code>PersonService</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Install the mock for the built-in <code>Event</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Call the <code>register()</code> method that should trigger an event.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Verify that the <code>Event#fire()</code> method was called exactly once.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nested-tests"><a class="anchor" href="#nested-tests"></a>Nested tests</h3>
<div class="paragraph">
<p>JUnit <code>@Nested</code> tests may help to structure more complex test scenarios.
However, its support has proven more troublesome than we expected.
Still, we do support and test the basic use cases like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.junit.jupiter.api.Assertions.assertEquals;

import jakarta.inject.Inject;
import io.quarkus.test.InjectMock;
import io.quarkus.test.component.TestConfigProperty;
import io.quarkus.test.component.QuarkusComponentTest;
import org.junit.jupiter.api.Test;
import org.mockito.Mockito;

@QuarkusComponentTest <i class="conum" data-value="1"></i><b>(1)</b>
public class NestedTest {

    @Inject
    Foo foo; <i class="conum" data-value="2"></i><b>(2)</b>

    @InjectMock
    Charlie charlieMock; <i class="conum" data-value="3"></i><b>(3)</b>

    @Nested
    class PingTest {

       @Test
       public void testPing() {
          Mockito.when(charlieMock.ping()).thenReturn("OK");
          assertEquals("OK", foo.ping());
       }
    }

    @Nested
    class PongTest {

       @Test
       public void testPong() {
          Mockito.when(charlieMock.pong()).thenReturn("NOK");
          assertEquals("NOK", foo.pong());
       }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>QuarkusComponentTest</code> annotation registers the JUnit extension.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The test injects the component under the test. <code>Foo</code> injects <code>Charlie</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The test also injects a mock for <code>Charlie</code>. The injected reference is an "unconfigured" Mockito mock.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to test the business logic of your components in isolation, with different configurations and inputs, then <code>QuarkusComponentTest</code> is a good choice.
It&#8217;s fast, integrated with continuous testing, and extensible.
As always, we are looking forward to your feedback!</p>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/quarkus-component-test-update/&title=Quarkus - a component testing update" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa-brands fa-linkedin fa-xl"></i>
  </a>
  <a class="share-x" href="https://x.com/intent/tweet?text=Quarkus - a component testing update&url=https://quarkus.io/blog/quarkus-component-test-update/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on X">
    <i class="fa-brands fa-square-x-twitter fa-xl"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/quarkus-component-test-update/" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa-brands fa-square-facebook fa-xl"></i>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/quarkus-component-test-update/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <i class="fa-brands fa-square-reddit fa-xl"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Quarkus - a component testing update&amp;body=Quarkus - a component testing update https://quarkus.io/blog/quarkus-component-test-update/" title="Share via Email" >
    <i class="fa-solid fa-envelope fa-xl"></i>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
  <script src="https://giscus.app/client.js"
        data-repo="quarkusio/quarkus"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI="
        data-category="Quarkus Blog/Website"
        data-category-id="DIC_kwDOCFbutM4CAFFV"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>

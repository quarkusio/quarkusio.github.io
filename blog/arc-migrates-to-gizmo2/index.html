<!DOCTYPE html>
<html lang="en">







<head>
  <title>ArC migrates to Gizmo 2 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com https://ajax.googleapis.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />

  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/arc-migrates-to-gizmo2/" />
  <meta property="og:title" content="ArC migrates to Gizmo 2" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/arc-migrates-to-gizmo2/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/blog/arc-migrates-to-gizmo2/" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/blog/arc-migrates-to-gizmo2/" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/blog/arc-migrates-to-gizmo2/" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/blog/arc-migrates-to-gizmo2/" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/blog/arc-migrates-to-gizmo2/" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="post">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="active">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/blog/arc-migrates-to-gizmo2/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/blog/arc-migrates-to-gizmo2/">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/blog/arc-migrates-to-gizmo2/">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/blog/arc-migrates-to-gizmo2/">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/blog/arc-migrates-to-gizmo2/">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="full-width-breadcrumb-bg align-self">
  <div class="width-12-12">
      <p class="returnlink"><a href="/blog">Blog</a> <i class="fas fa-chevron-right"></i> ArC migrates to Gizmo 2</p>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <div class="post-date">
          November 03, 2025 
          
            <span class="tags"><a href="/blog/tag/arc">#arc</a><a href="/blog/tag/gizmo">#gizmo</a></span>
          
        </div>
        <h1 class="post-title">ArC migrates to Gizmo 2</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            <p class="byline">
              By 
              
              

              
              
              
                
                
                
                  <img class="headshot" src="https://www.gravatar.com/avatar/238e8b2100a5366b226234b946026462">
                
                  <a href="/author/lthon">Ladislav Thon</a>
                  
              
            </p>
          </div>
          <div class="width-12-12">
              <div class="paragraph">
<p>ArC is Quarkus&#8217;s implementation of CDI Lite.
Gizmo is a simplified bytecode generation library.
What do they have in common?</p>
</div>
<div class="paragraph">
<p>ArC has been using Gizmo 1 since approximately forever, but now that Gizmo 2 is shaping up, some Quarkus components have started migrating to it.
I have started rewriting ArC to Gizmo 2 a few months ago, when we felt like Gizmo 2 starts looking reasonable and some real-world experience was needed.</p>
</div>
<div class="paragraph">
<p>This rewrite took several months, mostly because Gizmo 2 is a complete rewrite and rearchitecture of Gizmo 1 and ArC is a heavy user, but also because during the ArC rewrite, I found some Gizmo 2 issues and there were several back and forths.</p>
</div>
<div class="paragraph">
<p>To illustrate, I&#8217;ll first go over the differences in Gizmo 1 and 2, and then detail how that affects ArC users.
Spoiler alert: there&#8217;s no change that would affect Quarkus applications.
All changes are in the APIs that are only exposed to extensions (at build time).</p>
</div>
<div class="sect1">
<h2 id="gizmo-1-vs-gizmo-2"><a class="anchor" href="#gizmo-1-vs-gizmo-2"></a>Gizmo 1 vs Gizmo 2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First off, Gizmo 1 is based on ASM and Gizmo 2 is based on the ClassFile API (not the one present in the JDK since <a href="https://openjdk.org/jeps/484">version 24</a>, but the <a href="https://github.com/dmlloyd/jdk-classfile-backport">fork</a> maintained by David Lloyd, which supports Java 17).
The ClassFile API itself is very different to ASM, and since the ClassFile API structure guided the Gizmo 2 API structure, that is also very different.</p>
</div>
<div class="paragraph">
<p>To quickly compare, this is how you generate a "Hello, World!" program with Gizmo 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ClassOutput output = ...;
try (ClassCreator creator = ClassCreator.builder()
        .classOutput(output)
        .className("com.example.Hello")
        .build()) {
    MethodCreator method = creator.getMethodCreator("main", void.class, String[].class)
            .setModifiers(Modifier.PUBLIC | Modifier.STATIC);
    Gizmo.systemOutPrintln(method, method.load("Hello, World!"));
    method.returnVoid();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And this is how you generate the same program with Gizmo 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Gizmo gizmo = Gizmo.create(ClassOutput.fileWriter(Path.of("target")));
gizmo.class_("com.example.Hello", cc -&gt; {
    cc.defaultConstructor();

    cc.staticMethod("main", mc -&gt; {
        ParamVar args = mc.parameter("args", String[].class);
        mc.body(bc -&gt; {
            bc.printf("Hello, World!%n");
            bc.return_();
        });
    });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are obvious surface-level differences in the API structure, but there are also deeper differences.
I&#8217;ll mention one here just as an example: the way Gizmo represents and maintains values has changed significantly.</p>
</div>
<div class="paragraph">
<p>Gizmo 1 has the venerable <code>ResultHandle</code> class, which is almost always a local variable (even though the API doesn&#8217;t let you assign to it; you have to use <code>AssignableResultHandle</code> for that).
This means you don&#8217;t really have to care about order in which you produce values or about using them multiple times&#8201;&#8212;&#8201;everything just works.
There&#8217;s obvious overhead though: for each use of the value, it needs to be loaded from the variable to the stack.</p>
</div>
<div class="paragraph">
<p>On the other hand, Gizmo 2 represents values as <code>Expr</code>s, which are <em>not</em> local variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Expr hello = bc.invokeVirtual(
        MethodDesc.of(String.class, "concat", String.class, String.class),
        Const.of("Hello"), Const.of(" World"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>An <code>Expr</code> is a value that is, at the time of its creation, on top of the stack, nothing more.
This means the order of producing values suddenly matters and they may not be reused!
To create a local variable (<code>LocalVar</code>) out of an expression, you have to explicitly call a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LocalVar hello = bc.localVar("hello", bc.invokeVirtual(
        MethodDesc.of(String.class, "concat", String.class, String.class),
        Const.of("Hello"), Const.of(" World")));</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are a lot more concepts not shown in these examples, which you can read about in the documentation.
The Gizmo 1 documentation is available at <a href="https://github.com/quarkusio/gizmo/blob/1.x/USAGE.adoc" class="bare">https://github.com/quarkusio/gizmo/blob/1.x/USAGE.adoc</a>, while the Gizmo 2 documentation (not yet complete) is available at <a href="https://github.com/quarkusio/gizmo/blob/main/MANUAL.adoc" class="bare">https://github.com/quarkusio/gizmo/blob/main/MANUAL.adoc</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arc"><a class="anchor" href="#arc"></a>ArC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Back to ArC.
Today, all bytecode generation in ArC is based on Gizmo 2 (if you want the gory details, look at <a href="https://github.com/quarkusio/quarkus/pull/50708">this pull request</a>), and it&#8217;s going to be released in Quarkus 3.30.</p>
</div>
<div class="paragraph">
<p>ArC has several public APIs that expose Gizmo types.
This means that the rewrite to Gizmo 2 includes breaking changes.
These are unlikely to impact users&#8201;&#8212;&#8201;in fact, the number of affected places in the Quarkus core repository is surprisingly small.
However, in the interest of transparency, here&#8217;s a full list of API breakages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>BeanConfiguratorBase</code>: methods</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">THIS creator(Consumer&lt;MethodCreator&gt; methodCreatorConsumer)
THIS destroyer(Consumer&lt;MethodCreator&gt; methodCreatorConsumer)
THIS checkActive(Consumer&lt;MethodCreator&gt; methodCreatorConsumer)</code></pre>
</div>
</div>
<div class="paragraph">
<p>were changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">THIS creator(Consumer&lt;CreateGeneration&gt; creatorConsumer)
THIS destroyer(Consumer&lt;DestroyGeneration&gt; destroyerConsumer)
THIS checkActive(Consumer&lt;CheckActiveGeneration&gt; checkActiveConsumer)</code></pre>
</div>
</div>
</li>
<li>
<p><code>ObserverConfigurator</code>: method</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ObserverConfigurator notify(Consumer&lt;MethodCreator&gt; notifyConsumer)</code></pre>
</div>
</div>
<div class="paragraph">
<p>was changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ObserverConfigurator notify(Consumer&lt;NotifyGeneration&gt; notifyConsumer)</code></pre>
</div>
</div>
</li>
<li>
<p><code>ContextConfigurator</code>: method</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ContextConfigurator creator(Function&lt;MethodCreator, ResultHandle&gt; creator)</code></pre>
</div>
</div>
<div class="paragraph">
<p>was changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ContextConfigurator creator(Function&lt;CreateGeneration, Expr&gt; creator)</code></pre>
</div>
</div>
</li>
<li>
<p><code>BeanProcessor.Builder</code>: method</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Builder addSuppressConditionGenerator(Function&lt;BeanInfo, Consumer&lt;BytecodeCreator&gt;&gt; generator)</code></pre>
</div>
</div>
<div class="paragraph">
<p>was changed to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Builder addSuppressConditionGenerator(Function&lt;BeanInfo, Consumer&lt;BlockCreator&gt;&gt; generator)</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Noone is expected to be affected by the last change, because that is in the ArC integration API, which should only be used by the Quarkus ArC extension.
The other changes are in APIs that could legitimately be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>synthetic beans</p>
</li>
<li>
<p>synthetic observers</p>
</li>
<li>
<p>custom contexts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As you see, all these changes are similar.
The Gizmo 1 variant takes a <code>Consumer&lt;MethodCreator&gt;</code> (or, in one case, a <code>Function&lt;MethodCreator, ResultHandle&gt;</code>).
The <code>MethodCreator</code> must be used to create the bytecode of the corresponding method:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BeanConfiguratorBase.creator()</code>: create an instance of the synthetic bean</p>
</li>
<li>
<p><code>BeanConfiguratorBase.destroyer()</code>: destroy an instance of the synthetic bean</p>
</li>
<li>
<p><code>BeanConfiguratorBase.checkActive()</code>: check if the synthetic bean is currently active (niche use case, most likely unused outside of the core Quarkus repository)</p>
</li>
<li>
<p><code>ObserverConfigurator.notify()</code>: notify the synthetic observer</p>
</li>
<li>
<p><code>ContextConfigurator.creator()</code>: create a context object of the custom context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Gizmo 2 variants no longer take a Gizmo object.
Instead, they take an ArC interface that provides access to all the necessary Gizmo objects&#8201;&#8212;&#8201;because more than 1 is necessary.</p>
</div>
<div class="paragraph">
<p>As mentioned above, most extensions should not be affected.
This is because higher-level APIs exist that do not expose bytecode generation; either they use classes that implement interfaces, or they accept results of recorder methods.
These higher-level APIs didn&#8217;t change at all.
However, using the lower-level APIs is still permitted, so let&#8217;s take a look at how we&#8217;d migrate a simple synthetic bean creation function from Gizmo 1 to Gizmo 2.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a simple synthetic bean registered using <code>SyntheticBeanBuildItem</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SyntheticBeanBuildItem.configure(String.class)
        .scope(Singleton.class)
        .param("message", "Hello, World!")
        .creator(mc -&gt; {
            ResultHandle params = mc.readInstanceField(
                    FieldDescriptor.of(mc.getMethodDescriptor().getDeclaringClass(),
                            "params", Map.class),
                    mc.getThis());
            ResultHandle message = Gizmo.mapOperations(mc).on(params).get(mc.load("message"));
            ResultHandle instance = mc.invokeVirtualMethod(
                    MethodDescriptor.ofMethod(String.class,
                            "concat", String.class, String.class),
                    mc.load("Message: "), message);
            mc.returnValue(instance);
        })
        .done();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Consumer</code> here accepts a <code>MethodCreator</code> that provides direct access to its parameters as well as to the class, from which one can read the fields.</p>
</div>
<div class="paragraph">
<p>After the rewrite to Gizmo 2, the code looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SyntheticBeanBuildItem.configure(String.class)
        .scope(Singleton.class)
        .param("message", "Hello, World!")
        .creator(cg -&gt; {
            BlockCreator bc = cg.createMethod();

            Var params = cg.paramsMap();
            Expr message = bc.withMap(params).get(Const.of("message"));
            Expr instance = bc.invokeVirtual(
                    MethodDesc.of(String.class,
                            "concat", String.class, String.class),
                    Const.of("Message: "), message);
            bc.return_(instance);
        })
        .done();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Consumer</code> accepts <code>CreateGeneration</code> that provides access to the <code>BlockCreator</code> to generate bytecode (<code>createMethod()</code>) and a number of necessary variables.
In this example, we use the <code>paramsMap()</code> method to acccess the parameter map.</p>
</div>
<div class="paragraph">
<p>The other APIs have changed in the same manner: instead of <code>MethodCreator</code>, the <code>Consumer</code> accepts <code>*Generation</code> which provides access to the <code>BlockCreator</code> and the necessary variables.</p>
</div>
<div class="paragraph">
<p>One might ask: why does the new API provide access to a <code>BlockCreator</code> and not to a <code>MethodCreator</code>, which clearly still exists in Gizmo 2?
And it would be a good question.
The answer, as it turns out, is efficiency.
The previous API that did provide access to a <code>MethodCreator</code> required generating a whole new method that would only host the user-generated code.
The new API that <em>doesn&#8217;t</em> provide access to a <code>MethodCreator</code> allows embedding the user-generated code into a method that contains other, ArC-generated code.
Thus, the number of methods in the generated classes is smaller and the generated code is more compact.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gizmo 2 is an evolution (some might say <em>revolution</em>) of Gizmo 1, the simplified bytecode generation library used by all of Quarkus.
ArC is a heavy user of Gizmo and it just recently migrated to Gizmo 2.
There are some breaking changes that might affect Quarkus extensions (not applications).</p>
</div>
<div class="paragraph">
<p>In this post, we reviewed the API breakages and showed a simple migration scenario.
Hopefully, your extensions are not affected, because they use the higher-level APIs, but if they are, you&#8217;ll need to migrate as well.
Then, your extension will only be compatible with Quarkus 3.30 and above; it will stop working with previous versions.
Plan accordingly.</p>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/arc-migrates-to-gizmo2/&title=ArC migrates to Gizmo 2" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa-brands fa-linkedin fa-xl"></i>
  </a>
  <a class="share-x" href="https://x.com/intent/tweet?text=ArC migrates to Gizmo 2&url=https://quarkus.io/blog/arc-migrates-to-gizmo2/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on X">
    <i class="fa-brands fa-square-x-twitter fa-xl"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/arc-migrates-to-gizmo2/" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa-brands fa-square-facebook fa-xl"></i>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/arc-migrates-to-gizmo2/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <i class="fa-brands fa-square-reddit fa-xl"></i>
  </a>
  <a class="share-email" href="mailto:?subject=ArC migrates to Gizmo 2&amp;body=ArC migrates to Gizmo 2 https://quarkus.io/blog/arc-migrates-to-gizmo2/" title="Share via Email" >
    <i class="fa-solid fa-envelope fa-xl"></i>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
  <script src="https://giscus.app/client.js"
        data-repo="quarkusio/quarkus"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI="
        data-category="Quarkus Blog/Website"
        data-category-id="DIC_kwDOCFbutM4CAFFV"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="https://github.com/commonhaus/artwork/tree/main/projects/quarkus" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">







<head>
  <title>Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://embed.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/live-diff-and-update-using-idea/" />
  <meta property="og:title" content="Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/live-diff-and-update-using-idea/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/blog/live-diff-and-update-using-idea/" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/blog/live-diff-and-update-using-idea/" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/blog/live-diff-and-update-using-idea/" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/blog/live-diff-and-update-using-idea/" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/blog/live-diff-and-update-using-idea/" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="post">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/continuum" class="">VERSATILITY</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="">DOCUMENTATION</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="active">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/blog/live-diff-and-update-using-idea/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/blog/live-diff-and-update-using-idea/">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/blog/live-diff-and-update-using-idea/">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/blog/live-diff-and-update-using-idea/">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/blog/live-diff-and-update-using-idea/">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="full-width-breadcrumb-bg align-self">
  <div class="width-12-12">
      <p class="returnlink"><a href="/blog">Blog</a> <i class="fas fa-chevron-right"></i> Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA</p>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <div class="post-date">
          September 28, 2023 
          
            <span class="tags"><a href="/blog/tag/development-tips">#development-tips</a><a href="/blog/tag/intellij">#intellij</a><a href="/blog/tag/openshift">#openshift</a></span>
          
        </div>
        <h1 class="post-title">Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            
            
              <img class="headshot" src="https://www.gravatar.com/avatar/7c51d8659ec615ece71062bbe956470d">
            
            <p class="byline">By <a href="/author/adietish">Andre Dietisheim</a></p>
          </div>
          <div class="width-12-12">
              <div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>OpenShift CLI, oc: <a href="https://docs.openshift.com/container-platform/4.13/cli_reference/openshift_cli/getting-started-cli.html">installation instructions</a></p>
</li>
<li>
<p>Kubernetes by Red Hat, Kubernetes Plugin for JetBrains IDEA <a href="https://plugins.jetbrains.com/plugin/15921-kubernetes-by-red-hat">Marketplace</a></p>
</li>
<li>
<p>Quarkus CLI, Quarkus: <a href="https://quarkus.io/guides/cli-tooling">Installation Instructions</a></p>
</li>
<li>
<p>Optional: Source code for this blog post: <a href="https://github.com/adietish/openshift-quickstart">https://github.com/adietish/openshift-quickstart</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="intellij-kubernetes-plugin"><a class="anchor" href="#intellij-kubernetes-plugin"></a>IntelliJ Kubernetes Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This shows you how the <strong>Kubernetes Plugin for Jetbrains IDEA</strong> is a great companion when deploying quarkus apps to OpenShift. To install the plugin in Jetbrains IDEA, navigate to the Settings, go to the Plugins section, and search for "Kubernetes by Red Hat" to initiate the installation process.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/install-intellij-kubernetes.png" alt="Install Kubernetes by Red Hat" width="600" height="401"></span></p>
</div>
<div class="paragraph">
<p>By utilizing the plugin, you will have an extra tool window positioned on the left side of your IDEA interface. This window displays the Kubernetes clusters specified in your Kubernetes configuration located at <em>~/.kube/config</em>. If you haven&#8217;t defined any clusters yet, the list will be empty.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/toolwindow.png" alt="Kubernetes by Red Hat Tool Window" width="600" height="172"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prepare-your-quarkus-application-for-openshift"><a class="anchor" href="#prepare-your-quarkus-application-for-openshift"></a>Prepare your Quarkus application for OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With the Kubernetes plugin for IDEA successfully installed, we can now proceed to prepare our source code for deployment to OpenShift. You have the option to either retrieve the source from <a href="https://github.com/adietish/openshift-quickstart">GitHub</a>, utilize your existing source code, or create a new Quarkus application from scratch.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Assuming that you have your own source, we need to prepare it for deployment on OpenShift. Quarkus offers extensions that do most of the job for you. We need the <a href="https://quarkus.io/guides/deploying-to-openshift">OpenShift extension</a> and the <a href="https://quarkus.io/guides/container-image#jib">jib extension</a>. You can enable them using the Quarkus command line or add them manually to your pom file.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-openshift&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-container-image-jib&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>If you want to generate a Quarkus app from scratch you can use the <a href="https://quarkus.io/guides/cli-tooling">quarkus</a> command line utility to configure those for you.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus create app org.acme:openshift-quickstart \
--extension='resteasy-reactive,openshift,quarkus-container-image-jib'</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Now that you have your source ready, you can open it in Jetbrains IDEA and get on with the steps towards deployment.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publish-the-image-to-docker-hub"><a class="anchor" href="#publish-the-image-to-docker-hub"></a>Publish the Image to Docker Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The project generated by the Quarkus command line tool includes a Dockerfile located at <em>src/main/docker/Dockerfile.jvm</em>. If you decide to use your own source code, you can easily copy the Dockerfile from the provided GitHub repository containing the sample source code.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/dockerfile.png" alt="Dockerfile" width="600" height="222"></span></p>
</div>
<div class="paragraph">
<p>The Dockerfile is utilized to generate a Docker image, which is used by OpenShift (or Kubernetes) to run your application. In order for OpenShift to access and utilize the image, it needs to be stored in a Docker registry.<br></p>
</div>
<div class="paragraph">
<p>While most OpenShift or Kubernetes installations provide their own Docker registry, the Red Hat developer sandbox does not. Consequently, we will employ Docker Hub for this purpose. To accomplish this, we will configure the build process to push the image to Docker Hub. Although these settings can be specified via the command line, for the sake of simplicity, we will utilize the <em>src/main/resources/application.properties</em> file.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Hint:</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">We are pushing the docker image to Docker Hub. We thus need to provide our account ID with quarkus.container-image.group</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.container-image.build=true
quarkus.openshift.jvm-dockerfile=src/main/Dockerfile.jvm
quarkus.container-image.builder=jib
quarkus.container-image.push=true
quarkus.container-image.group=&lt;your Docker Hub account&gt; # use your Docker Hub account
quarkus.container-image.name=openshift-quickstart
quarkus.openshift.route.expose=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>First we instruct the maven build to build the Docker image.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.container-image.build=true</pre>
</div>
</div>
<div class="paragraph">
<p>Then we point the build to our Docker file.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.openshift.jvm-dockerfile=src/main/Dockerfile.jvm</pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore we tell the maven to use the jib extension to create the Docker image.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.container-image.builder=jib</pre>
</div>
</div>
<div class="paragraph">
<p>We also instruct the build to push the Docker image to a registry. Use your Docker Hub account for this setting.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.container-image.push=true</pre>
</div>
</div>
<div class="paragraph">
<p>We hand it our account on Docker hub.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.container-image.group=&lt;your Docker Hub account&gt; # use your Docker Hub account</pre>
</div>
</div>
<div class="paragraph">
<p>We configure the name of the resulting Docker image for easy identification.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.container-image.name=openshift-quickstart</pre>
</div>
</div>
<div class="paragraph">
<p>Finally we instruct the build to create a Route so that our application is accessible from the internet.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>quarkus.openshift.route.expose=true</pre>
</div>
</div>
<div class="paragraph">
<p>With the <strong>build configuration successfully set up</strong>, we are now prepared to execute the build process. Simply running the Maven package command is all that&#8217;s required to package the application into a JAR file, create a Docker image with the JAR, and push the image to Docker Hub. To initiate the build, locate the Maven toolbox on the right edge of your IDEA and <strong><em>double-click on the package command.</em></strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/maven-package.png" alt="mvn package" width="600" height="386"></span></p>
</div>
<div class="paragraph">
<p>Alternatively you can launch maven on the command line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./mvnw clean package</pre>
</div>
</div>
<div class="paragraph">
<p>During the build process, you will observe the execution of all the aforementioned steps in the output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[INFO] [io.quarkus.container.image.jib.deployment.JibProcessor] LogEvent [level=INFO, message=trying docker-credential-desktop for registry.hub.docker.com]
[INFO] [io.quarkus.container.image.jib.deployment.JibProcessor] Using base image with digest: sha256:f921cf1f9147e4b306908f3bcb61dd215b4a51970f8db560ede02ee6a492fa99
[INFO] [io.quarkus.container.image.jib.deployment.JibProcessor] LogEvent [level=LIFECYCLE, message=Using credentials from Docker config (/Users/andredietisheim/.docker/config.json) for adietish/openshift-quickstart:1.0.0-SNAPSHOT]
[INFO] [io.quarkus.container.image.jib.deployment.JibProcessor] Container entrypoint set to [java, -Djava.util.logging.manager=org.jboss.logmanager.LogManager, -jar, quarkus-run.jar]
[INFO] [io.quarkus.container.image.jib.deployment.JibProcessor] Pushed container image adietish/openshift-quickstart:1.0.0-SNAPSHOT (sha256:bfba9dd104b363e828a61bde800cd2299fae8b65fc9a5ffcd4c322061b3a8c0e)</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="get-your-free-red-hat-developer-sandbox"><a class="anchor" href="#get-your-free-red-hat-developer-sandbox"></a>Get your free Red Hat Developer Sandbox</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, let&#8217;s focus on the cluster to which we intend to deploy. Red Hat provides a free OpenShift cluster for individuals interested in exploring its capabilities. To obtain your own cluster, simply visit <a href="https://developers.redhat.com/developer-sandbox">https://developers.redhat.com/developer-sandbox</a> and request an instance. Once you complete a quick and straightforward registration process, you can start the cluster and access its web console. In the console, your username will be visible in the upper right corner of the header. Clicking on it will display a menu with an option labeled "<strong><em>Copy login command</em></strong>." By selecting this option, you will configure the Red Hat Developer Sandbox as your current cluster and store a locally accessible token for authentication purposes.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/copy-login-command.png" alt="Copy Login Command" width="400" height="374"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/login-command.png" alt="Login command" width="624" height="62"></span></p>
</div>
<div class="paragraph">
<p>Now copy, paste and run this command in your terminal shell.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc login --token=sha256~XXXXXXXXXXXXXXXX --server=https://api.sandbox-m3.1530.p1.openshiftapps.com:6443</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Hint:</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you already have a Red Hat Developer Sandbox, chances are that your token is expired. You would notice this when listing the projects isn’t possible.<br>
To get a new token, you proceed as shown above. You copy the login command and run it in your shell.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="intellij-kubernetes-is-your-friend"><a class="anchor" href="#intellij-kubernetes-is-your-friend"></a>IntelliJ Kubernetes is your friend</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In IntelliJ, you can navigate to the Kubernetes tool window, where you will find the Red Hat Developer Sandbox set as the active cluster. By expanding the cluster, you can explore various resource categories that reveal the existing resources within your cluster. For example, you can view your current project or namespace. It&#8217;s important to note that any action performed through the plugin will be executed within the context of this project and the changes get visible immediately. There’s no need for a manual refresh.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/resource-tree.png" alt="Resource tree" width="600" height="448"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-the-cluster-resources"><a class="anchor" href="#create-the-cluster-resources"></a>Create the Cluster Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Upon executing the Maven build, a file is generated in the <em>target/kubernetes</em> directory. This file encompasses the OpenShift resources necessary for deploying your application. This is done by the Quarkus Kubernetes Extension. The Intelij plugin works with this file so you can use it both for automation but also via your IDE.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/openshift-resources.png" alt="OpenShift resources" width="600" height="374"></span></p>
</div>
<div class="paragraph">
<p>If you open this file, you can have a glimpse on how your application is deployed. The file consists of the following OpenShift resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DeploymentConfig</p>
</li>
<li>
<p>ImageStream</p>
</li>
<li>
<p>Service</p>
</li>
<li>
<p>Route</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong>DeploymentConfig</strong> will be responsible for creating a <strong>Pod</strong>, which serves as an environment for running containers that host your application. These containers will utilize the Docker image you have built and published on Docker Hub.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: DeploymentConfig
...
  image: openshift-quickstart:1.0.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>To make the Docker image available to the cluster, an <strong>ImageStream</strong> is utilized. This ImageStream is configured to reference your image stored on Docker Hub.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: ImageStream
...
  dockerImageRepository: docker.io/adietish/openshift-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>To expose your application within the cluster, a <strong>Service</strong> is employed. This Service is responsible for mapping the container ports to ports that are accessible internally within the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: Service
...
- name: https
  port: 443
  protocol: TCP
  targetPort: 8443</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, a <strong>Route</strong> is utilized to expose the Service to the internet, making your application accessible from external sources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: Route
...
port:
  targetPort: http
to:
  kind: Service
  name: openshift-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>To deploy your application, simply create these resources on the cluster. The editor will prompt you to push the file to the cluster and generate the necessary resources. Alternatively, you can use the <strong>push</strong> icon that’s the first icon to the left in the toolbar.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/push-to-create.png" alt="push to create" width="800" height="124"></span></p>
</div>
<div class="paragraph">
<p>The resource tree in the Kubernetes toolkit window is highly dynamic, continuously reflecting the presence and absence of cluster resources. When you push the resource file, the corresponding resources are created on the cluster and instantly appear in the resource tree. The specific resources we are currently interacting with can be found under the <strong>Workloads</strong> and <strong>Network</strong> categories in the resource tree.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/new-resources.png" alt="new resources" width="600" height="686"></span></p>
</div>
<div class="paragraph">
<p>Pods in the resource tree are represented by icons displaying either a <strong>red</strong> or <strong>green</strong> dot. A green dot signifies that the pod is currently running, while a red dot indicates that the pod is either in the process of being initialized or terminated. By expanding a pod in the tree, additional information is revealed, including its internal cluster IP and the status of its container(s). In the provided screenshot, the pod consists of a single container that is currently running.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="browse-the-application"><a class="anchor" href="#browse-the-application"></a>Browse the Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to access the application through a browser, we require its URL. In our configuration, we let OpenShift generate the host name for us. This was accomplished by configuring the <strong>Route</strong> to have an empty or nonexistent host value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: Route
...
  host: ""</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hence, it is necessary for us to determine the hostname generated by the cluster. To achieve this, we can utilize the available <strong>Diff</strong> feature in the editor, which displays the disparities between the resources specified in our file and the resources that currently exist on the cluster.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/diff-action.png" alt="Diff action" width="710" height="102"></span></p>
</div>
<div class="paragraph">
<p>Clicking on the <strong>Diff</strong> action in the toolbar will open a split dialog. The left section of the dialog displays the local file, while the right section displays the resources that currently exist on the cluster. At this point, you can search for the host value and copy it once you locate it.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/diff-window.png" alt="Diff window" width="600" height="386"></span></p>
</div>
<div class="paragraph">
<p>You can now paste it into a browser see the Quarkus framework page that our application displays when queried. The page shows you that the app consists of a REST service at <strong>/hello</strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/quarkus-framework-page.png" alt="Quarkus framework page" width="600" height="261"></span></p>
</div>
<div class="paragraph">
<p>Click the hello-link and you can then see the response of this service.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/hello-from-resteasy.png" alt="Hello RESETEasy Reactive" width="624" height="62"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkus-please-log-everything"><a class="anchor" href="#quarkus-please-log-everything"></a>Quarkus, please log everything</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus framework logs any event that’s at least INFO. To change this, we can <a href="https://quarkus.io/guides/logging#runtime-configuration">configure</a> the property quarkus.log.level in application.properties. Alternatively one can set it by an <a href="https://quarkus.io/guides/config-reference#environment-variables">environment variable</a>. This is especially useful when you deploy to an OpenShift or Kubernetes cluster. In OpenShift the DeploymentConfig allows you to set the environment for its pods. In your openshift.yml file you will find an environment variable already. It sets the environment variable KUBERNETES_NAMESPACE to the name of your namespace. We can add our property and configure the quarkus logging level. Go to DeploymentConfig &gt; template &gt; spec &gt; containers &gt; env and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- name: QUARKUS_LOG_LEVEL
  value: ALL</code></pre>
</div>
</div>
<div class="paragraph">
<p>The editor continuously monitors your modifications and reminds you to push them once a resource has been changed. While you could typically proceed with pushing the changes to the cluster, we recommend deleting the existing <strong>DeploymentConfig</strong> first and then pushing the updated version. This is particularly important when modifying environment variables, as a "running" DeploymentConfig would not be affected by the changes, leading to pods without the updated environment variables. Therefore, use the "<strong>Delete</strong>" option available in the context menu of your DeploymentConfig.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/delete-deploymentconfig.png" alt="Delete Deployment Config"></span></p>
</div>
<div class="paragraph">
<p>The plugin then notifies you that the DeploymentConfig was successfully deleted.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/deploymentconfig-deleted.png" alt="Deployment Config Deleted" width="709" height="126"></span></p>
</div>
<div class="paragraph">
<p>The editor then prompts you to push and recreate it.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/push-to-create-deploymentconfig.png" alt="Push to create Deployment Config" width="800" height="123"></span></p>
</div>
<div class="paragraph">
<p>Deleting the existing DeploymentConfig terminated the existing pods. They disappeared from the resource tree. When you recreated it new Pods were created. These also reappeared as you were spawned. The tree is fully dynamic and reflects changes to the resources as they occur.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="follow-logs"><a class="anchor" href="#follow-logs"></a>Follow Logs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we told quarkus to log all we’d like to verify that our change is effective. We can pick <strong>Follow Log</strong> in the context menu of the new pod.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/follow-logs.png" alt="Follow Logs" width="806" height="338"></span></p>
</div>
<div class="paragraph">
<p>This shows the Log console in the lower part of your IDE. It prints the log entries as they are coming in.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/pod-logs.png" alt="Pod Logs" width="647" height="429"></span></p>
</div>
<div class="paragraph">
<p>You can see that the quarkus application is logging all events from FATAL to TRACE. A quarkus app by default only logs INFO and upwards. The environment variable that we added caused finer logging to happen.<br>
The log console is split in half. The right side shows the log while the left side shows the containers. Our pod only holds a single container and we therefore only see a single entry. A pod that consists of several containers would have these listed, init containers included. You could then have terminals to either one of these and switch between them by clicking on the listed containers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="terminal"><a class="anchor" href="#terminal"></a>Terminal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We can of course also verify in the terminal that the environment is set as defined in the DeploymentConfig. We can pick <strong>Terminal</strong> in the context menu of our pod for this sake.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/open-terminal-action.png" alt="Open Terminal Action" width="860" height="334"></span></p>
</div>
<div class="paragraph">
<p>At the command prompt we can then echo our environment variable and see the value that we configured in our resource file.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="/assets/images/posts/live-diff-and-update-using-idea/pod-terminal.png" alt="Pod Terminal" width="930" height="429"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this article, we have demonstrated the deployment process of a Quarkus application to an OpenShift cluster, specifically the free tier Red Hat Developer Sandbox. We have highlighted the usefulness of our <a href="https://plugins.jetbrains.com/plugin/15921-kubernetes-by-red-hat">Kubernetes Plugin for Jetbrains IDEA</a> in facilitating this task.</p>
</div>
<div class="paragraph">
<p>+
With the editor, you can effortlessly create and update the necessary resources for application deployment. The dynamic resource tree provides real-time visibility of these resources as they are created. By utilizing the diff feature in the editor, you can observe how the cluster manipulates your resources during creation, allowing you to identify important details such as the generated hostname. Lastly, we have showcased additional features of the plugin, including the ability to monitor application logs and access a terminal shell within the running container.</p>
</div>
<div class="paragraph">
<p>If you enjoyed this blog post and tried our plugin, please let us know about bugs and missing features at our <a href="http://github.com/redhat-developer/intellij-kubernetes/issues/">GitHub page</a>. We’d love to hear from you ❤️</p>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/live-diff-and-update-using-idea/&title=Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa-brands fa-linkedin fa-xl"></i>
  </a>
  <a class="share-x" href="https://x.com/intent/tweet?text=Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA&url=https://quarkus.io/blog/live-diff-and-update-using-idea/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on X">
    <i class="fa-brands fa-square-x-twitter fa-xl"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/live-diff-and-update-using-idea/" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa-brands fa-square-facebook fa-xl"></i>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/live-diff-and-update-using-idea/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <i class="fa-brands fa-square-reddit fa-xl"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA&amp;body=Live diff and update quarkus deployments in OpenShift using Jetbrains IDEA https://quarkus.io/blog/live-diff-and-update-using-idea/" title="Share via Email" >
    <i class="fa-solid fa-envelope fa-xl"></i>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
  <script src="https://giscus.app/client.js"
        data-repo="quarkusio/quarkus"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI="
        data-category="Quarkus Blog/Website"
        data-category-id="DIC_kwDOCFbutM4CAFFV"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

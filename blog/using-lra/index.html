<!DOCTYPE html>
<html lang="en">







<head>
  <title>An Extension for Long Running Activities - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/using-lra/" />
  <meta property="og:title" content="An Extension for Long Running Activities" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/using-lra/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/blog/using-lra/" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/blog/using-lra/" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/blog/using-lra/" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/blog/using-lra/" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/blog/using-lra/" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="post">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="active">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/blog/using-lra/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/blog/using-lra/">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/blog/using-lra/">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/blog/using-lra/">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/blog/using-lra/">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="full-width-breadcrumb-bg align-self">
  <div class="width-12-12">
      <p class="returnlink"><a href="/blog">Blog</a> <i class="fas fa-chevron-right"></i> An Extension for Long Running Activities</p>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <div class="post-date">
          September 01, 2021 
          
            <span class="tags"><a href="/blog/tag/extension">#extension</a></span>
          
        </div>
        <h1 class="post-title">An Extension for Long Running Activities</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            
            
            <p class="byline">By <a href="/author/mmusgrov">Michael Musgrove</a></p>
          </div>
          <div class="width-12-12">
              <div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus LRA extension is useful for building JAX-RS services that wish to definitively agree when an interaction has finished, with either a successful outcome or an unsuccessful one.
In the successful case, all participants can clean up in the knowledge that all other services will do so as well. Conversely, in the unsuccessful case, participants know that each other will compensate for any actions performed during the interaction. This feature means that participating services can reach a consensus and achieve an atomic outcome.</p>
</div>
<div class="paragraph">
<p>We call the service interaction an LRA, short for Long Running Action. An LRA has specific properties and guarantees that aid in the construction of reliable service interactions. Each action is assigned a unique identifier (referred to as the LRA context) so that it can be distinguished from other LRAs.</p>
</div>
<div class="paragraph">
<p>Services start an LRA (or join an existing one) by marking a JAX-RS method with an <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0/apidocs/org/eclipse/microprofile/lra/annotation/ws/rs/LRA.html">@LRA annotation</a>. When such a method is invoked the system will start the action and make its identifier available as a JAX-RS header called "Long-Running-Action". If the body of the method performs any JAX-RS invocations the header is automatically added to outgoing requests. In this way the target services can join in with the interaction (if they are also annotated with the <code>@LRA</code> annotation).</p>
</div>
<div class="paragraph">
<p>Any work performed by a method annotated in this way should be "compensatable" in the sense that if some service "cancels" the LRA then the service will be reliably notified that it should compensate for any work that it did. Each service is responsible for interpreting the notion of what it means to compensate, the only requirement is that it responds <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0/apidocs/org/eclipse/microprofile/lra/annotation/ParticipantStatus.html">appropriately</a> when it is notified that it should compensate. The service indicates how it should be notified by annotating one of its method with an <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0/apidocs/org/eclipse/microprofile/lra/annotation/Compensate.html">@Compensate</a> annotation. Refer to the javadoc for the <code>@LRA</code> annotation for the details of how to control the outcome of an LRA.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The extension provides an implementation of the <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0-M1/microprofile-lra-spec.html">MicroProfile LRA specification</a> and its associated
 <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0/apidocs/index.html?org/eclipse/microprofile/lra/annotation/ws/rs/LRA.html">annotations</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lra-coordinators"><a class="anchor" href="#lra-coordinators"></a>LRA coordinators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>narayana-lra</code> extension requires the presence of a running coordinator in the environment. Coordinators can be obtained from <code><a href="https://quay.io/repository/jbosstm/lra-coordinator" class="bare">https://quay.io/repository/jbosstm/lra-coordinator</a></code>
or you can build your own coordinator using a maven pom that includes the appropriate dependencies. For the purpose of this blog we&#8217;ll show how to create one from scratch using the <code>quarkus-maven-plugin</code>.
There is some extra information about configuring the coordinator in one of the <a href="https://jbossts.blogspot.com/2021/07/narayana-lra-update.html">narayana blogs</a>.</p>
</div>
<div class="paragraph">
<p>Since the coordinator is just a JAX-RS resource we can build one using quarkus, adding the <code>resteasy-jackson</code> and <code>rest-client</code> extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mvn io.quarkus:quarkus-maven-plugin:2.2.1.Final:create \
      -DprojectGroupId=org.acme \
      -DprojectArtifactId=narayana-lra-coordinator \
      -Dextensions="resteasy-jackson,rest-client"
$ cd narayana-lra-coordinator/
$ rm -rf src</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that we removed the generated src directory because we just need the quarkus framework for running the coordinator.</p>
</div>
<div class="paragraph">
<p>Update the pom.xml file to add a dependency on the narayana coordinator implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.narayana.rts&lt;/groupId&gt;
      &lt;artifactId&gt;lra-coordinator-jar&lt;/artifactId&gt;
      &lt;version&gt;5.12.0.Final&lt;/version&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now build it and run it in the background:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./mvnw clean package
$ java -Dquarkus.http.port=50000 -jar target/quarkus-app/quarkus-run.jar &amp;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we are running the coordinator on the default port used by the <code>narayana-lra</code> quarkus extension, namely <code>50000</code>.
You can verify that the coordinator is running okay by listing the current LRAs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl http://localhost:50000/lra-coordinator
[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This snippet shows the request returning an empty json array.</p>
</div>
<div class="paragraph">
<p>We shall leave the coordinator running (on the default port) while we develop and test services that use LRAs.
Towards the end of article we will show how to embed coordinators with services
(NOTE: you cannot use this approach to run coordinators in native mode, a future extension will be provided to support this requirement).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jvm-mode"><a class="anchor" href="#jvm-mode"></a>JVM mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build a JAX-RS application with LRA support add the dependency <code>io.quarkus:quarkus-narayana-lra</code> to your application&#8217;s pom. This will add JAX-RS support and will also make the LRA annotations available when developing your services, it also registers a JAX-RS filter that automatically manages the participation of your services in LRAs.</p>
</div>
<div class="paragraph">
<p>As noted above, the guarantees (of eventual consistency) required by the <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0-M1/microprofile-lra-spec.html">LRA specification</a> rely on the presence of a JAX-RS application that coordinates the services participating in the LRA. This component must be present when starting the interaction, when joining the interaction and when ending the interaction. If the coordinator becomes unavailable it should be restarted. Similarly, services participating in the LRA must be available during the end phase; the system will continue retrying a service until it indicates that it is finished with the LRA, and once a service has indicated successful compensation (or completion) it no longer takes part in the interaction (although it can register for a reliable notification that all services have finished compensating or completing). Although there can be many coordinators, at the time of writing, only one can manage a particular LRA.</p>
</div>
<div class="sect2">
<h3 id="step-1-create-the-application"><a class="anchor" href="#step-1-create-the-application"></a>Step 1: Create the application:</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mvn io.quarkus:quarkus-maven-plugin:2.2.1.Final:create \
      -DprojectGroupId=org.acme \
      -DprojectArtifactId=narayana-lra-quickstart \
      -Dextensions="narayana-lra"
$ cd lra-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if the coordinator is running on a port different from the default, i.e. <code>50000</code>, then you will need to update the application config file (<code>src/main/resources/application.properties</code>) and specify the host and port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">quarkus.lra.coordinator-url=http://localhost:&lt;port&gt;/lra-coordinator</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify that the generated application still works after these changes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./mvnw clean package</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-2-add-lra-support"><a class="anchor" href="#step-2-add-lra-support"></a>Step 2: Add LRA support</h3>
<div class="paragraph">
<p>Now update the generated application so that the hello method will execute in the context of a Long Running Action:</p>
</div>
<div class="paragraph">
<p>Open the file <code>src/main/java/org/acme/GreetingResource.java</code> in an editor and annotate the <code>hello</code> method with an @LRA annotation (also inject the LRA context into the method using the JAX-RS <code>javax.ws.rs.HeaderParam</code> annotation). In addition, add two callback methods which will be called when the LRA is closed or cancelled.</p>
</div>
<div class="paragraph">
<p>The end result, including the imports, should look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

// Step 2a: Add imports for reading the LRA context and for using LRA annotations
import javax.ws.rs.HeaderParam;
import javax.ws.rs.PUT;
import javax.ws.rs.core.Response;
import java.net.URI;
import org.eclipse.microprofile.lra.annotation.ws.rs.LRA;
import org.eclipse.microprofile.lra.annotation.Compensate;
import org.eclipse.microprofile.lra.annotation.Complete;
import static org.eclipse.microprofile.lra.annotation.ws.rs.LRA.LRA_HTTP_CONTEXT_HEADER;

@Path("/hello")
public class GreetingResource {

    @GET
    @LRA // Step 2b: The method should run within an LRA
    @Produces(MediaType.TEXT_PLAIN)
    public String hello(@HeaderParam(LRA_HTTP_CONTEXT_HEADER) URI lraId /* Step 2c the context is useful for associating compensation logic */) {
        System.out.printf("hello with context %s%n", lraId);
        return "Hello RESTEasy";
    }

    // Step 2d: There must be a method to compensate for the action if it's cancelled
    @PUT
    @Path("compensate")
    @Compensate
    public Response compensateWork(@HeaderParam(LRA_HTTP_CONTEXT_HEADER) URI lraId) {
        System.out.printf("compensating %s%n", lraId);
        return Response.ok(lraId.toASCIIString()).build();
    }

    // Step 2e: An optional callback notifying that the LRA is closing
    @PUT
    @Path("complete")
    @Complete
    public Response completeWork(@HeaderParam(LRA_HTTP_CONTEXT_HEADER) URI lraId) {
        System.out.printf("completing %s%n", lraId);
        return Response.ok(lraId.toASCIIString()).build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With these changes, if you build the application and then invoke the <code>hello</code> method then an LRA will be started before the method is entered and ended after it finishes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./mvnw clean package
$ java -jar target/quarkus-app/quarkus-run.jar &amp;
[1] 2389948
$ curl http://localhost:8080/hello
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_8c1f_612a6e9b_a
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_8c1f_612a6e9b_a
Hello RESTEasy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure that the coordinator is still running otherwise you will see an error message similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">2021-08-11 14:27:45,779 WARN  [io.nar.lra] (executor-thread-0) LRA025025: Unable to process LRA annotations: -3: StartFailed (start LRA client request timed out, try again later) ()'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the <code>System.out</code> messages indicating that the <code>@Complete</code> callback was invoked.
Now kill the java process in preparation for the next step (the process id was printed on the console, in my example the pid is 2389948, so I typed <code>kill 2389948</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="step-3-extending-the-lra-across-two-service-methods"><a class="anchor" href="#step-3-extending-the-lra-across-two-service-methods"></a>Step 3: Extending the LRA across two service methods</h3>
<div class="paragraph">
<p>In this step we will start an LRA but not end it when the method finishes by using <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0/apidocs/org/eclipse/microprofile/lra/annotation/ws/rs/LRA.html#end--">the end element of the LRA annotation</a>.</p>
</div>
<div class="paragraph">
<p>Define a second business method to do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @GET
    @Path("/start")
    @LRA(end = false) // Step 3a: The method should run within an LRA
    @Produces(MediaType.TEXT_PLAIN)
    public String start(@HeaderParam(LRA_HTTP_CONTEXT_HEADER) URI lraId) {
        System.out.printf("hello with context %s%n", lraId);
        return lraId.toASCIIString();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The only difference from the hello method is the <code>@Path</code> and <code>@LRA</code> annotations and that it returns the LRA id
back to the caller. We will need this to set the header when we send a request to the hello method to finish
the LRA (note that this header is also available in one of the JAX-RS response headers).</p>
</div>
<div class="paragraph">
<p>Kill the existing instance (<code>kill 2389948</code>) and rebuild the application (<code>./mvnw package -DskipTests</code>) and start it running in the background:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar target/quarkus-app/quarkus-run.jar &amp;
[1] 2495275</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start an LRA using <code>curl</code> to send a request the new method we have just added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ LRA_URL=$(curl http://localhost:8080/hello/start)
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a909_611a92ea_2</code></pre>
</div>
</div>
<div class="paragraph">
<p>The start method was coded to return the LRA id and I have used <code>bash</code> to save it into an environment variable called <code>LRA_URL</code>.
The original hello method used the default value of the <code>end</code> element of the <code>@LRA</code> annotation so if we call that method with an LRA context then the LRA will automatically close when the method finishes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl --header "Long-Running-Action: $LRA_URL" http://localhost:8080/hello
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a909_611a92ea_2
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a909_611a92ea_2
Hello RESTEasy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the <code>completeWork</code> method was invoked.</p>
</div>
</div>
<div class="sect2">
<h3 id="step-4-start-an-lra-in-one-microservice-and-end-it-in-a-different-microservice"><a class="anchor" href="#step-4-start-an-lra-in-one-microservice-and-end-it-in-a-different-microservice"></a>Step 4: Start an LRA in one microservice and end it in a different microservice</h3>
<div class="paragraph">
<p>This step shows how two different microservices can coordinate their activities even though they have no coupling.
Start a second instance of the hello application on a different port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -Dquarkus.http.port=8081 -jar target/quarkus-app/quarkus-run.jar &amp;
[2] 2495369</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since we are still using the same application resource file and external coordinator there is no need to update the config.</p>
</div>
<div class="paragraph">
<p>Again, start an LRA using <code>curl</code> to send a request to the start method of the first service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ LRA_URL=$(curl http://localhost:8080/hello/start)
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_11</code></pre>
</div>
</div>
<div class="paragraph">
<p>and now end it in the second service (the one running on port 8081):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl --header "Long-Running-Action: $LRA_URL" http://localhost:8081/hello
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_11
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_11
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_11
Hello RESTEasy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that both microservices indicated that they received the completion callback.</p>
</div>
<div class="paragraph">
<p>Terminate both java processes (<code>kill 2495275 2495369</code>).</p>
</div>
<div class="sect3">
<h4 id="optional-step-using-the-mandatory-element"><a class="anchor" href="#optional-step-using-the-mandatory-element"></a>Optional Step: using the MANDATORY element</h4>
<div class="paragraph">
<p>Instead of using an existing method to close the LRA you might prefer to write one which expects there to be a context.
In this case you would want to set the <code>LRA.Type</code> element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @GET
    @Path("/end")
    @LRA(value = LRA.Type.MANDATORY) // Step 3a: The method MUST be invoked with an LRA
    @Produces(MediaType.TEXT_PLAIN)
    public String end(@HeaderParam(LRA_HTTP_CONTEXT_HEADER) URI lraId) {
        return lraId.toASCIIString();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the end method is annotated with <code>@LRA(value = LRA.Type.MANDATORY)</code>, the context header must be present otherwise the method will return an error response code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./mvnw clean package -DskipTests
$ java -Dquarkus.http.port=8081 -jar target/quarkus-app/quarkus-run.jar &amp;
[1] 300189
$ LRA_URL=$(curl http://localhost:8081/hello/start)
$ curl -v http://localhost:8081/hello/end
...
HTTP/1.1 412 Precondition Failed
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>whereas providing the LRA context header will work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl --header "Long-Running-Action: $LRA_URL" -I http://localhost:8081/hello/end
HTTP/1.1 200 OK
Content-Type: application/octet-stream
connection: keep-alive
$ kill 300189</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other <a href="https://download.eclipse.org/microprofile/microprofile-lra-1.0/apidocs/org/eclipse/microprofile/lra/annotation/ws/rs/LRA.Type.html">LRA.Type element values</a> may be useful, depending upon what your application is trying to achieve. For those readers familiar with JTA it is worth remarking that it was loosely modelled on the <a href="https://docs.oracle.com/javaee/7/api/javax/transaction/Transactional.TxType.html">Java Transactional TxType annotation</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="native-mode"><a class="anchor" href="#native-mode"></a>Native mode</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
in native mode only external coordinators (i.e. not embedded with the application) are supported (we will provide a coordinator extension in a later release to address this deficiency).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First build a native executable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./mvnw package -DskipTests -Pnative</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check that the external coordinator started in <a href="#_lra-coordinators">the section on coordinators</a> is still running on
port 50000 and then start the service as a native executable in the background. Note that if the coordinator is not
running on the default port you would need to either pass in the location of a running coordinator as a Java system property
(<code>-Dquarkus.lra.coordinator-url=http://localhost:50000/lra-coordinator</code>) or you can update the application config and
rebuild the native executable.</p>
</div>
<div class="paragraph">
<p>Start an instance of the native service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./target/narayana-lra-quickstart-1.0.0-SNAPSHOT-runner &amp;
[1] 2434426</code></pre>
</div>
</div>
<div class="paragraph">
<p>Take a note of the process id (i.e. 2434426) since we will need to kill the process later.</p>
</div>
<div class="paragraph">
<p>Start a new LRA:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ LRA_URL=$(curl http://localhost:8080/hello/start)</code></pre>
</div>
</div>
<div class="paragraph">
<p>and end it in a different method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl --header "Long-Running-Action: $LRA_URL" http://localhost:8080/hello
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_8479_612e13fa_2
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_8479_612e13fa_2
Hello RESTEasy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Kill the service in preparation for the next step (<code>kill 2434426</code>) or just leave it running.</p>
</div>
<div class="sect2">
<h3 id="failure-handling"><a class="anchor" href="#failure-handling"></a>Failure handling</h3>
<div class="paragraph">
<p>In this step we will start an LRA running in one service and then kill the service before the LRA has finished.
Then we&#8217;ll use a second service to end the LRA and note that second service completes but that the LRA will
still be in the <code>Closing</code> state because the participant in the first, failed, service still needs to complete.
If the LRA is to reach the <code>Closed</code> state then the failed service must be restarted so that it can can respond
to the <code>Complete</code> request.</p>
</div>
<div class="paragraph">
<p>Restart the fist service on the default port 8080 (and note its process id):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./target/narayana-lra-quickstart-1.0.0-SNAPSHOT-runner &amp;
[1] 2434936</code></pre>
</div>
</div>
<div class="paragraph">
<p>and start a second service instance (on port 8082):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./target/narayana-lra-quickstart-1.0.0-SNAPSHOT-runner -Dquarkus.http.port=8082 &amp;
[2] 2434984</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start an LRA at the first service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ LRA_URL=$(curl http://localhost:8080/hello/start)
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_34</code></pre>
</div>
</div>
<div class="paragraph">
<p>Kill the first service</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kill 2434936
2021-08-11 16:02:24,542 INFO  [io.quarkus] (Shutdown thread) narayana-lra-quickstart stopped in 0.003s</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, with only the second service running, try ending the LRA:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl --header "Long-Running-Action: $LRA_URL" http://localhost:8082/hello
hello with context http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_34
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_34
Hello RESTEasy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LRA will still be running, as you may verify by querying the coordinator (<code>curl <a href="http://localhost:50000/lra-coordinator" class="bare">http://localhost:50000/lra-coordinator</a></code>).</p>
</div>
<div class="paragraph">
<p>To finish the LRA restart the failed service (which was listening on port 8080):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./target/narayana-lra-quickstart-1.0.0-SNAPSHOT-runner &amp;
[3] 2435130</code></pre>
</div>
</div>
<div class="paragraph">
<p>Recovery processing is periodic (the default period between recovery passes is 2 minutes).
If you cannot wait 2 minutes then you may manually trigger a recovery cycle via the coordinators
recovery endpoint as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl http://localhost:50000/lra-coordinator/recovery
completing http://localhost:50000/lra-coordinator/0_ffffc0a8000e_a355_6113dede_34
[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The item to note here is that the restarted service received the completion notification (<code>completing &#8230;&#8203;</code>).
The result of the request to run a recovery cycle is a json array of recovering LRAs (in this example the list is
empty because the last LRA has now finished as indicated by the empty json array <code>[]</code>).</p>
</div>
<div class="paragraph">
<p>Clean up by stopping the two services (<code>kill 2434984 2435130</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-1"><a class="anchor" href="#appendix-1"></a>Appendix 1</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="embedded-coordinators"><a class="anchor" href="#embedded-coordinators"></a>Embedded Coordinators</h3>
<div class="paragraph">
<p>Since coordinators are just JAX-RS applications they can be embedded with JAX-RS services quite easily
by adding the LRA coordinator dependency the applications pom.xml file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.narayana.rts&lt;/groupId&gt;
      &lt;artifactId&gt;lra-coordinator-jar&lt;/artifactId&gt;
      &lt;version&gt;5.12.0.Final&lt;/version&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and since, by default, quarkus only allows one application per deployment you will need to add the the following
property to the application config file (<code>src/main/resources/application.properties</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">quarkus.resteasy.ignore-application-classes=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same caveats as described in the <a href="#_lra-coordinators">the section on coordinators</a> still apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>no support for native executables.</p>
</li>
<li>
<p>each instance requires dedicated storage for the coordinators' transaction logs (since sharing transaction stores is not currently supported).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The embedded coordinator will be available on the same port as the application (with path <code>lra-coordinator</code>),
but note that the default coordinator port is <code>50000</code> so you will need to configure its location in the application
config to tell the application to use it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">quarkus.http.port=8080
quarkus.lra.coordinator-url=http://localhost:8080/lra-coordinator</code></pre>
</div>
</div>
<div class="paragraph">
<p>The location of the transaction logs cannot be configured in this way and must be configured via a system property
(<code>ObjectStoreEnvironmentBean.objectStoreDir</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -DObjectStoreEnvironmentBean.objectStoreDir=target/lra-logs -jar target/quarkus-app/quarkus-run.jar &amp;
[1] 2443349
$ LRA_URL=$(curl http://localhost:8080/hello/start)
02021-08-11 17:42:30,464 INFO  [com.arj.ats.arjuna] (executor-thread-1) ARJUNA012170: TransactionStatusManager started on port 35827 and host 127.0.0.1 with service com.arjuna.ats.arjuna.recovery.ActionStatusService
hello with context http://localhost:8080/lra-coordinator/0_ffffc0a8000e_a985_6113fdf6_2
$ curl http://localhost:8080/lra-coordinator
[{"lraId":"http://localhost:8080/lra-coordinator/0_ffffc0a8000e_a985_6113fdf6_2","clientId":"org.acme.GreetingResource#start","status":"Active","startTime":1628700150466,"finishTime":0,"httpStatus":204,"topLevel":true,"recovering":false}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now end the LRA in a different method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl --header "Long-Running-Action: $LRA_URL" http://localhost:8080/hello
hello with context http://localhost:8080/lra-coordinator/0_ffffc0a8000e_a985_6113fdf6_2
completing http://localhost:8080/lra-coordinator/0_ffffc0a8000e_a985_6113fdf6_2
Hello RESTEasy</code></pre>
</div>
</div>
<div class="paragraph">
<p>A later extension will provide better support for embedded coordinators (including configuring them using standard quarkus mechanisms).</p>
</div>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/using-lra/&title=An Extension for Long Running Activities" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa-brands fa-linkedin fa-xl"></i>
  </a>
  <a class="share-x" href="https://x.com/intent/tweet?text=An Extension for Long Running Activities&url=https://quarkus.io/blog/using-lra/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on X">
    <i class="fa-brands fa-square-x-twitter fa-xl"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/using-lra/" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa-brands fa-square-facebook fa-xl"></i>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/using-lra/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <i class="fa-brands fa-square-reddit fa-xl"></i>
  </a>
  <a class="share-email" href="mailto:?subject=An Extension for Long Running Activities&amp;body=An Extension for Long Running Activities https://quarkus.io/blog/using-lra/" title="Share via Email" >
    <i class="fa-solid fa-envelope fa-xl"></i>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
  <script src="https://giscus.app/client.js"
        data-repo="quarkusio/quarkus"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI="
        data-category="Quarkus Blog/Website"
        data-category-id="DIC_kwDOCFbutM4CAFFV"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

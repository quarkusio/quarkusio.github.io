<!DOCTYPE html>
<html lang="en">







<head>
  <title>Getting Started with A2A Java SDK and gRPC - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com https://ajax.googleapis.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />

  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/quarkus-a2a-java-grpc/" />
  <meta property="og:title" content="Getting Started with A2A Java SDK and gRPC" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/quarkus-a2a-java-grpc/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/blog/quarkus-a2a-java-grpc/" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/blog/quarkus-a2a-java-grpc/" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/blog/quarkus-a2a-java-grpc/" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/blog/quarkus-a2a-java-grpc/" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/blog/quarkus-a2a-java-grpc/" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="post">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="#">Why<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/spring" class="">USING SPRING?</a></li>
          <li class="tertiarydropdown">
            <span href="#">AI<i class="fas fa-chevron-down"></i></span>
            <ul class="tertiarymenu">
              <li><a href="/ai" class="">AI OVERVIEW</a></li>
              <li><a href="/java-for-ai" class="">JAVA FOR AI</a></li>
              <li><a href="/quarkus-for-ai" class="">WHY QUARKUS FOR AI</a></li>
              <li><a href="/ai-blueprints" class="">AI BLUEPRINTS</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Learn<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="#">Extensions<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="#">Community<i class="fas fa-chevron-down firsti"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="active">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          <li><a href="/benefactors" class="">BENEFACTORS</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/blog/quarkus-a2a-java-grpc/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/blog/quarkus-a2a-java-grpc/">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/blog/quarkus-a2a-java-grpc/">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/blog/quarkus-a2a-java-grpc/">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/blog/quarkus-a2a-java-grpc/">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="full-width-breadcrumb-bg align-self">
  <div class="width-12-12">
      <p class="returnlink"><a href="/blog">Blog</a> <i class="fas fa-chevron-right"></i> Getting Started with A2A Java SDK and gRPC</p>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <div class="post-date">
          September 25, 2025 
          
            <span class="tags"><a href="/blog/tag/ai">#ai</a><a href="/blog/tag/a2a">#a2a</a><a href="/blog/tag/grpc">#grpc</a></span>
          
        </div>
        <h1 class="post-title">Getting Started with A2A Java SDK and gRPC</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            
            
              <img class="headshot" src="https://www.gravatar.com/avatar/e07a676199f6ad0af96a61a691b114b3">
            
            <p class="byline">By <a href="/author/fjuma">Farah Juma</a></p>
          </div>
          <div class="width-12-12">
              <div class="paragraph">
<p>The ability for AI agents to communicate across different frameworks and languages is key to
building polyglot multi-agent systems. The recent <a href="https://quarkus.io/blog/quarkus-a2a-java-0-3-0-alpha-release/">0.3.0.Alpha1</a> and <a href="https://quarkus.io/blog/quarkus-a2a-java-0-3-0-beta-release/">0.3.0.Beta1</a> releases of the A2A Java SDK take a
significant step forward in this area by adding support for the gRPC transport and the HTTP+JSON/REST transport, offering greater flexibility and improved performance.</p>
</div>
<div class="paragraph">
<p>In this post, we&#8217;ll demonstrate how to create an A2A server agent and an A2A client that support
multiple transports, where the gRPC transport will be selected.</p>
</div>
<div class="sect1">
<h2 id="dice-agent-sample"><a class="anchor" href="#dice-agent-sample"></a>Dice Agent Sample</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To see the multi-transport support in action, we&#8217;re going to take a look at the new
<a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport">Dice Agent</a>
sample from the <a href="https://github.com/a2aproject/a2a-samples">a2a-samples</a> repo.</p>
</div>
<div class="paragraph">
<p>The <code>DiceAgent</code> is a simple <a href="https://github.com/a2aproject/a2a-samples/blob/main/samples/java/agents/dice_agent_multi_transport/server/src/main/java/com/samples/a2a/DiceAgent.java">Quarkus LangChain4j AI service</a> that can make use of <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/server/src/main/java/com/samples/a2a/DiceTools.java">tools</a> to roll dice of different sizes and check if the result of a roll is a prime number.</p>
</div>
<div class="sect2">
<h3 id="a2a-server-agent"><a class="anchor" href="#a2a-server-agent"></a>A2A Server Agent</h3>
<div class="paragraph">
<p>There are three key things in our sample application that turn our Quarkus LangChain4j AI service into an A2A
server agent:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A dependency on at least one A2A Java SDK Server Reference implementation in the server application&#8217;s
<a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/server/pom.xml">pom.xml</a> file. In this sample, we&#8217;ve added dependencies on both <code>io.github.a2asdk:a2a-java-sdk-reference-grpc</code>
and <code>io.github.a2asdk:a2a-java-sdk-reference-jsonrpc</code> since we want our A2A server agent to be able to support
both the gRPC and JSON-RPC transports.</p>
</li>
<li>
<p>The <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/server/src/main/java/com/samples/a2a/DiceAgentCardProducer.java">DiceAgentCardProducer</a>, which defines the <code>AgentCard</code> for our A2A server agent.</p>
</li>
<li>
<p>The <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/server/src/main/java/com/samples/a2a/DiceAgentExecutorProducer.java">DiceAgentExecutorProducer</a>, which calls our <code>DiceAgent</code> AI service.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s look closer at the <code>DiceAgentCardProducer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * Producer for dice agent card configuration.
 */
@ApplicationScoped
public final class DiceAgentCardProducer {

    /** The HTTP port for the agent service. */
    @Inject
    @ConfigProperty(name = "quarkus.http.port")
    private int httpPort;

    /**
     * Produces the agent card for the dice agent.
     *
     * @return the configured agent card
     */
    @Produces
    @PublicAgentCard
    public AgentCard agentCard() {
        return new AgentCard.Builder()
                .name("Dice Agent")
                .description(
                        "Rolls an N-sided dice and answers questions about the "
                                + "outcome of the dice rolls. Can also answer questions "
                                + "about prime numbers.")
                .preferredTransport(TransportProtocol.GRPC.asString()) <i class="conum" data-value="1"></i><b>(1)</b>
                .url("localhost:" + httpPort) <i class="conum" data-value="2"></i><b>(2)</b>
                .version("1.0.0")
                .documentationUrl("http://example.com/docs")
                .capabilities(
                        new AgentCapabilities.Builder()
                                .streaming(true)
                                .pushNotifications(false)
                                .stateTransitionHistory(false)
                                .build())
                .defaultInputModes(List.of("text"))
                .defaultOutputModes(List.of("text"))
                .skills(
                        List.of(
                                new AgentSkill.Builder()
                                        .id("dice_roller")
                                        .name("Roll dice")
                                        .description("Rolls dice and discusses outcomes")
                                        .tags(List.of("dice", "games", "random"))
                                        .examples(List.of("Can you roll a 6-sided die?"))
                                        .build(),
                                new AgentSkill.Builder()
                                        .id("prime_checker")
                                        .name("Check prime numbers")
                                        .description("Checks if given numbers are prime")
                                        .tags(List.of("math", "prime", "numbers"))
                                        .examples(
                                                List.of("Is 17 a prime number?"))
                                        .build()))
                .protocolVersion("0.3.0")
                .additionalInterfaces( <i class="conum" data-value="3"></i><b>(3)</b>
                        List.of(
                                new AgentInterface(TransportProtocol.GRPC.asString(), <i class="conum" data-value="4"></i><b>(4)</b>
                                        "localhost:" + httpPort),
                                new AgentInterface(
                                        TransportProtocol.JSONRPC.asString(), <i class="conum" data-value="5"></i><b>(5)</b>
                                        "http://localhost:" + httpPort)))
                .build();
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The preferred transport for our A2A server agent, <code>gRPC</code> in this sample. This is the transport protocol available at the primary endpoint URL.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the primary endpoint URL for our A2A server agent. Since <code>gRPC</code> is our preferred transport and since
we&#8217;ll be using the HTTP port for gRPC and JSON-RPC, we&#8217;re specifying <code>"localhost:" + httpPort</code> here.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We can optionally specify additional interfaces supported by our A2A server agent here. Since we also want
to support the JSON-RPC transport, we&#8217;ll be adding that in this section.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The primary endpoint URL can optionally be specified in the additional interfaces section for completeness.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The JSON-RPC transport URL. Notice that we&#8217;re using the HTTP port for both JSON-RPC and gRPC.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="port-configuration-for-the-transports"><a class="anchor" href="#port-configuration-for-the-transports"></a>Port Configuration for the Transports</h4>
<div class="paragraph">
<p>In the previous section, we mentioned that we&#8217;re using the HTTP port for both the gRPC and JSON-RPC transports.
This is configured in our <code>application.properties</code> file as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Use the same port for gRPC and HTTP
quarkus.grpc.server.use-separate-server=false
quarkus.http.port=11000</code></pre>
</div>
</div>
<div class="paragraph">
<p>This setting allows serving both plain HTTP and gRPC requests from the same HTTP server. Underneath it uses a Vert.x based gRPC server. If you set this setting to true, gRPC requests will be served on port 9000 (and gRPC Java will be used instead).</p>
</div>
</div>
<div class="sect3">
<h4 id="starting-the-a2a-server-agent"><a class="anchor" href="#starting-the-a2a-server-agent"></a>Starting the A2A Server Agent</h4>
<div class="paragraph">
<p>Once we start our Quarkus application, our A2A server agent will be available at localhost:11000 for clients that would like to use gRPC and at <a href="http://localhost:11000" class="bare">http://localhost:11000</a> for clients that would like to use JSON-RPC.</p>
</div>
<div class="paragraph">
<p>A2A clients can now send queries to our A2A server agent using either the gRPC or JSON-RPC transport.</p>
</div>
<div class="paragraph">
<p>The complete source code and instructions for starting the server application are available <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/server">here</a>.</p>
</div>
<div class="paragraph">
<p>Now that we have our multi-transport server agent configured and ready to go, let&#8217;s take a look at how to create an A2A client that can communicate with it.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a2a-client"><a class="anchor" href="#a2a-client"></a>A2A Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>dice_agent_multi_transport</code> sample also includes a <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/client/src/main/java/com/samples/a2a/client/TestClient.java">TestClient</a> that can be used to send messages to the Dice Agent.</p>
</div>
<div class="paragraph">
<p>Notice that the client&#8217;s <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/client/pom.xml">pom.xml</a> file contains dependencies on <code>io.github.a2asdk:a2a-java-sdk-client</code> and <code>io.github.a2asdk:a2a-java-sdk-client-transport-grpc</code>.</p>
</div>
<div class="paragraph">
<p>The <code>a2a-java-sdk-client</code> dependency provides access to a <code>Client.builder</code> that we&#8217;ll use to create our A2A client and also provides the ability for the client to support the JSON-RPC transport.</p>
</div>
<div class="paragraph">
<p>The <code>a2a-java-sdk-client-transport-grpc</code> dependency provides the ability for the client to support the gRPC transport.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how the <code>TestClient</code> uses the A2A Java SDK to create a <code>Client</code> that supports both gRPC and JSON-RPC:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">...
// Fetch the public agent card
AgentCard publicAgentCard = new A2ACardResolver(serverUrl).getAgentCard();

// Create a CompletableFuture to handle async response
final CompletableFuture&lt;String&gt; messageResponse = new CompletableFuture&lt;&gt;();

// Create consumers for handling client events
List&lt;BiConsumer&lt;ClientEvent, AgentCard&gt;&gt; consumers = getConsumers(messageResponse);

// Create error handler for streaming errors
Consumer&lt;Throwable&gt; streamingErrorHandler = (error) -&gt; {
    System.out.println("Streaming error occurred: " + error.getMessage());
    error.printStackTrace();
    messageResponse.completeExceptionally(error);
};

// Create channel factory for gRPC transport
Function&lt;String, Channel&gt; channelFactory = agentUrl -&gt; {
    return ManagedChannelBuilder.forTarget(agentUrl).usePlaintext().build();
};

ClientConfig clientConfig = new ClientConfig.Builder()
    .setAcceptedOutputModes(List.of("Text"))
    .build();

// Create the client with both JSON-RPC and gRPC transport support.
// The A2A server agent's preferred transport is gRPC, since the client
// also supports gRPC, this is the transport that will get used
Client client = Client.builder(publicAgentCard) <i class="conum" data-value="1"></i><b>(1)</b>
    .addConsumers(consumers) <i class="conum" data-value="2"></i><b>(2)</b>
    .streamingErrorHandler(streamingErrorHandler) <i class="conum" data-value="3"></i><b>(3)</b>
    .withTransport(GrpcTransport.class, new GrpcTransportConfig(channelFactory)) <i class="conum" data-value="4"></i><b>(4)</b>
    .withTransport(JSONRPCTransport.class, new JSONRPCTransportConfig()) <i class="conum" data-value="5"></i><b>(5)</b>
    .clientConfig(clientConfig) <i class="conum" data-value="6"></i><b>(6)</b>
    .build();

// Create and send the message
Message message = A2A.toUserMessage(messageText);

System.out.println("Sending message: " + messageText);
client.sendMessage(message); <i class="conum" data-value="7"></i><b>(7)</b>
System.out.println("Message sent successfully. Waiting for response...");

try {
    // Wait for response with timeout
    String responseText = messageResponse.get();
    System.out.println("Final response: " + responseText);
} catch (Exception e) {
    System.err.println("Failed to get response: " + e.getMessage());
    e.printStackTrace();
}
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We can use <code>Client.builder(publicAgentCard)</code> to create our A2A client. We need to pass in the <code>AgentCard</code> retrieved from the A2A server agent this client will be communicating with.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We need to specify event consumers that will be used to handle the responses that will be received from the
A2A server agent. This will be explained in more detail in the next section.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The A2A client created by the <code>Client.builder</code> will automatically send streaming messages, as opposed to
non-streaming messages, if it&#8217;s supported by both the server and the client. We need to specify a handler that will be used for any errors that might occur during streaming.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We&#8217;re indicating that we&#8217;d like our client to support the gRPC transport.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We&#8217;re indicating that we&#8217;d like our client to also support the JSON-RPC transport. When communicating with
an A2A server agent that doesn&#8217;t support gRPC, this is the transport that would get used.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>We can optionally specify general client configuration and preferences here.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Once our <code>Client</code> has been created, we can send a message to the A2A server agent. The client will automatically use streaming if it&#8217;s supported by both the server and the client. If the server doesn&#8217;t
support streaming, the client will send a non-streaming message instead.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="defining-the-event-consumers"><a class="anchor" href="#defining-the-event-consumers"></a>Defining the Event Consumers</h3>
<div class="paragraph">
<p>When creating our A2A client, we need to specify event consumers that will be used to handle the responses
that will be received from the A2A server agent. Let&#8217;s see how to define a consumer that handles the different
types of events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">   private static List&lt;BiConsumer&lt;ClientEvent, AgentCard&gt;&gt; getConsumers(
            final CompletableFuture&lt;String&gt; messageResponse) {
        List&lt;BiConsumer&lt;ClientEvent, AgentCard&gt;&gt; consumers = new ArrayList&lt;&gt;();
        consumers.add(
                (event, agentCard) -&gt; {
                    if (event instanceof MessageEvent messageEvent) { <i class="conum" data-value="1"></i><b>(1)</b>
                        Message responseMessage = messageEvent.getMessage();
                        String text = extractTextFromParts(responseMessage.getParts());
                        System.out.println("Received message: " + text);
                        messageResponse.complete(text);
                    } else if (event instanceof TaskUpdateEvent taskUpdateEvent) { <i class="conum" data-value="2"></i><b>(2)</b>
                        UpdateEvent updateEvent = taskUpdateEvent.getUpdateEvent();
                        if (updateEvent
                                instanceof TaskStatusUpdateEvent taskStatusUpdateEvent) { <i class="conum" data-value="3"></i><b>(3)</b>
                            System.out.println("Received status-update: "
                                            + taskStatusUpdateEvent.getStatus().state().asString());
                            if (taskStatusUpdateEvent.isFinal()) {
                                StringBuilder textBuilder = new StringBuilder();
                                List&lt;Artifact&gt; artifacts
                                        = taskUpdateEvent.getTask().getArtifacts();
                                for (Artifact artifact : artifacts) {
                                    textBuilder.append(extractTextFromParts(artifact.parts()));
                                }
                                String text = textBuilder.toString();
                                messageResponse.complete(text);
                            }
                        } else if (updateEvent
                                        instanceof TaskArtifactUpdateEvent taskArtifactUpdateEvent) { <i class="conum" data-value="4"></i><b>(4)</b>
                            List&lt;Part&lt;?&gt;&gt; parts = taskArtifactUpdateEvent
                                    .getArtifact()
                                    .parts();
                            String text = extractTextFromParts(parts);
                            System.out.println("Received artifact-update: " + text);
                        }
                    } else if (event instanceof TaskEvent taskEvent) { <i class="conum" data-value="5"></i><b>(5)</b>
                        System.out.println("Received task event: "
                                + taskEvent.getTask().getId());
                    }
                });
        return consumers;
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This defines how to handle a <code>Message</code> received from the server agent. The server agent will send a response that contains a <code>Message</code> for immediate, self-contained interactions that are stateless.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This defines how to handle an <code>UpdateEvent</code> received from the server agent for a specific task. There are
two types of <code>UpdateEvents</code> that can be received.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A <code>TaskStatusUpdateEvent</code> notifies the client of a change in a task&#8217;s status. This is typically used in streaming interactions. If this is the final event in the stream for this interaction, <code>taskStatusUpdateEvent.isFinal()</code>
will return <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>A <code>TaskArtifactUpdateEvent</code> notifies the client that an artifact has been generated or updated. An artifact contains output generated by an agent during a task. This is typically used in streaming interactions.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This defines how to handle a <code>Task</code> received from the server agent. A <code>Task</code> will be processed by the server agent through a defined lifecycle until it reaches an interrupted state or a terminal state.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transport-selection"><a class="anchor" href="#transport-selection"></a>Transport Selection</h3>
<div class="paragraph">
<p>When creating our <code>Client</code>, we used the <code>withTransport</code> method to specify that we want the client
to support both gRPC and JSON-RPC, in that order. The <code>Client.builder</code> selects the appropriate
transport protocol to use based on information obtained from the A2A server agent&#8217;s <code>AgentCard</code>,
taking into account the transports configured for the client. In this sample application, because
the server agent&#8217;s preferred transport is gRPC, the gRPC transport will be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-the-a2a-client"><a class="anchor" href="#using-the-a2a-client"></a>Using the A2A Client</h3>
<div class="paragraph">
<p>The sample application contains a <code>TestClientRunner</code> that can be run using <code>JBang</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">jbang TestClientRunner.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Connecting to dice agent at: http://localhost:11000
Successfully fetched public agent card:
...
Sending message: Can you roll a 5 sided die?
Message sent successfully. Waiting for response...
Received status-update: submitted
Received status-update: working
Received artifact-update: Sure! I rolled a 5 sided die and got a 3.
Received status-update: completed
Final response: Sure! I rolled a 5 sided die and got a 3.</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also experiment with sending different messages to the A2A server agent using the <code>--message</code> option
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">jbang TestClientRunner.java --message "Can you roll a 13-sided die and check if the result is a prime number?"
Connecting to dice agent at: http://localhost:11000
Successfully fetched public agent card:
...
Sending message: Can you roll a 13-sided die and check if the result is a prime number?
Message sent successfully. Waiting for response...
Received status-update: submitted
Received status-update: working
Received artifact-update: I rolled a 13 sided die and got a 3.  3 is a prime number.
Received status-update: completed
Final response: I rolled a 13 sided die and got a 3.  3 is a prime number.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The complete source code and instructions for starting the client are available <a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport/client">here</a>. There
are also details on how to use an A2A client that uses the A2A Python SDK instead of the A2A Java SDK
to communicate with our A2A server agent.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The addition of multi-transport support to the A2A Java SDK, as demonstrated in the new Dice Agent
sample, is a big step towards creating more flexible, performant, polyglot multi-agent systems.</p>
</div>
<div class="sect2">
<h3 id="further-reading"><a class="anchor" href="#further-reading"></a>Further Reading</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents/dice_agent_multi_transport">Dice Agent Sample</a></p>
</li>
<li>
<p><a href="https://quarkus.io/blog/quarkus-a2a-java-0-3-0-alpha-release/">Getting Started with Quarkus and A2A Java SDK 0.3.0</a></p>
</li>
<li>
<p><a href="https://quarkus.io/blog/quarkus-a2a-java-0-3-0-beta-release/">A2A Java SDK: Support for the REST Transport is Now Here</a></p>
</li>
<li>
<p><a href="https://github.com/a2aproject/a2a-samples/tree/main/samples/java/agents">A2A Java SDK Samples</a></p>
</li>
<li>
<p><a href="https://github.com/a2aproject/a2a-java/blob/main/README.md">A2A Java SDK Documentation</a></p>
</li>
<li>
<p><a href="https://a2a-protocol.org/latest/specification/">A2A Specification</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/quarkus-a2a-java-grpc/&title=Getting Started with A2A Java SDK and gRPC" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa-brands fa-linkedin fa-xl"></i>
  </a>
  <a class="share-x" href="https://x.com/intent/tweet?text=Getting Started with A2A Java SDK and gRPC&url=https://quarkus.io/blog/quarkus-a2a-java-grpc/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on X">
    <i class="fa-brands fa-square-x-twitter fa-xl"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/quarkus-a2a-java-grpc/" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa-brands fa-square-facebook fa-xl"></i>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/quarkus-a2a-java-grpc/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <i class="fa-brands fa-square-reddit fa-xl"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Getting Started with A2A Java SDK and gRPC&amp;body=Getting Started with A2A Java SDK and gRPC https://quarkus.io/blog/quarkus-a2a-java-grpc/" title="Share via Email" >
    <i class="fa-solid fa-envelope fa-xl"></i>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
  <script src="https://giscus.app/client.js"
        data-repo="quarkusio/quarkus"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI="
        data-category="Quarkus Blog/Website"
        data-category-id="DIC_kwDOCFbutM4CAFFV"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license. <i class='fab fa-creative-commons'></i><i class='fab fa-creative-commons-by'></i> <a href='https://creativecommons.org/licenses/by/3.0/' target='_blank'>CC by 3.0</a><br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
          
            <li><a href="https://www.redhat.com/en/about/privacy-policy" target="_blank">Privacy Policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.threads.com/@quarkusio" target="_blank">Threads</a></li>
          
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
          
            <li><a href="https://stats.uptimerobot.com/ze1PfweT2p" target="_blank">Quarkus Service Status</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content cf-footer">
  <div class="flexcontainer">
    <div class="cf-logo">
      <a class="cf-logo" href="https://www.commonhaus.org/" target="_blank"><img src="https://raw.githubusercontent.com/commonhaus/artwork/main/foundation/brand/svg/CF_logo_horizontal_single_reverse.svg"/></a>
    </div>
    <div class="license">
      Copyright © Quarkus. All rights reserved. For details on our trademarks, please visit our <a href="https://www.commonhaus.org/policies/trademark-policy/">Trademark Policy</a> and <a href="https://www.commonhaus.org/trademarks/">Trademark List</a>. Trademarks of third parties are owned by their respective holders and their mention here does not suggest any endorsement or association.
    </div>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
  <script src="/assets/javascript/randomize.js" type="text/javascript"></script>
  <script src="/assets/javascript/time.js" type="text/javascript"></script>
</body>

</html>

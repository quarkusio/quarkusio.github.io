<!DOCTYPE html>
<html lang="en">







<head>
  <title>Automating Quarkus with GitLab - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" />
  <meta property="og:title" content="Automating Quarkus with GitLab" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="post">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="active">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    <div class="full-width-breadcrumb-bg align-self">
  <div class="width-12-12">
      <p class="returnlink"><a href="/blog">Blog</a> <i class="fas fa-chevron-right"></i> Automating Quarkus with GitLab</p>
  </div>
</div>

<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
    <div class="grid-wrapper">
      <div class="width-12-12">
        <div class="post-date">
          December 02, 2021 
          
            <span class="tags"><a href="/blog/tag/user-story">#user-story</a><a href="/blog/tag/development-tips">#development-tips</a><a href="/blog/tag/gitlab">#gitlab</a></span>
          
        </div>
        <h1 class="post-title">Automating Quarkus with GitLab</h1>
        <div class="grid-wrapper">
          <div class="width-8-12 width-12-12-m byline-wrapper">
            
            
              <img class="headshot" src="https://www.gravatar.com/avatar/708553eaa62a71792fc7ee474da57cc0">
            
            <p class="byline">By <a href="/author/kjq">KimJohn Quinn</a></p>
          </div>
          <div class="width-12-12">
              <div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/logicdrop.png" alt="Logicdrop logo">
</div>
</div>
<div class="paragraph">
<p><a href="https://logicdrop.com" target="_blank" rel="noopener">Logicdrop</a> provides a business automation and data intelligence platform that enables enterprises to design their own solutions and run them in the cloud. We process millions of transactions a month across a global client-base and add significant value to mission-critical processes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-challenge"><a class="anchor" href="#the-challenge"></a>The Challenge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since moving to <a href="https://quarkus.io/" target="_blank" rel="noopener">Quarkus</a>, our productivity quickly started to outpace our CI/CD process. We needed a better way to leverage microservice and cloud-native approaches, deploy faster and more frequently, and involve everyone throughout the entire process.</p>
</div>
<div class="paragraph">
<p>We eventually determined that the complexity was not in the actual deployment, but in orchestrating all the efforts that went into it and handling it afterwards.</p>
</div>
<div class="paragraph">
<p>Some of the challenges we faced were:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Environments got more complicated with more services</p>
</li>
<li>
<p>Debugging distributed services was challenging</p>
</li>
<li>
<p>Different tool sets were needed and used for visibility</p>
</li>
<li>
<p>No isolated way to develop or share work, except locally</p>
</li>
<li>
<p>Collaboration between front and back-end teams was lacking</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>There had to be a better way&#8230;&#8203;</em></p>
</div>
<div class="paragraph">
<p>This is our evolving blueprint of how we use <a href="https://quarkus.io/" target="_blank" rel="noopener">Quarkus</a>, especially the extensions, with <a href="https://about.gitlab.com/" target="_blank" rel="noopener">GitLab</a> to tie everything together into one cohesive ecosystem accessible by everyone.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gitlab-projects"><a class="anchor" href="#gitlab-projects"></a>GitLab Projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The structure we settled on was to split cluster operations, templates, and Quarkus services into individual projects.  This allows us to easily introduce changes to existing configurations or apply new ones with minimal effort and maximum flexibility.</p>
</div>
<div class="paragraph">
<p>The <strong>cluster</strong> project centralizes anything touching the Kubernetes cluster. It is configured as a GitLab <a href="https://docs.gitlab.com/ee/user/clusters/management_project_template.html" target="_blank" rel="noopener">cluster-management</a> project so we can manage other cluster services like Elastic, Nginx, or any other Helm charts.</p>
</div>
<div class="paragraph">
<p>The <strong>templates</strong> project contains the building blocks used by all our GitLab projects. It makes maintenance easier, provides flexibility, and promotes consistency.  Developers can add new applications or services using these templates in less than a few minutes.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/layers.png" alt="Cluster-Templates-Services">
</div>
</div>
<div class="paragraph">
<p><strong>Quarkus projects</strong> are treated as <em>families of services</em> each worked on and deployed individually. Each service uses triggers to notify the cluster when it&#8217;s ready to be deployed or cleaned up.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
We found using <a href="https://quarkus.io/guides/config-yaml#profiles" target="_blank" rel="noopener">Quarkus profiles</a> with abstracting common release and Kubernetes properties into a shared JAR shielded developers even more from having to manage individual configurations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Using Quarkus we eliminated having to maintain Helm charts for the services. We even have Quarkus services that interact directly with GitLab for specific tooling and metrics we maintain.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkus-extensions"><a class="anchor" href="#quarkus-extensions"></a>Quarkus Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using out-of-box <a href="https://quarkus.io/guides/" target="_blank" rel="noopener">Quarkus extensions</a> it was straight-forward to quickly expose a wide range of logs, metrics, and functionality.</p>
</div>
<div class="paragraph">
<p>Taking it a step further and integrating the extensions into GitLab we:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Saved time</p>
</li>
<li>
<p>Reduced efforts</p>
</li>
<li>
<p>Increased visibility</p>
</li>
<li>
<p>Fostered collaboration</p>
</li>
<li>
<p>Minimized complexity</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The most important extensions we use are the <a href="https://quarkus.io/guides/deploying-to-kubernetes" target="_blank" rel="noopener">Quarkus Kubernetes</a> and <a href="https://quarkus.io/guides/kubernetes-config" target="_blank" rel="noopener">Quarkus Kubernetes Config</a> extensions.</p>
</div>
<div class="paragraph">
<p>Other extensions we integrated into GitLab are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://quarkus.io/guides/tests-with-coverage" target="_blank" rel="noopener">Quarkus Jacoco</a> for coverage <a href="https://docs.gitlab.com/ee/ci/pipelines/settings.html#add-test-coverage-results-to-a-merge-request" target="_blank" rel="noopener">results</a> and <a href="https://docs.gitlab.com/ee/user/project/merge_requests/test_coverage_visualization.html" target="_blank" rel="noopener">reports</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/logging-sentry" target="_blank" rel="noopener">Quarkus Logging Sentry</a> hooks into <a href="https://docs.gitlab.com/ee/operations/error_tracking.html" target="_blank" rel="noopener">GitLab Error Tracking</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/smallrye-health" target="_blank" rel="noopener">Quarkus SmallRye Health</a> hooks into <a href="https://docs.gitlab.com/ee/operations/metrics/" target="_blank" rel="noopener">GitLab Metrics</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/openapi-swaggerui" target="_blank" rel="noopener">Quarkus SmallRye OpenAPI</a> exposes the <a href="https://docs.gitlab.com/ee/api/openapi/openapi_interactive.html" target="_blank" rel="noopener">Swagger API</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/opentracing" target="_blank" rel="noopener">Quarkus SmallRye OpenTracing</a> hooks into <a href="https://docs.gitlab.com/ee/operations/tracing.html" target="_blank" rel="noopener">GitLab Tracing</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the Quarkus extensions in combination with GitLab we get a complete picture of our environments, from development to deployment and monitoring, making building microservices easier.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dreaming-of-pipelines"><a class="anchor" href="#dreaming-of-pipelines"></a>Dreaming of Pipelines</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="developer-powered-deployments"><a class="anchor" href="#developer-powered-deployments"></a>Developer Powered Deployments</h3>
<div class="paragraph">
<p>Our most important pipelines revolve around making the developer process more streamlined and easier to work with. Developing, debugging, and collaborating on multiple services needed to be as easy and painless as possible.</p>
</div>
<div class="paragraph">
<p>Previously, deployments to higher environments were tedious but doable but developers were not fully involved in this process.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Since moving to Quarkus, developers are now responsible for developing <em>and</em> deploying (limitations apply) their own services.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We decided to use GitLab <a href="https://docs.gitlab.com/ee/ci/pipelines/merge_request_pipelines.html" target="_blank" rel="noopener">merge requests pipelines</a> as the catalyst to drive our process.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/merge-request.png" alt="Merge Request">
</div>
</div>
<div class="paragraph">
<p>On every push, the merge request will:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run all the unit tests</p>
</li>
<li>
<p>Run any integration tests (Mongo, AWS, Redis)</p>
</li>
<li>
<p>Run any E2E tests (other external services)</p>
</li>
<li>
<p>Generate code coverage and quality reports</p>
</li>
<li>
<p>Publish an interactive Swagger API</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The most useful feature of the merge request is that we can use it to deploy any number of services, and interact with them, into isolated environments.</strong></p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/develop-pipeline.png" alt="Review Pipeline">
</div>
</div>
<div class="paragraph">
<p><em>Review</em> services lets us go beyond automated testing. We can spot-test only what is being worked on or even run a full suite of services if needed (this is especially useful during a combined UX and multiple service feature).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Lighter than a feather, Quarkus native executables are a small fraction of the size compared to their pure Java counterparts. This allows us to deploy a full set of services in less space than would be needed to deploy the equivalent Spring Boot services.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="building-quarkus-services"><a class="anchor" href="#building-quarkus-services"></a>Building Quarkus Services</h3>
<div class="paragraph">
<p>The downstream Quarkus pipeline is a specialized set of jobs that handle building, testing, and containerizing Quarkus services only.</p>
</div>
<div class="paragraph">
<p>For each changed service we:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build a native executables or fast jar</p>
</li>
<li>
<p>Run any tests (including native ones if needed)</p>
</li>
<li>
<p>Generate the Kubernetes manifests</p>
</li>
<li>
<p>Build and deploy its container</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/develop-downstream.png" alt="Service Downstream Service">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
We <em>only</em> push the container and upload the manifests to AWS S3. This lets us accumulate changes into a single package, composed of one or more services, that can be deployed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="faster-faster-pipelines"><a class="anchor" href="#faster-faster-pipelines"></a>Faster Faster Pipelines</h3>
<div class="paragraph">
<p>To speed up the pipelines, especially when building multiple native executables, we rely on GitLab AutoScaling runners to run the jobs in parallel.  This allows us to build any number of services in a relatively constant time frame.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Currently, for 20+ services, we can perform complete end-to-end deployments, including native executables, in less than 20 minutes without manual intervention. Most of the time, since we are only deploying changed services, the net time is far less.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We use the GitLab&#8217;s <a href="https://docs.gitlab.com/ee/ci/yaml/#needs" target="_blank" rel="noopener"><code>needs</code></a> keyword to short-circuit the pipelines so we can get to more important jobs faster without waiting. This allows us to immediately, and repeatedly if needed, deploy services as they become ready.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/develop-dag.png" alt="Review DAG">
</div>
</div>
<div class="paragraph">
<p>In the above <a href="https://docs.gitlab.com/ee/ci/directed_acyclic_graph/" target="_blank" rel="noopener">DAG</a>, as services are built we can deploy them without having to wait for other services to finish.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Native builds are intensive so it is best to run them in parallel. Mileage may vary but we found AWS M5.XL instances to be the best value for our money when doing this.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="one-deploy-to-rule-them-all"><a class="anchor" href="#one-deploy-to-rule-them-all"></a>One Deploy to Rule Them All</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Where a branch drives the development process, a tag drives the release process.</p>
</div>
<div class="paragraph">
<p>At any time the default branch can be promoted. This initiates a series of jobs that ultimately <em>deploys the updated services into the cluster without intervention</em>.</p>
</div>
<div class="paragraph">
<p>Unless a test fails (which should have been caught before-hand), the pipeline, whether it originates from a developer branch or the default branch is <em>fully automated</em>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/promotion.png" alt="Promoting a Release">
</div>
</div>
<div class="paragraph">
<p>Clicking <code>promote</code> starts out by performing these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reconcile Maven versions</p>
</li>
<li>
<p>Update the changelog</p>
</li>
<li>
<p>Create the release tag</p>
</li>
<li>
<p>Build service(s) and deploy the containers</p>
</li>
<li>
<p>Generate the Kubernetes manifests</p>
</li>
<li>
<p>Publish Swagger API and generate OpenAPI clients</p>
</li>
<li>
<p>Bumps the version to the next <code>-SNAPSHOT</code> version</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For better or worse, we do use <a href="https://maven.apache.org/maven-ci-friendly.html" target="_blank" rel="noopener">Maven CI Friendly</a> versions to help us simplify versioning and deployment.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The below image shows multiple jobs all running at the same time, including every Quarkus service being built.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/release-pipeline.png" alt="Deploy to Staging">
</div>
</div>
<div class="paragraph">
<p>Once the changed services are finished building the deployment begins automatically.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/deployment.png" alt="Single Deployment">
</div>
</div>
<div class="paragraph">
<p>The cluster is then notified to grab the manifests, perform any last minute configurations, and finally deploy the services.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/cluster-downstream.png" alt="Cluster Downstream Service">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This is where we leverage the <a href="https://quarkus.io/guides/kubernetes-config" target="_blank" rel="noopener">Quarkus Kubernetes Config</a>. We convert properties into expected configmaps and secrets that get deployed into the namespace.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The example below shows how a pipeline transitions from a merge request, to getting merged, and finally released.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/transition.png" alt="Transitions of Pipelines">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="git-your-quarkus-features"><a class="anchor" href="#git-your-quarkus-features"></a>Git Your Quarkus Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By tightly integrating GitLab with our Quarkus platform, our process has become more fluid and provides a one-stop shop for tools, logs, and monitoring right from within GitLab&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Teams now look to GitLab first instead of having to interact with different tools and applications (except in advanced scenarios).</p>
</div>
<div class="sect2">
<h3 id="interactive-api-endpoints"><a class="anchor" href="#interactive-api-endpoints"></a>Interactive API Endpoints</h3>
<div class="paragraph">
<p>Swagger can be viewed and interacted with directly in GitLab. This allows for quick and easy spot testing during development or validating endpoints post-deployment.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/swagger.png" alt="Swagger API">
</div>
</div>
</div>
<div class="sect2">
<h3 id="errors-and-warnings"><a class="anchor" href="#errors-and-warnings"></a>Errors and Warnings</h3>
<div class="paragraph">
<p>Sentry is hooked into each project so that specific errors and warnings can be found quicker without having to dig through the logs. GitLab can even be used to create or resolve tickets from the Sentry issue.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/view-sentry.png" alt="Sentry Errors">
</div>
</div>
</div>
<div class="sect2">
<h3 id="coverage-and-quality-reports"><a class="anchor" href="#coverage-and-quality-reports"></a>Coverage and Quality Reports</h3>
<div class="paragraph">
<p>Jacoco generates coverage reports for each project. Metrics are maintained and visible throughout the lifetime of each service.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/coverage.png" alt="Coverage Report">
</div>
</div>
<div class="paragraph">
<p>Additionally, Code Climate is used to measure changes in quality between the default branch and each merge request throughout the lifetime of every service.</p>
</div>
</div>
<div class="sect2">
<h3 id="distributed-service-traces"><a class="anchor" href="#distributed-service-traces"></a>Distributed Service Traces</h3>
<div class="paragraph">
<p>Jaeger provides us with insights into how our APIs are used and lets us trace interactions between multiple services.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/view-jaeger1.png" alt="Jaeger Query">
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/view-jaeger2.png" alt="Jaeger Details">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Jaeger has been invaluable to us because we heavily rely on single-responsibility services that frequently communicate with other services.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dependency-changes"><a class="anchor" href="#dependency-changes"></a>Dependency Changes</h3>
<div class="paragraph">
<p>Dependabot is wired in to let us know when there are changes to any dependencies.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/dependabot.png" alt="Dependabot">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This is especially helpful when our dependencies get released and other projects need to be made aware of it. Since it creates a merge request, the tests are run and we can see if the upgrade will break anything.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="environments-and-pod-health"><a class="anchor" href="#environments-and-pod-health"></a>Environments and Pod Health</h3>
<div class="paragraph">
<p>Every environment is monitored and you can see what pods are active in them by adding a couple of GitLab-specific annotations to the Quarkus Kubernetes configuration.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/view-pods.png" alt="Pod Health">
</div>
</div>
</div>
<div class="sect2">
<h3 id="cluster-logs"><a class="anchor" href="#cluster-logs"></a>Cluster Logs</h3>
<div class="paragraph">
<p>Kubernetes logs can be viewed right from GitLab, eliminating the need for access to the cluster by developers.</p>
</div>
<div class="paragraph">
<p>Logs can be viewed per environment or filtered for specific pods.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/view-logs.png" alt="Cluster Logs">
</div>
</div>
</div>
<div class="sect2">
<h3 id="prometheus-metrics"><a class="anchor" href="#prometheus-metrics"></a>Prometheus Metrics</h3>
<div class="paragraph">
<p>Prometheus metrics are exposed using GitLab&#8217;s monitoring and metrics.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/prom.png" alt="Prometheus Metrics">
</div>
</div>
</div>
<div class="sect2">
<h3 id="value-stream-analytics"><a class="anchor" href="#value-stream-analytics"></a>Value Stream Analytics</h3>
<div class="paragraph">
<p>We can use GitLab&#8217;s <a href="https://docs.gitlab.com/ee/user/analytics/value_stream_analytics.html" target="_blank" rel="noopener">Value Stream Analytics</a> to track the velocity within any project. This gives us rough insights into the time it takes from the moment a ticket is created to when it is deployed.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="/assets/images/posts/quarkus-user-stories/logicdrop/gitlab/valuestream.png" alt="Value Stream Analytics">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion"><a class="anchor" href="#conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Integrating Quarkus deeply into GitLab has added significant value to our process and was well worth the little effort it took.</p>
</div>
<div class="paragraph">
<p>Building upon our <em>level the playing field</em> philosophy, developing, debugging, deploying, and monitoring cloud-native services is more optimal than ever.</p>
</div>
<div class="paragraph">
<p>Because of the natural fit Quarkus has with cloud technologies, and the functionality provided through extensions, we have been able to create a comprehensive DevOps ecosystem that normally would be challenging to set up and orchestrate.</p>
</div>
<div class="paragraph">
<p>Highlights of the new process are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Services can be worked on in isolation</p>
</li>
<li>
<p>Parallelizing builds decreased the time to deliver changes</p>
</li>
<li>
<p>Common tools are available within GitLab</p>
</li>
<li>
<p>Preview services make it easier to collaborate</p>
</li>
<li>
<p>Deployments are completely automated</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At the end of the day, we do not have to train staff on different tools, grant access any further than GitLab, or expose any infrastructure directly.</p>
</div>
<div class="paragraph">
<p>This new process, while it may seem intensive, has been easy to manage and build upon and is completely automated end-to-end with almost no manual intervention.</p>
</div>
<div class="paragraph">
<p>Key functionalities we use are now accessible within GitLab and that helps us to iterate, collaborate, and react quicker.</p>
</div>
</div>
</div>
              
          </div>
          <div class="width-12-12"><div class="share-page">
  <a class="share-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/&title=Automating Quarkus with GitLab" rel="nofollow" target="_blank" title="Share on LinkedIn">
    <i class="fa-brands fa-linkedin fa-xl"></i>
  </a>
  <a class="share-x" href="https://x.com/intent/tweet?text=Automating Quarkus with GitLab&url=https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/&via=quarkusio&related=quarkusio" rel="nofollow" target="_blank" title="Share on X">
    <i class="fa-brands fa-square-x-twitter fa-xl"></i>
  </a>
  <a class="share-facebook" href="https://facebook.com/sharer.php?u=https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" rel="nofollow" target="_blank" title="Share on Facebook">
    <i class="fa-brands fa-square-facebook fa-xl"></i>
  </a>
  <a class="share-reddit" href="http://www.reddit.com/submit?url=https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Reddit" >
    <i class="fa-brands fa-square-reddit fa-xl"></i>
  </a>
  <a class="share-email" href="mailto:?subject=Automating Quarkus with GitLab&amp;body=Automating Quarkus with GitLab https://quarkus.io/blog/logicdrop-automating-quarkus-with-gitlab/" title="Share via Email" >
    <i class="fa-solid fa-envelope fa-xl"></i>
  </a>
</div>
</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="post-page grid-wrapper">
  <div class="width-8-12 width-12-12-m doc-content">
  <script src="https://giscus.app/client.js"
        data-repo="quarkusio/quarkus"
        data-repo-id="MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI="
        data-category="Quarkus Blog/Website"
        data-category-id="DIC_kwDOCFbutM4CAFFV"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
  </script>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

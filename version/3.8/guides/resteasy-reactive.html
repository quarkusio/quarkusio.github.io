<!DOCTYPE html>
<html lang="en">







<head>
  <title>Writing REST Services with RESTEasy Reactive - 3.8 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.8/guides/resteasy-reactive" />
  <meta property="og:title" content="Writing REST Services with RESTEasy Reactive - 3.8" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/resteasy-reactive">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/3.8/guides/resteasy-reactive" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/3.8/guides/resteasy-reactive" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/3.8/guides/resteasy-reactive" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/3.8/guides/resteasy-reactive" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/3.8/guides/resteasy-reactive" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.8/guides/resteasy-reactive" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.8/guides/resteasy-reactive">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/3.8/guides/resteasy-reactive">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.8/guides/resteasy-reactive">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.8/guides/resteasy-reactive">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.8/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <option value="3.8" selected>3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Writing REST Services with RESTEasy Reactive </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide explains how to write REST Services with RESTEasy Reactive in Quarkus.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is the reference guide for RESTEasy Reactive.
For a more lightweight introduction, please refer to the <a href="rest-json">Writing JSON REST services guides</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-resteasy-reactive"><a class="anchor" href="#what-is-resteasy-reactive"></a>What is RESTEasy Reactive?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RESTEasy Reactive is a new <a href="https://jakarta.ee/specifications/restful-ws/3.1/jakarta-restful-ws-spec-3.1.html">Jakarta REST (formerly known as JAX-RS)</a>
implementation written from the ground up to work on our
common <a href="https://vertx.io/">Vert.x</a> layer and is thus fully reactive, while also being very tightly integrated with
Quarkus and consequently moving a lot of work to build time.</p>
</div>
<div class="paragraph">
<p>You should be able to use it in place of any Jakarta REST implementation, but on top of that it has
great performance for both blocking and non-blocking endpoints, and a lot of new features on top
of what Jakarta REST provides.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="writing-endpoints"><a class="anchor" href="#writing-endpoints"></a>Writing endpoints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="getting-started"><a class="anchor" href="#getting-started"></a>Getting started</h3>
<div class="paragraph">
<p>Add the following import to your build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-resteasy-reactive")</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now write your first endpoint in the <code>org.acme.rest.Endpoint</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@Path("")
public class Endpoint {

    @GET
    public String hello() {
        return "Hello, World!";
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="terminology"><a class="anchor" href="#terminology"></a>Terminology</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">REST</dt>
<dd>
<p><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REpresentational State Transfer</a></p>
</dd>
<dt class="hdlist1">Endpoint</dt>
<dd>
<p>Java method which is called to serve a REST call</p>
</dd>
<dt class="hdlist1">URL / URI (Uniform Resource Locator / Identifier)</dt>
<dd>
<p>Used to identify the location of REST resources (<a href="https://tools.ietf.org/html/rfc7230#section-2.7">specification</a>)</p>
</dd>
<dt class="hdlist1">Resource</dt>
<dd>
<p>Represents your domain object. This is what your API serves and modifies. Also called an <code>entity</code> in Jakarta REST.</p>
</dd>
<dt class="hdlist1">Representation</dt>
<dd>
<p>How your resource is represented on the wire, can vary depending on content types</p>
</dd>
<dt class="hdlist1">Content type</dt>
<dd>
<p>Designates a particular representation (also called a media type), for example <code>text/plain</code> or <code>application/json</code></p>
</dd>
<dt class="hdlist1">HTTP</dt>
<dd>
<p>Underlying wire protocol for routing REST calls (see <a href="https://tools.ietf.org/html/rfc7230">HTTP specifications</a>)</p>
</dd>
<dt class="hdlist1">HTTP request</dt>
<dd>
<p>the request part of the HTTP call, consisting of an HTTP method, a target URI, headers and an optional message body</p>
</dd>
<dt class="hdlist1">HTTP response</dt>
<dd>
<p>the response part of the HTTP call, consisting of an HTTP response status, headers and an optional message body</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="declaring-endpoints-uri-mapping"><a class="anchor" href="#declaring-endpoints-uri-mapping"></a>Declaring endpoints: URI mapping</h3>
<div class="paragraph">
<p>Any class annotated with a <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Path.html"><code>@Path</code></a> annotation can have its methods exposed as REST endpoints,
provided they have an HTTP method annotation (see below).</p>
</div>
<div class="paragraph">
<p>That <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Path.html"><code>@Path</code></a> annotation defines the URI prefix under which those methods will be exposed. It can
be empty, or contain a prefix such as <code>rest</code> or <code>rest/V1</code>.</p>
</div>
<div class="paragraph">
<p>Each exposed endpoint method can in turn have another <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Path.html"><code>@Path</code></a> annotation which adds to its containing
class annotation. For example, this defines a <code>rest/hello</code> endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@Path("rest")
public class Endpoint {

    @Path("hello")
    @GET
    public String hello() {
        return "Hello, World!";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#uri-parameters">URI parameters</a> for more information about URI mapping.</p>
</div>
<div class="paragraph">
<p>You can set the root path for all rest endpoints using the <code>@ApplicationPath</code> annotation, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.ApplicationPath;
import jakarta.ws.rs.core.Application;

@ApplicationPath("/api")
public static class MyApplication extends Application {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will cause all rest endpoints to be resolve relative to <code>/api</code>, so the endpoint above with <code>@Path("rest")</code> would
be accessible at <code>/api/rest/</code>. You can also set the <code>quarkus.resteasy-reactive.path</code> build time property to set the root path if you
don&#8217;t want to use an annotation.</p>
</div>
</div>
<div class="sect2">
<h3 id="declaring-endpoints-http-methods"><a class="anchor" href="#declaring-endpoints-http-methods"></a>Declaring endpoints: HTTP methods</h3>
<div class="paragraph">
<p>Each endpoint method must be annotated with one of the following annotations, which defines which HTTP
method will be mapped to the method:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. HTTP method annotations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/GET.html"><code>@GET</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtain a resource representation, should not modify state, <a href="https://tools.ietf.org/html/rfc7231#section-4.2.2">idempotent</a> (<a href="https://tools.ietf.org/html/rfc7231#section-4.3.1">HTTP docs</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/HEAD.html"><code>@HEAD</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtain metadata about a resource, similar to <code>GET</code> with no body (<a href="https://tools.ietf.org/html/rfc7231#section-4.3.2">HTTP docs</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/POST.html"><code>@POST</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a resource and obtain a link to it (<a href="https://tools.ietf.org/html/rfc7231#section-4.3.3">HTTP docs</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/PUT.html"><code>@PUT</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace a resource or create one, should be <a href="https://tools.ietf.org/html/rfc7231#section-4.2.2">idempotent</a> (<a href="https://tools.ietf.org/html/rfc7231#section-4.3.4">HTTP docs</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/DELETE.html"><code>@DELETE</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete an existing resource, <a href="https://tools.ietf.org/html/rfc7231#section-4.2.2">idempotent</a>  (<a href="https://tools.ietf.org/html/rfc7231#section-4.3.5">HTTP docs</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/OPTIONS.html"><code>@OPTIONS</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obtain information about a resource, <a href="https://tools.ietf.org/html/rfc7231#section-4.2.2">idempotent</a> (<a href="https://tools.ietf.org/html/rfc7231#section-4.3.7">HTTP docs</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/PATCH.html"><code>@PATCH</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update a resource, or create one, not <a href="https://tools.ietf.org/html/rfc7231#section-4.2.2">idempotent</a> (<a href="https://tools.ietf.org/html/rfc5789#section-2">HTTP docs</a>)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can also declare other HTTP methods by declaring them as an annotation with the
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/HttpMethod.html"><code>@HttpMethod</code></a> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

import jakarta.ws.rs.HttpMethod;
import jakarta.ws.rs.Path;

@Retention(RetentionPolicy.RUNTIME)
@HttpMethod("CHEESE")
@interface CHEESE {
}

@Path("")
public class Endpoint {

    @CHEESE
    public String hello() {
        return "Hello, Cheese World!";
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="declaring-endpoints-representation-content-types"><a class="anchor" href="#declaring-endpoints-representation-content-types"></a>Declaring endpoints: representation / content types</h3>
<div class="paragraph">
<p>Each endpoint method may consume or produce specific resource representations, which are indicated by
the HTTP <a href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5"><code>Content-Type</code></a> header, which in turn contains
<a href="https://tools.ietf.org/html/rfc7231#section-3.1.1.1">MIME (Media Type)</a> values, such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>text/plain</code> which is the default for any endpoint returning a <code>String</code>.</p>
</li>
<li>
<p><code>text/html</code> for HTML (such as with <a href="qute">Qute templating</a>)</p>
</li>
<li>
<p><code>application/json</code> for a <a href="#json">JSON REST endpoint</a></p>
</li>
<li>
<p><code>text/*</code> which is a sub-type wildcard for any text media type</p>
</li>
<li>
<p><code>*/*</code> which is a wildcard for any media type</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may annotate your endpoint class with the <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Produces.html"><code>@Produces</code></a>
or <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Consumes.html"><code>@Consumes</code></a> annotations, which
allow you to specify one or more media types that your endpoint may accept as HTTP request body
or produce as HTTP response body. Those class annotations apply to each method.</p>
</div>
<div class="paragraph">
<p>Any method may also be annotated with the <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Produces.html"><code>@Produces</code></a>
or <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Consumes.html"><code>@Consumes</code></a> annotations, in which
case they override any eventual class annotation.</p>
</div>
<div class="paragraph">
<p>The <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/MediaType.html"><code>MediaType</code></a> class has many constants you
can use to point to specific pre-defined media types.</p>
</div>
<div class="paragraph">
<p>See the <a href="#negotiation">Negotiation</a> section for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="accessing-request-parameters"><a class="anchor" href="#accessing-request-parameters"></a>Accessing request parameters</h3>
<div id="request-parameters" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
don&#8217;t forget to configure your compiler to generate parameter name information with <code>-parameters</code> (javac)
or <code>&lt;parameters&gt;</code> or <code>&lt;maven.compiler.parameters&gt;</code> (<a href="https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#parameters">Maven</a>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following HTTP request elements may be obtained by your endpoint method:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. HTTP request parameter annotations</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP element</th>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="path-parameter"></a>Path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestPath.html"><code>@RestPath</code></a> (or nothing)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI template parameter (simplified version of the <a href="https://tools.ietf.org/html/rfc6570">URI Template specification</a>),
see <a href="#uri-parameters">URI parameters</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestQuery.html"><code>@RestQuery</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of a <a href="https://tools.ietf.org/html/rfc3986#section-3.4">URI query parameter</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestHeader.html"><code>@RestHeader</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of an <a href="https://tools.ietf.org/html/rfc7230#section-3.2">HTTP header</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cookie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestCookie.html"><code>@RestCookie</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of an <a href="https://tools.ietf.org/html/rfc6265#section-4.2">HTTP cookie</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Form parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestForm.html"><code>@RestForm</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of an <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST">HTTP URL-encoded FORM</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matrix parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestMatrix.html"><code>@RestMatrix</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value of an <a href="https://tools.ietf.org/html/rfc3986#section-3.3">URI path segment parameter</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For each of those annotations, you may specify the name of the element they refer to,
otherwise, they will use the name of the annotated method parameter.</p>
</div>
<div class="paragraph">
<p>If a client made the following HTTP call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">POST /cheeses;variant=goat/tomme?age=matured HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Cookie: level=hardcore
X-Cheese-Secret-Handshake: fist-bump

smell=strong</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you could obtain all the various parameters with this endpoint method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.POST;
import jakarta.ws.rs.Path;

import org.jboss.resteasy.reactive.RestCookie;
import org.jboss.resteasy.reactive.RestForm;
import org.jboss.resteasy.reactive.RestHeader;
import org.jboss.resteasy.reactive.RestMatrix;
import org.jboss.resteasy.reactive.RestPath;
import org.jboss.resteasy.reactive.RestQuery;

@Path("/cheeses/{type}")
public class Endpoint {

    @POST
    public String allParams(@RestPath String type,
                            @RestMatrix String variant,
                            @RestQuery String age,
                            @RestCookie String level,
                            @RestHeader("X-Cheese-Secret-Handshake")
                            String secretHandshake,
                            @RestForm String smell) {
        return type + "/" + variant + "/" + age + "/" + level + "/"
            + secretHandshake + "/" + smell;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestPath.html"><code>@RestPath</code></a>
annotation is optional: any parameter whose name matches an existing URI
template variable will be automatically assumed to have <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestPath.html"><code>@RestPath</code></a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also use any of the Jakarta REST annotations <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/PathParam.html"><code>@PathParam</code></a>,
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/QueryParam.html"><code>@QueryParam</code></a>,
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/HeaderParam.html"><code>@HeaderParam</code></a>,
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/CookieParam.html"><code>@CookieParam</code></a>,
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/FormParam.html"><code>@FormParam</code></a> or
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/MatrixParam.html"><code>@MatrixParam</code></a> for this,
but they require you to specify the parameter name.</p>
</div>
<div class="paragraph">
<p>See <a href="#parameter-mapping">Parameter mapping</a> for more advanced use-cases.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When an exception occurs in RESTEasy Reactive request parameter handling code, the exception is not printed by default to the log (for security reasons).
This can sometimes make it hard to understand why certain HTTP status codes are returned (as the Jakarta REST mandates the use of non-intuitive error codes in various cases).
In such cases, users are encouraged to set the logging level for the <code>org.jboss.resteasy.reactive.server.handlers.ParameterHandler</code> category to <code>DEBUG</code> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.log.category."org.jboss.resteasy.reactive.server.handlers.ParameterHandler".level=DEBUG</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="grouping-parameters-in-a-custom-class"><a class="anchor" href="#grouping-parameters-in-a-custom-class"></a>Grouping parameters in a custom class</h4>
<div id="parameter-grouping" class="paragraph">
<p>You can group your request parameters in a container class instead of declaring them as method parameters to you endpoint,
so we can rewrite the previous example like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.POST;
import jakarta.ws.rs.Path;

import org.jboss.resteasy.reactive.RestCookie;
import org.jboss.resteasy.reactive.RestForm;
import org.jboss.resteasy.reactive.RestHeader;
import org.jboss.resteasy.reactive.RestMatrix;
import org.jboss.resteasy.reactive.RestPath;
import org.jboss.resteasy.reactive.RestQuery;

@Path("/cheeses/{type}")
public class Endpoint {

    public static class Parameters {
        @RestPath
        String type;

        @RestMatrix
        String variant;

        @RestQuery
        String age;

        @RestCookie
        String level;

        @RestHeader("X-Cheese-Secret-Handshake")
        String secretHandshake;

        @RestForm
        String smell;
    }

    @POST
    public String allParams(@BeanParam Parameters parameters) { <i class="conum" data-value="1"></i><b>(1)</b>
        return parameters.type + "/" + parameters.variant + "/" + parameters.age
            + "/" + parameters.level + "/" + parameters.secretHandshake
            + "/" + parameters.smell;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>BeanParam</code> is required to comply with the Jakarta REST specification so that libraries like OpenAPI can introspect the parameters.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="uri-parameters"><a class="anchor" href="#uri-parameters"></a><a id="declaring-uri-parameters"></a> Declaring URI parameters</h3>
<div class="paragraph">
<p>You can declare URI parameters and use regular expressions in your path, so for instance
the following endpoint will serve requests for <code>/hello/stef/23</code> and <code>/hello</code> but not
<code>/hello/stef/0x23</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@Path("hello")
public class Endpoint {

    @Path("{name}/{age:\\d+}")
    @GET
    public String personalisedHello(String name, int age) {
        return "Hello " + name + " is your age really " + age + "?";
    }

    @GET
    public String genericHello() {
        return "Hello stranger";
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="accessing-the-request-body"><a class="anchor" href="#accessing-the-request-body"></a>Accessing the request body</h3>
<div class="paragraph">
<p>Any method parameter with no annotation will receive the method body.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, after it has been mapped from
its HTTP representation to the Java type of the parameter.</p>
</div>
<div class="paragraph">
<p>The following parameter types will be supported out of the box:</p>
</div>
<table id="resource-types" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Request body parameter types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html"><code>File</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entire request body in a temporary file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entire request body, not decoded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>char[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entire request body, decoded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html"><code>String</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entire request body, decoded</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html"><code>InputStream</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request body in a blocking stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Reader.html"><code>Reader</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request body in a blocking stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">All Java primitives and their wrapper classes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java primitive types</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html"><code>BigDecimal</code></a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigInteger.html"><code>BigInteger</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large integers and decimals.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.json/jakarta.json-api/2.1.2/jakarta.json/jakarta/json/JsonArray.html"><code>JsonArray</code></a>, <a href="https://javadoc.io/doc/jakarta.json/jakarta.json-api/2.1.2/jakarta.json/jakarta/json/JsonObject.html"><code>JsonObject</code></a>,
<a href="https://javadoc.io/doc/jakarta.json/jakarta.json-api/2.1.2/jakarta.json/jakarta/json/JsonStructure.html"><code>JsonStructure</code></a>, <a href="https://javadoc.io/doc/jakarta.json/jakarta.json-api/2.1.2/jakarta.json/jakarta/json/JsonValue.html"><code>JsonValue</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON value types</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/static/io.vertx/vertx-core/4.4.6/io/vertx/core/buffer/Buffer.html"><code>Buffer</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vert.x Buffer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any other type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will be <a href="#json">mapped from JSON to that type</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can add support for more <a href="#readers-writers">body parameter types</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="multipart"><a class="anchor" href="#multipart"></a>Handling Multipart Form data</h3>
<div class="paragraph">
<p>To handle HTTP requests that have <code>multipart/form-data</code> as their content type, you can use the regular
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestForm.html"><code>@RestForm</code></a> annotation, but we have special types
that allow you to access the parts as files or as entities.
Let us look at an example of its use.</p>
</div>
<div class="paragraph">
<p>Assuming an HTTP request containing a file upload, a JSON entity and a form value containing a string description, we could write
the following endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.ws.rs.POST;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.MediaType;

import org.jboss.resteasy.reactive.PartType;
import org.jboss.resteasy.reactive.RestForm;
import org.jboss.resteasy.reactive.multipart.FileUpload;

@Path("multipart")
public class MultipartResource {
    public static class Person {
        public String firstName;
        public String lastName;
    }

    @POST
    public void multipart(@RestForm String description,
            @RestForm("image") FileUpload file,
            @RestForm @PartType(MediaType.APPLICATION_JSON) Person person) {
        // do something
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>description</code> parameter will contain the data contained in the part of HTTP request called <code>description</code> (because
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestForm.html"><code>@RestForm</code></a> does not define a value, the field name is used),
while the <code>file</code> parameter will contain data about the uploaded file in the <code>image</code> part of HTTP request, and
the <code>person</code> parameter will read the <code>Person</code> entity using the <code>JSON</code> <a href="#json">body reader</a>.</p>
</div>
<div class="paragraph">
<p>The size of every part in a multipart request must conform to the value of <code>quarkus.http.limits.max-form-attribute-size</code>, for which the default is 2048 bytes.
Any request with a part of a size exceeding this configuration will result in HTTP status code 413.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/multipart/FileUpload.html"><code>FileUpload</code></a>
provides access to various metadata of the uploaded file. If however all you need is a handle to the uploaded file, <code>java.nio.file.Path</code> or <code>java.io.File</code> could be used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you need access to all uploaded files for all parts regardless of their names, you can do it with <code>@RestForm(FileUpload.ALL) List&lt;FileUpload&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/PartType.html"><code>@PartType</code></a> is used to aid
in deserialization of the corresponding part of the request into the desired Java type. It is only required if
you need to use a <a href="#readers-writers">special body parameter type</a> for that particular parameter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Just like for any other request parameter type, you can also group them into a <a href="#parameter-grouping">container class</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When handling file uploads, it is very important to move the file to permanent storage (like a database, a dedicated file system or a cloud storage) in your code that handles the POJO.
Otherwise, the file will no longer be accessible when the request terminates.
Moreover, if <code>quarkus.http.body.delete-uploaded-files-on-end</code> is set to true, Quarkus will delete the uploaded file when the HTTP response is sent. If the setting is disabled,
the file will reside on the file system of the server (in the directory defined by the <code>quarkus.http.body.uploads-directory</code> configuration option), but as the uploaded files are saved
with a UUID file name and no additional metadata is saved, these files are essentially a random dump of files.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When a Resource method needs to handle various types of multipart requests, then the <code>org.jboss.resteasy.reactive.server.multipart.MultipartFormDataInput</code> method type can be used as provides access to all the parts of the request.</p>
</div>
<div class="paragraph">
<p>The following code shows a simple example where we iterate over the parts and return a list of aggregated data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/test")
public static class Resource {

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Item&gt; hello(MultipartFormDataInput input) throws IOException {
        Map&lt;String, Collection&lt;FormValue&gt;&gt; map = input.getValues();
        List&lt;Item&gt; items = new ArrayList&lt;&gt;();
        for (var entry : map.entrySet()) {
            for (FormValue value : entry.getValue()) {
                items.add(new Item(
                        entry.getKey(),
                        value.isFileItem() ? value.getFileItem().getFileSize() : value.getValue().length(),
                        value.getCharset(),
                        value.getFileName(),
                        value.isFileItem(),
                        value.getHeaders()));
            }

        }
        return items;
    }

    public static class Item {
        public final String name;
        public final long size;
        public final String charset;
        public final String fileName;
        public final boolean isFileItem;
        public final Map&lt;String, List&lt;String&gt;&gt; headers;

        public Item(String name, long size, String charset, String fileName, boolean isFileItem,
                Map&lt;String, List&lt;String&gt;&gt; headers) {
            this.name = name;
            this.size = size;
            this.charset = charset;
            this.fileName = fileName;
            this.isFileItem = isFileItem;
            this.headers = headers;
        }
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="handling-malformed-input"><a class="anchor" href="#handling-malformed-input"></a>Handling malformed input</h4>
<div class="paragraph">
<p>As part of reading the multipart body, RESTEasy Reactive invokes the proper MessageBodyReader<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/MessageBodyReader.html"><code>MessageBodyReader</code></a> for each part of the request.
If an <code>IOException</code> occurs for one of these parts (for example if Jackson was unable to deserialize a JSON part), then a <code>org.jboss.resteasy.reactive.server.multipart.MultipartPartReadingException</code> is thrown.
If this exception is not handled by the application as mentioned in <a href="#exception-mapping">Exception mapping</a>, an HTTP 400 response is returned by default.</p>
</div>
</div>
<div class="sect3">
<h4 id="multipart-output"><a class="anchor" href="#multipart-output"></a>Multipart output</h4>
<div class="paragraph">
<p>Similarly, RESTEasy Reactive can produce Multipart Form data to allow users download files from the server. For example, we could write a POJO
that will hold the information we want to expose as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.ws.rs.core.MediaType;

import org.jboss.resteasy.reactive.PartType;
import org.jboss.resteasy.reactive.RestForm;

public class DownloadFormData {

    @RestForm
    String name;

    @RestForm
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    File file;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then expose this POJO via a Resource like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("multipart")
public class Endpoint {

    @GET
    @Produces(MediaType.MULTIPART_FORM_DATA)
    @Path("file")
    public DownloadFormData getFile() {
        // return something
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, you can also manually append the parts of the form using the class <code>MultipartFormDataOutput</code> as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

import org.jboss.resteasy.reactive.server.multipart.MultipartFormDataOutput;

@Path("multipart")
public class Endpoint {

    @GET
    @Produces(MediaType.MULTIPART_FORM_DATA)
    @Path("file")
    public MultipartFormDataOutput getFile() {
        MultipartFormDataOutput form = new MultipartFormDataOutput();
        form.addFormData("person", new Person("John"), MediaType.APPLICATION_JSON_TYPE);
        form.addFormData("status", "a status", MediaType.TEXT_PLAIN_TYPE)
                .getHeaders().putSingle("extra-header", "extra-value");
        return form;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This last approach allows you adding extra headers to the output part.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
For the time being, returning Multipart data is limited to be blocking endpoints.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="returning-a-response-body"><a class="anchor" href="#returning-a-response-body"></a>Returning a response body</h3>
<div class="paragraph">
<p>In order to return an HTTP response, simply return the resource you want from your method. The method
return type and its optional content type will be used to decide how to serialise it to the HTTP
response (see the <a href="#negotiation">Negotiation</a> section for more advanced information).</p>
</div>
<div class="paragraph">
<p>You can return any of the pre-defined types that you can read from the <a href="#resource-types">HTTP response</a>,
and any other type will be mapped <a href="#json">from that type to JSON</a>.</p>
</div>
<div class="paragraph">
<p>In addition, the following return types are also supported:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Additional response body parameter types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Path.html"><code>Path</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The contents of the file specified by the given path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/PathPart.html"><code>PathPart</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The partial contents of the file specified by the given path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/FilePart.html"><code>FilePart</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The partial contents of a file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/static/io.vertx/vertx-core/4.4.6/io/vertx/core/file/AsyncFile.html"><code>AsyncFile</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vert.x AsyncFile, which can be in full, or partial</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Alternately, you can also return a <a href="#reactive">reactive type</a> such as <a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni</code></a>,
<a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Multi.html"><code>Multi</code></a> or
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html"><code>CompletionStage</code></a>
that resolve to one of the mentioned return types.</p>
</div>
</div>
<div class="sect2">
<h3 id="setting-other-response-properties"><a class="anchor" href="#setting-other-response-properties"></a>Setting other response properties</h3>
<div class="sect3">
<h4 id="manually-setting-the-response"><a class="anchor" href="#manually-setting-the-response"></a>Manually setting the response</h4>
<div class="paragraph">
<p>If you need to set more properties on the HTTP response than just the body, such as the status code
or headers, you can make your method return <code>org.jboss.resteasy.reactive.RestResponse</code> from a resource method.
An example of this could look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.time.Duration;
import java.time.Instant;
import java.util.Date;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.MediaType;
import jakarta.ws.rs.core.NewCookie;

import org.jboss.resteasy.reactive.RestResponse;
import org.jboss.resteasy.reactive.RestResponse.ResponseBuilder;

@Path("")
public class Endpoint {

    @GET
    public RestResponse&lt;String&gt; hello() {
        // HTTP OK status with text/plain content type
        return ResponseBuilder.ok("Hello, World!", MediaType.TEXT_PLAIN_TYPE)
         // set a response header
         .header("X-Cheese", "Camembert")
         // set the Expires response header to two days from now
         .expires(Date.from(Instant.now().plus(Duration.ofDays(2))))
         // send a new cookie
         .cookie(new NewCookie("Flavour", "chocolate"))
         // end of builder API
         .build();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also use the Jakarta REST type <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Response.html"><code>Response</code></a> but it is
not strongly typed to your entity.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="using-annotations"><a class="anchor" href="#using-annotations"></a>Using annotations</h4>
<div class="paragraph">
<p>Alternatively, if you only need to set the status code and / or HTTP headers with static values, you can use <code>@org.jboss.resteasy.reactive.ResponseStatus</code> and /or <code>ResponseHeader</code> respectively.
An example of this could look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import org.jboss.resteasy.reactive.Header;
import org.jboss.resteasy.reactive.ResponseHeader;
import org.jboss.resteasy.reactive.ResponseStatus;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

@Path("")
public class Endpoint {

    @ResponseStatus(201)
    @ResponseHeader(name = "X-Cheese", value = "Camembert")
    @GET
    public String hello() {
        return "Hello, World!";
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redirect-support"><a class="anchor" href="#redirect-support"></a>Redirect support</h3>
<div class="paragraph">
<p>When handling a <code>@POST</code>, <code>@PUT</code> or <code>@DELETE</code> endpoint, it is common practice to redirect to a <code>@GET</code> endpoint after the action has been performed to allow the user to reload the page without triggering the action a second time.
There are multiple ways to achieve this.</p>
</div>
<div class="sect3">
<h4 id="using-restresponse"><a class="anchor" href="#using-restresponse"></a>Using RestResponse</h4>
<div class="paragraph">
<p>Using <code>RestResponse</code> as the return type while making sure the proper redirection URI is created can be done as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.atomic.AtomicLong;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.POST;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.Context;
import jakarta.ws.rs.core.UriInfo;
import org.jboss.resteasy.reactive.RestResponse;

@Path("/fruits")
public class FruitResource {

    public static class Fruit {
        public Long id;
        public String name;
        public String description;

        public Fruit() {
        }

        public Fruit(Long id, String name, String description) {
            this.id = id;
            this.name = name;
            this.description = description;
        }
    }

    private final Map&lt;Long, Fruit&gt; fruits = new ConcurrentHashMap&lt;&gt;();
    private final AtomicLong ids = new AtomicLong(0);


    public FruitResource() {
        Fruit apple = new Fruit(ids.incrementAndGet(), "Apple", "Winter fruit");
        fruits.put(apple.id, apple);
        Fruit pinneapple = new Fruit(ids.incrementAndGet(), "Pineapple", "Tropical fruit");
        fruits.put(pinneapple.id, pinneapple);
    }

    // when invoked, this method will result in an HTTP redirect to the GET method that obtains the fruit by id
    @POST
    public RestResponse&lt;Fruit&gt; add(Fruit fruit, @Context UriInfo uriInfo) {
        fruit.id = ids.incrementAndGet();
        fruits.put(fruit.id, fruit);
        // seeOther results in an HTTP 303 response with the Location header set to the value of the URI
        return RestResponse.seeOther(uriInfo.getAbsolutePathBuilder().path(Long.toString(fruit.id)).build());
    }

    @GET
    @Path("{id}")
    public Fruit byId(Long id) {
        return fruits.get(id);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-redirectexception"><a class="anchor" href="#using-redirectexception"></a>Using RedirectException</h4>
<div class="paragraph">
<p>Users can also throw <code>jakarta.ws.rs.RedirectionException</code> from a method body to get RESTEasy Reactive to perform the desired redirect.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="asyncreactive-support"><a class="anchor" href="#asyncreactive-support"></a>Async/reactive support</h3>
<div id="reactive" class="paragraph">
<p>If your endpoint method needs to accomplish an asynchronous or reactive task before
being able to answer, you can declare your method to return the
<a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni</code></a> type (from <a href="https://smallrye.io/smallrye-mutiny/">Mutiny</a>), in which
case the current HTTP request will be automatically suspended after your method, until
the returned <a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni</code></a> instance resolves to a value,
which will be mapped to a response exactly according to the previously described rules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import io.smallrye.mutiny.Uni;

@Path("escoffier")
public class Endpoint {

    @GET
    public Uni&lt;Book&gt; culinaryGuide() {
        return Book.findByIsbn("978-2081229297");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This allows you to not block the event-loop thread while the book is being fetched from the
database, and allows Quarkus to serve more requests until your book is ready to
be sent to the client and terminate this request.
See <a href="#execution-model">Execution Model documentation</a> for more information.</p>
</div>
<div class="paragraph">
<p>The <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletionStage.html"><code>CompletionStage</code></a> return
type is also supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="streaming-support"><a class="anchor" href="#streaming-support"></a>Streaming support</h3>
<div class="paragraph">
<p>If you want to stream your response element by element, you can make your endpoint method return a
<a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Multi.html"><code>Multi</code></a> type (from <a href="https://smallrye.io/smallrye-mutiny/">Mutiny</a>).
This is especially useful for streaming text or binary data.</p>
</div>
<div class="paragraph">
<p>This example, using <a href="https://github.com/quarkiverse/quarkus-reactive-messaging-http">Reactive Messaging HTTP</a> shows how to stream
text data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import org.eclipse.microprofile.reactive.messaging.Channel;

import io.smallrye.mutiny.Multi;

@Path("logs")
public class Endpoint {

    @Inject
    @Channel("log-out")
    Multi&lt;String&gt; logs;

    @GET
    public Multi&lt;String&gt; streamLogs() {
        return logs;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Response filters are <strong>not</strong> invoked on streamed responses, because they would give a false
impression that you can set headers or HTTP status codes, which is not true after the initial
response.
Exception mappers are also not invoked because part of the response may already have been written.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="customizing-headers-and-status"><a class="anchor" href="#customizing-headers-and-status"></a>Customizing headers and status</h4>
<div class="paragraph">
<p>If you need to set custom HTTP headers and / or the HTTP response, then you can return <code>org.jboss.resteasy.reactive.RestMulti</code> instead, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import org.eclipse.microprofile.reactive.messaging.Channel;

import io.smallrye.mutiny.Multi;
import org.jboss.resteasy.reactive.RestMulti;

@Path("logs")
public class Endpoint {

    @Inject
    @Channel("log-out")
    Multi&lt;String&gt; logs;

    @GET
    public Multi&lt;String&gt; streamLogs() {
        return RestMulti.fromMultiData(logs).status(222).header("foo", "bar").build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In more advanced cases where the headers and / or status can only be obtained from the results of an async call, the <code>RestMulti.fromUniResponse</code> needs to be used.
Here is an example of such a use case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import java.util.List;import java.util.Map;import org.eclipse.microprofile.reactive.messaging.Channel;

import io.smallrye.mutiny.Multi;
import org.jboss.resteasy.reactive.RestMulti;

@Path("logs")
public class Endpoint {

    interface SomeService {
        Uni&lt;SomeResponse&gt; get();
    }

    interface SomeResponse {
        Multi&lt;byte[]&gt; data;

        String myHeader();
    }

    private final SomeService someService;

    public Endpoint(SomeService someService) {
        this.someService = someService;
    }

    @GET
    public Multi&lt;String&gt; streamLogs() {
        return RestMulti.fromUniResponse(someService.get(), SomeResponse::data, (r -&gt; Map.of("MyHeader", List.of(r.myHeader()))));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="server-sent-event-sse-support"><a class="anchor" href="#server-sent-event-sse-support"></a>Server-Sent Event (SSE) support</h3>
<div class="paragraph">
<p>If you want to stream JSON objects in your response, you can use
<a href="https://html.spec.whatwg.org/multipage/server-sent-events.html">Server-Sent Events</a>
by just annotating your endpoint method with
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Produces.html"><code>@Produces(MediaType.SERVER_SENT_EVENTS)</code></a>
and specifying that each element should be <a href="#json">serialised to JSON</a> with
<code>@RestStreamElementType(MediaType.APPLICATION_JSON)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

import org.jboss.resteasy.reactive.RestStreamElementType;

import io.smallrye.mutiny.Multi;

import org.eclipse.microprofile.reactive.messaging.Channel;

@Path("escoffier")
public class Endpoint {

    // Inject our Book channel
    @Inject
    @Channel("book-out")
    Multi&lt;Book&gt; books;

    @GET
    // Each element will be sent as JSON
    @RestStreamElementType(MediaType.APPLICATION_JSON)
    // by using @RestStreamElementType, we don't need to add @Produces(MediaType.SERVER_SENT_EVENTS)
    public Multi&lt;Book&gt; stream() {
        return books;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes it&#8217;s useful to create a customized SSE message, for example if you need to specify the <code>event</code> field of a SSE message to distinguish various event types.
A resource method may return <code>Multi&lt;jakarta.ws.rs.sse.OutboundSseEvent&gt;</code> and an injected <code>jakarta.ws.rs.sse.Sse</code> can be used to create <code>OutboundSseEvent</code> instances.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;
import jakarta.ws.rs.sse.OutboundSseEvent;
import jakarta.ws.rs.sse.Sse;

import org.jboss.resteasy.reactive.RestStreamElementType;

import io.smallrye.mutiny.Multi;

import org.eclipse.microprofile.reactive.messaging.Channel;

@Path("escoffier")
public class Endpoint {

    @Inject
    @Channel("book-out")
    Multi&lt;Book&gt; books;

    @Inject
    Sse sse; <i class="conum" data-value="1"></i><b>(1)</b>

    @GET
    @RestStreamElementType(MediaType.TEXT_PLAIN)
    public Multi&lt;OutboundSseEvent&gt; stream() {
        return books.map(book -&gt; sse.newEventBuilder() <i class="conum" data-value="2"></i><b>(2)</b>
            .name("book")  <i class="conum" data-value="3"></i><b>(3)</b>
            .data(book.title) <i class="conum" data-value="4"></i><b>(4)</b>
            .build());
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Inject the server-side entry point for creating <code>OutboundSseEvent</code>s.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create a new outbound event builder.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the event name, i.e. the value of the <code>event</code> field of a SSE message.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Set the data, i.e. the value of the <code>data</code> field of a SSE message.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Manipulation of the returned HTTP headers and status code is not possible via <code>RestMulti.fromUniResponse</code> because when returning SSE responses the headers and status code cannot be delayed until the response becomes available.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="controlling-http-caching-features"><a class="anchor" href="#controlling-http-caching-features"></a>Controlling HTTP Caching features</h3>
<div class="paragraph">
<p>RESTEasy Reactive provides the <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/Cache.html"><code>@Cache</code></a>
and <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/NoCache.html"><code>@NoCache</code></a> annotations to facilitate
handling HTTP caching semantics, i.e. setting the 'Cache-Control' HTTP header.</p>
</div>
<div class="paragraph">
<p>These annotations can be placed either on a Resource Method or a Resource Class (in which case it applies to all Resource Methods of the class that do <strong>not</strong> contain the same annotation) and allow users
to return domain objects and not have to deal with building up the <code>Cache-Control</code> HTTP header explicitly.</p>
</div>
<div class="paragraph">
<p>While <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/Cache.html"><code>@Cache</code></a>
builds a complex <code>Cache-Control</code> header, <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/NoCache.html"><code>@NoCache</code></a>
is a simplified notation to say that you don&#8217;t want anything cached; i.e. <code>Cache-Control: nocache</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
More information on the <code>Cache-Control</code> header and be found in <a href="https://datatracker.ietf.org/doc/html/rfc7234">RFC 7234</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="accessing-context-objects"><a class="anchor" href="#accessing-context-objects"></a>Accessing context objects</h3>
<div id="context-objects" class="paragraph">
<p>There are a number of contextual objects that the framework will give you, if your endpoint
method takes parameters of the following type:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Contextual objects</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/HttpHeaders.html"><code>HttpHeaders</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All the request headers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/container/ResourceInfo.html"><code>ResourceInfo</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information about the current endpoint method and class (requires reflection)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/SecurityContext.html"><code>SecurityContext</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access to the current user and roles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive/3.8.6.1/org/jboss/resteasy/reactive/server/SimpleResourceInfo.html"><code>SimpleResourceInfo</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information about the current endpoint method and class (no reflection required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/UriInfo.html"><code>UriInfo</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides information about the current endpoint and application URI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Application.html"><code>Application</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Current Jakarta REST application class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Configuration.html"><code>Configuration</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Configuration about the deployed Jakarta REST application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/Providers.html"><code>Providers</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Runtime access to Jakarta REST providers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Request.html"><code>Request</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Access to the current HTTP method and <a href="#preconditions">Preconditions</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/ResourceContext.html"><code>ResourceContext</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: access to instances of endpoints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive/3.8.6.1/org/jboss/resteasy/reactive/server/spi/ServerRequestContext.html"><code>ServerRequestContext</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: RESTEasy Reactive access to the current request/response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/sse/Sse.html"><code>Sse</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Complex SSE use-cases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/static/io.vertx/vertx-core/4.4.6/io/vertx/core/http/HttpServerRequest.html"><code>HttpServerRequest</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Vert.x HTTP Request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/static/io.vertx/vertx-core/4.4.6/io/vertx/core/http/HttpServerResponse.html"><code>HttpServerResponse</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced: Vert.x HTTP Response</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, here is how you can return the name of the currently logged-in user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.security.Principal;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.SecurityContext;

@Path("user")
public class Endpoint {

    @GET
    public String userName(SecurityContext security) {
        Principal user = security.getUserPrincipal();
        return user != null ? user.getName() : "&lt;NOT LOGGED IN&gt;";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also inject those context objects using
<a href="https://javadoc.io/static/jakarta.inject/jakarta.inject-api/2.0.1/jakarta.inject/jakarta/inject/Inject.html"><code>@Inject</code></a> on fields of the same
type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.security.Principal;

import jakarta.inject.Inject;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.SecurityContext;

@Path("user")
public class Endpoint {

    @Inject
    SecurityContext security;

    @GET
    public String userName() {
        Principal user = security.getUserPrincipal();
        return user != null ? user.getName() : "&lt;NOT LOGGED IN&gt;";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or even on your endpoint constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.security.Principal;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.SecurityContext;

@Path("user")
public class Endpoint {

    SecurityContext security;

    Endpoint(SecurityContext security) {
        this.security = security;
    }

    @GET
    public String userName() {
        Principal user = security.getUserPrincipal();
        return user != null ? user.getName() : "&lt;NOT LOGGED IN&gt;";
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="json-serialisation"><a class="anchor" href="#json-serialisation"></a>JSON serialisation</h3>
<div id="json" class="paragraph">
<p>Instead of importing <code>io.quarkus:quarkus-resteasy-reactive</code>, you can import either of the following modules to get support for JSON:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">GAV</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.quarkus:quarkus-resteasy-reactive-jackson</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/FasterXML/jackson">Jackson support</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.quarkus:quarkus-resteasy-reactive-jsonb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://eclipse-ee4j.github.io/jsonb-api/">JSON-B support</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In both cases, importing those modules will allow HTTP message bodies to be read from JSON
and serialised to JSON, for <a href="#resource-types">all the types not already registered with a more specific
serialisation</a>.</p>
</div>
<div class="sect3">
<h4 id="advanced-jackson-specific-features"><a class="anchor" href="#advanced-jackson-specific-features"></a>Advanced Jackson-specific features</h4>
<div class="paragraph">
<p>When using the <code>quarkus-resteasy-reactive-jackson</code> extension there are some advanced features that RESTEasy Reactive supports.</p>
</div>
<div class="sect4">
<h5 id="secure-serialization"><a class="anchor" href="#secure-serialization"></a>Secure serialization</h5>
<div class="paragraph">
<p>When used with Jackson to perform JSON serialization, RESTEasy Reactive provides the ability to limit the set of fields that are serialized based on the roles of the current user.
This is achieved by simply annotating the fields (or getters) of the POJO being returned with <code>@io.quarkus.resteasy.reactive.jackson.SecureField</code>.</p>
</div>
<div class="paragraph">
<p>A simple example could be the following:</p>
</div>
<div class="paragraph">
<p>Assume we have a POJO named <code>Person</code> which looks like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import io.quarkus.resteasy.reactive.jackson.SecureField;

public class Person {

    @SecureField(rolesAllowed = "admin")
    private final Long id;
    private final String first;
    private final String last;
    @SecureField(rolesAllowed = "${role:admin}")                 <i class="conum" data-value="1"></i><b>(1)</b>
    private String address;

    public Person(Long id, String first, String last, String address) {
        this.id = id;
        this.first = first;
        this.last = last;
        this.address = address;
    }

    public Long getId() {
        return id;
    }

    public String getFirst() {
        return first;
    }

    public String getLast() {
        return last;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>io.quarkus.resteasy.reactive.jackson.SecureField.rolesAllowed</code> property supports <a href="config-reference#property-expressions">property expressions</a>
exactly in the same fashion the <code>jakarta.annotation.security.RolesAllowed</code> annotation does. For more information, please
refer to the <a href="security-authorize-web-endpoints-reference#standard-security-annotations">Standard security annotations</a>
section of the Authorization of web endpoints guide.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A very simple Jakarta REST Resource that uses <code>Person</code> could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import static jakarta.ws.rs.core.MediaType.APPLICATION_JSON;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.Response;

@Path("person")
public class PersonResource {

    @Path("{id}")
    @GET
    public Person getPerson(Long id) {
        return new Person(id, "foo", "bar", "Brick Lane");
    }

    @Produces(APPLICATION_JSON) <i class="conum" data-value="1"></i><b>(1)</b>
    @Path("/friend/{id}")
    @GET
    public Response getPersonFriend(Long id) {
        var person = new Person(id, "foo", "bar", "Brick Lane");
        return Response.ok(person).build();
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@SecureField</code> annotation is only effective when Quarkus recognizes that produced content type is the 'application/json' type.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Currently you cannot use the <code>@SecureField</code> annotation to secure your data returned from resource methods returning the <code>io.smallrye.mutiny.Multi</code> reactive type.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All resource methods returning data secured with the <code>@SecureField</code> annotation should be tested.
Please make sure data are secured as you intended.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Assuming security has been set up for the application (see our <a href="security-overview">guide</a> for more details), when a user with the <code>admin</code> role
performs an HTTP GET on <code>/person/1</code> they will receive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": 1,
  "first": "foo",
  "last": "bar",
  "address", "Brick Lane"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>as the response.</p>
</div>
<div class="paragraph">
<p>Any user however that does not have the <code>admin</code> role will receive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "first": "foo",
  "last": "bar"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
No additional configuration needs to be applied for this secure serialization to take place. However, users can use the <code>@io.quarkus.resteasy.reactive.jackson.EnableSecureSerialization</code> and <code>@io.quarkus.resteasy.reactive.jackson.DisableSecureSerialization</code>
annotation to opt in or out for specific Jakarta REST Resource classes or methods.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Configuration expressions set with the <code>SecureField.rolesAllowed</code> property are validated during application startup even when the <code>@io.quarkus.resteasy.reactive.jackson.DisableSecureSerialization</code> annotation is used.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="jsonview-support"><a class="anchor" href="#jsonview-support"></a>@JsonView support</h5>
<div class="paragraph">
<p>Jakarta REST methods can be annotated with <a href="https://fasterxml.github.io/jackson-annotations/javadoc/2.10/com/fasterxml/jackson/annotation/JsonView.html">@JsonView</a>
in order to customize the serialization of the returned POJO, on a per method-basis. This is best explained with an example.</p>
</div>
<div class="paragraph">
<p>A typical use of <code>@JsonView</code> is to hide certain fields on certain methods. In that vein, let&#8217;s define two views:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Views {

    public static class Public {
    }

    public static class Private extends Public {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s assume we have the <code>User</code> POJO on which we want to hide some field during serialization. A simple example of this is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class User {

    @JsonView(Views.Private.class)
    public int id;

    @JsonView(Views.Public.class)
    public String name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the Jakarta REST method that returns this user, we might want to exclude the <code>id</code> field from serialization.
For example, you might want an insecure method to not expose this field.
The way we can achieve that in RESTEasy Reactive is shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@JsonView(Views.Public.class)
@GET
@Path("/public")
public User userPublic() {
    return testUser();
}

@JsonView(Views.Private.class)
@GET
@Path("/private")
public User userPrivate() {
    return testUser();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the result the <code>userPublic</code> method is serialized, the <code>id</code> field will not be contained in the response as the <code>Public</code> view does not include it.
The result of <code>userPrivate</code> however will include the <code>id</code> as expected when serialized.</p>
</div>
</div>
<div class="sect4">
<h5 id="completely-customized-per-method-serializationdeserialization"><a class="anchor" href="#completely-customized-per-method-serializationdeserialization"></a>Completely customized per method serialization/deserialization</h5>
<div class="paragraph">
<p>There are times when you need to completely customize the serialization/deserialization of a POJO on a per Jakarta REST method basis or on a per Jakarta REST resource basis. For such use cases, you can use the <code>@io.quarkus.resteasy.reactive.jackson.CustomSerialization</code> and <code>@io.quarkus.resteasy.reactive.jackson.CustomDeserialization</code> annotations in the REST method or in the REST resource at class level. These annotations allow you to fully configure the <code>com.fasterxml.jackson.databind.ObjectWriter</code>/<code>com.fasterxml.jackson.databind.ObjectReader</code>.</p>
</div>
<div class="paragraph">
<p>Here is an example use case to customize the <code>com.fasterxml.jackson.databind.ObjectWriter</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@CustomSerialization(UnquotedFields.class)
@GET
@Path("/invalid-use-of-custom-serializer")
public User invalidUseOfCustomSerializer() {
    return testUser();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>UnquotedFields</code> is a <code>BiFunction</code> defined as so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static class UnquotedFields implements BiFunction&lt;ObjectMapper, Type, ObjectWriter&gt; {

    @Override
    public ObjectWriter apply(ObjectMapper objectMapper, Type type) {
        return objectMapper.writer().without(JsonWriteFeature.QUOTE_FIELD_NAMES);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Essentially what this class does is force Jackson to not include quotes in the field names.</p>
</div>
<div class="paragraph">
<p>It is important to note that this customization is only performed for the serialization of the Jakarta REST methods that use <code>@CustomSerialization(UnquotedFields.class)</code>.</p>
</div>
<div class="paragraph">
<p>Following the previous example, let&#8217;s now customize the <code>com.fasterxml.jackson.databind.ObjectReader</code> to read JSON requests with unquoted field names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@CustomDeserialization(SupportUnquotedFields.class)
@POST
@Path("/use-of-custom-deserializer")
public void useOfCustomSerializer(User request) {
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>SupportUnquotedFields</code> is a <code>BiFunction</code> defined as so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static class SupportUnquotedFields implements BiFunction&lt;ObjectMapper, Type, ObjectReader&gt; {

    @Override
    public ObjectReader apply(ObjectMapper objectMapper, Type type) {
        return objectMapper.reader().with(JsonReadFeature.ALLOW_UNQUOTED_FIELD_NAMES);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xml-serialisation"><a class="anchor" href="#xml-serialisation"></a>XML serialisation</h3>
<div id="xml" class="paragraph">
<p>To enable XML support, add the <code>quarkus-resteasy-reactive-jaxb</code> extension to your project.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">GAV</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.quarkus:quarkus-resteasy-reactive-jaxb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javaee.github.io/jaxb-v2/">XML support</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Importing this module will allow HTTP message bodies to be read from XML
and serialised to XML, for <a href="#resource-types">all the types not already registered with a more specific
serialisation</a>.</p>
</div>
<div class="paragraph">
<p>The JAXB Resteasy Reactive extension will automatically detect the classes that are used in the resources and require JAXB serialization. Then, it will register these classes into the default <code>JAXBContext</code> which is internally used by the JAXB message reader and writer.</p>
</div>
<div class="paragraph">
<p>However, in some situations, these classes cause the <code>JAXBContext</code> to fail: for example, when you&#8217;re using the same class name in different java packages. In these cases, the application will fail at build time and print the JAXB exception that caused the issue, so you can properly fix it. Alternatively, you can also exclude the classes that cause the issue by using the property <code>quarkus.jaxb.exclude-classes</code>. When excluding classes that are required by any resource, the JAXB resteasy reactive extension will create and cache a custom <code>JAXBContext</code> that will include the excluded class, causing a minimal performance degradance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The property <code>quarkus.jaxb.exclude-classes</code> accepts a comma separated list of either fully qualified class names
or package names. Package names must be suffixed by <code>.*</code> and all classes in the specified package and its subpackages will be excluded.</p>
</div>
<div class="paragraph">
<p>For instance, when setting <code>quarkus.jaxb.exclude-classes=org.acme.one.Model,org.acme.two.Model,org.acme.somemodel.*</code>, the following elements are excluded:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The class <code>org.acme.one.Model</code></p>
</li>
<li>
<p>The class <code>org.acme.two.Model</code></p>
</li>
<li>
<p>All the classes in the <code>org.acme.somemodel</code> package and its subpackages</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="advanced-jaxb-specific-features"><a class="anchor" href="#advanced-jaxb-specific-features"></a>Advanced JAXB-specific features</h4>
<div class="paragraph">
<p>When using the <code>quarkus-resteasy-reactive-jaxb</code> extension there are some advanced features that RESTEasy Reactive supports.</p>
</div>
<div class="sect4">
<h5 id="inject-jaxb-components"><a class="anchor" href="#inject-jaxb-components"></a>Inject JAXB components</h5>
<div class="paragraph">
<p>The JAXB resteasy reactive extension will serialize and unserialize requests and responses transparently for users. However, if you need finer grain control over JAXB components, you can inject either the JAXBContext, Marshaller, or Unmarshaller components into your beans:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyService {

    @Inject
    JAXBContext jaxbContext;

    @Inject
    Marshaller marshaller;

    @Inject
    Unmarshaller unmarshaller;

    // ...
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Quarkus will automatically find all the classes annotated with <code>@XmlRootElement</code> and then bound them to the JAXB context.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="customize-the-jaxb-configuration"><a class="anchor" href="#customize-the-jaxb-configuration"></a>Customize the JAXB configuration</h5>
<div class="paragraph">
<p>To customize the JAXB configuration for either the JAXB context, and/or the Marshaller/Unmarshaller components, the suggested approach is to define a CDI bean of type <code>io.quarkus.jaxb.runtime.JaxbContextCustomizer</code>.</p>
</div>
<div class="paragraph">
<p>An example where a custom module needs to be registered would look like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class RegisterCustomModuleCustomizer implements JaxbContextCustomizer {

    // For JAXB context configuration
    @Override
    public void customizeContextProperties(Map&lt;String, Object&gt; properties) {

    }

    // For Marshaller configuration
    @Override
    public void customizeMarshaller(Marshaller marshaller) throws PropertyException {
        marshaller.setProperty("jaxb.formatted.output", Boolean.TRUE);
    }

    // For Unmarshaller configuration
    @Override
    public void customizeUnmarshaller(Unmarshaller unmarshaller) throws PropertyException {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It&#8217;s not necessary to implement all three methods, but only the want you need.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Alternatively, you can provide your own <code>JAXBContext</code> bean by doing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class CustomJaxbContext {

    // Replaces the CDI producer for JAXBContext built into Quarkus
    @Singleton
    @Produces
    JAXBContext jaxbContext() {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that if you provide your custom JAXB context instance, you will need to register the classes you want to use for the XML serialization. This means that Quarkus will not update your custom JAXB context instance with the auto-discovered classes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="web-links-support"><a class="anchor" href="#web-links-support"></a>Web Links support</h3>
<div id="links" class="paragraph">
<p>To enable Web Links support, add the <code>quarkus-resteasy-reactive-links</code> extension to your project.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">GAV</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.quarkus:quarkus-resteasy-reactive-links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.w3.org/wiki/LinkHeader">Web Links support</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Importing this module will allow injecting web links into the response HTTP headers by just annotating your endpoint resources with the <code>@InjectRestLinks</code> annotation. To declare the web links that will be returned, you must use the <code>@RestLink</code> annotation in the linked methods.
Assuming a <code>Record</code> looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Record {

    // The class must contain/inherit either and `id` field, an `@Id` or `@RestLinkId` annotated field.
    // When resolving the id the order of preference is: `@RestLinkId` &gt; `@Id` &gt; `id` field.
    private int id;

    public Record() {
    }

    protected Record(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An example of enabling Web Links support would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/records")
public class RecordsResource {

    @GET
    @RestLink(rel = "list")
    @InjectRestLinks
    public List&lt;Record&gt; getAll() {
        // ...
    }

    @GET
    @Path("/{id}")
    @RestLink(rel = "self")
    @InjectRestLinks(RestLinkType.INSTANCE)
    public Record get(@PathParam("id") int id) {
        // ...
    }

    @PUT
    @Path("/{id}")
    @RestLink
    @InjectRestLinks(RestLinkType.INSTANCE)
    public Record update(@PathParam("id") int id) {
        // ...
    }

    @DELETE
    @Path("/{id}")
    @RestLink
    public Record delete(@PathParam("id") int id) {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When calling the endpoint <code>/records</code> which is defined by the method <code>getAll</code> within the above resource using curl, you would get the web links header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&amp; curl -i localhost:8080/records
Link: &lt;http://localhost:8080/records&gt;; rel="list"</code></pre>
</div>
</div>
<div class="paragraph">
<p>As this resource does not return a single instance of type <code>Record</code>, the links for the methods <code>get</code>, <code>update</code>, and <code>delete</code> are not injected. Now, when calling the endpoint <code>/records/1</code>, you would get the following web links:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&amp; curl -i localhost:8080/records/1
Link: &lt;http://localhost:8080/records&gt;; rel="list"
Link: &lt;http://localhost:8080/records/1&gt;; rel="self"
Link: &lt;http://localhost:8080/records/1&gt;; rel="update"
Link: &lt;http://localhost:8080/records/1&gt;; rel="delete"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>get</code>, <code>update</code>, and <code>delete</code> methods use the path param "id" and as the field "id" exists in the entity type "Record", the web link properly populates the value "1" in the returned links. In addition to this, we can also generate web links with path params that do not match with any field of the entity type. For example, the following method is using a path param "text" and the entity Record does not have any field named "text":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/records")
public class RecordsResource {

    // ...

    @GET
    @Path("/search/{text}")
    @RestLink(rel = "search records by free text")
    @InjectRestLinks
    public List&lt;Record&gt; search(@PathParam("text") String text) { <i class="conum" data-value="4"></i><b>(4)</b>
        // ...
    }

    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated web link for this resource is <code>Link: &lt;<a href="http://localhost:8080/search/{text}&gt;" class="bare">http://localhost:8080/search/{text}&gt;</a>; rel="search records by free text"</code>.</p>
</div>
<div class="paragraph">
<p>Finally, when calling the <code>delete</code> resource, you should not see any web links as the method <code>delete</code> is not annotated with the <code>@InjectRestLinks</code> annotation.</p>
</div>
<div class="sect3">
<h4 id="programmatically-access-to-the-web-links-registry"><a class="anchor" href="#programmatically-access-to-the-web-links-registry"></a>Programmatically access to the web links registry</h4>
<div class="paragraph">
<p>You can programmatically have access to the web links registry just by injecting the <code>RestLinksProvider</code> bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/records")
public class RecordsResource {

    @Inject
    RestLinksProvider linksProvider;

    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using this injected bean of type <code>RestLinksProvider</code>, you can get the links by type using the method <code>RestLinksProvider.getTypeLinks</code> or get the links by a concrete instance using the method <code>RestLinksProvider.getInstanceLinks</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="json-hypertext-application-language-hal-support"><a class="anchor" href="#json-hypertext-application-language-hal-support"></a>JSON Hypertext Application Language (HAL) support</h4>
<div class="paragraph">
<p>The <a href="https://tools.ietf.org/id/draft-kelly-json-hal-01.html">HAL</a> standard is a simple format to represent web links.</p>
</div>
<div class="paragraph">
<p>To enable the HAL support, add the <code>quarkus-hal</code> extension to your project. Also, as HAL needs JSON support, you need to add either the <code>quarkus-resteasy-reactive-jsonb</code> or the <code>quarkus-resteasy-reactive-jackson</code> extension.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">GAV</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.quarkus:quarkus-hal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tools.ietf.org/id/draft-kelly-json-hal-01.html">HAL</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After adding the extensions, we can now annotate the REST resources to produce the media type <code>application/hal+json</code> (or use RestMediaType.APPLICATION_HAL_JSON). For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/records")
public class RecordsResource {

    @GET
    @Produces({ MediaType.APPLICATION_JSON, RestMediaType.APPLICATION_HAL_JSON })
    @RestLink(rel = "list")
    @InjectRestLinks
    public List&lt;Record&gt; getAll() {
        // ...
    }

    @GET
    @Produces({ MediaType.APPLICATION_JSON, RestMediaType.APPLICATION_HAL_JSON })
    @Path("/{id}")
    @RestLink(rel = "self")
    @InjectRestLinks(RestLinkType.INSTANCE)
    public Record get(@PathParam("id") int id) {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, the endpoints <code>/records</code> and <code>/records/{id}</code> will accept the media type both <code>json</code> and <code>hal+json</code> to print the records in Hal format.</p>
</div>
<div class="paragraph">
<p>For example, if we invoke the <code>/records</code> endpoint using curl to return a list of records, the HAL format will look like as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&amp; curl -H "Accept:application/hal+json" -i localhost:8080/records
{
    "_embedded": {
        "items": [
            {
                "id": 1,
                "slug": "first",
                "value": "First value",
                "_links": {
                    "self": {
                        "href": "http://localhost:8081/records/1"
                    },
                    "list": {
                        "href": "http://localhost:8081/records"
                    }
                }
            },
            {
                "id": 2,
                "slug": "second",
                "value": "Second value",
                "_links": {
                    "self": {
                        "href": "http://localhost:8081/records/2"
                    },
                    "list": {
                        "href": "http://localhost:8081/records"
                    }
                }
            }
        ]
    },
    "_links": {
        "list": {
            "href": "http://localhost:8081/records"
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we call a resource <code>/records/1</code> that returns only one instance, then the output is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&amp; curl -H "Accept:application/hal+json" -i localhost:8080/records/1
{
    "id": 1,
    "slug": "first",
    "value": "First value",
    "_links": {
        "self": {
            "href": "http://localhost:8081/records/1"
        },
        "list": {
            "href": "http://localhost:8081/records"
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you can also provide additional HAL links programmatically in your resource just by returning either <code>HalCollectionWrapper&lt;T&gt;</code> (to return a list of entities) or <code>HalEntityWrapper&lt;T&gt;</code> (to return a single object) as described in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("/records")
public class RecordsResource {

    @Inject
    HalService halService;

    @GET
    @Produces({ MediaType.APPLICATION_JSON, RestMediaType.APPLICATION_HAL_JSON })
    @RestLink(rel = "list")
    public HalCollectionWrapper&lt;Record&gt; getAll() {
        List&lt;Record&gt; list = // ...
        HalCollectionWrapper&lt;Record&gt; halCollection = halService.toHalCollectionWrapper( list, "collectionName", Record.class);
        halCollection.addLinks(Link.fromPath("/records/1").rel("first-record").build());
        return halCollection;
    }

    @GET
    @Produces({ MediaType.APPLICATION_JSON, RestMediaType.APPLICATION_HAL_JSON })
    @Path("/{id}")
    @RestLink(rel = "self")
    @InjectRestLinks(RestLinkType.INSTANCE)
    public HalEntityWrapper&lt;Record&gt; get(@PathParam("id") int id) {
        Record entity = // ...
        HalEntityWrapper&lt;Record&gt; halEntity = halService.toHalWrapper(entity);
        halEntity.addLinks(Link.fromPath("/records/1/parent").rel("parent-record").build());
        return halEntity;
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cors-filter"><a class="anchor" href="#cors-filter"></a>CORS filter</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">Cross-origin resource sharing</a> (CORS) is a mechanism that
allows restricted resources on a web page to be requested from another domain outside the domain from which the first resource
was served.</p>
</div>
<div class="paragraph">
<p>Quarkus includes a CORS filter at the HTTP layer level.
For more information about the CORS filters and their usage, see the <a href="security-cors#cors-filter">CORS filter</a> section of the Quarkus "Cross-origin resource sharing" guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="more-advanced-usage"><a class="anchor" href="#more-advanced-usage"></a>More advanced usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are some more advanced topics that you may not need to know about initially, but
could prove useful for more complex use cases.</p>
</div>
<div class="sect2">
<h3 id="execution-model-blocking-non-blocking"><a class="anchor" href="#execution-model-blocking-non-blocking"></a>Execution model, blocking, non-blocking</h3>
<div id="execution-model" class="paragraph">
<p>RESTEasy Reactive is implemented using two main thread types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Event-loop threads: which are responsible, among other things, for reading bytes from the HTTP request and
writing bytes back to the HTTP response</p>
</li>
<li>
<p>Worker threads: they are pooled and can be used to offload long-running operations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The event-loop threads (also called IO threads) are responsible for actually performing all the IO
operations in an asynchronous way, and to trigger any listener interested in the completion of those
IO operations.</p>
</div>
<div class="paragraph">
<p>By default, the thread RESTEasy Reactive will run endpoint methods on depends on the signature of the method.
If a method returns one of the following types then it is considered non-blocking, and will be run on the IO thread
by default:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>io.smallrye.mutiny.Uni</code></p>
</li>
<li>
<p><code>io.smallrye.mutiny.Multi</code></p>
</li>
<li>
<p><code>java.util.concurrent.CompletionStage</code></p>
</li>
<li>
<p><code>org.reactivestreams.Publisher</code></p>
</li>
<li>
<p>Kotlin <code>suspended</code> methods</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This 'best guess' approach means most operations will run on the correct thread by default.
If you are writing reactive code, your method will generally return one of these types and will be executed on the IO thread.
If you are writing blocking code, your methods will usually return the result directly, and these will be run on a worker thread.</p>
</div>
<div class="paragraph">
<p>You can override this behaviour using the
<a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/1.5.0/io/smallrye/common/annotation/Blocking.html"><code>@Blocking</code></a>
and
<a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/1.5.0/io/smallrye/common/annotation/NonBlocking.html"><code>@NonBlocking</code></a>
annotations. This can be applied at the method, class or <code>jakarta.ws.rs.core.Application</code> level.</p>
</div>
<div class="paragraph">
<p>The example below will override the default behaviour and always run on a worker thread, even though it returns a <code>Uni</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import io.smallrye.common.annotation.Blocking;

@Path("yawn")
public class Endpoint {

    @Blocking
    @GET
    public Uni&lt;String&gt; blockingHello() throws InterruptedException {
        // do a blocking operation
        Thread.sleep(1000);
        return Uni.createFrom().item("Yaaaawwwwnnnnnn…");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Most of the time, there are ways to achieve the same blocking operations in an asynchronous/reactive
way, using <a href="https://smallrye.io/smallrye-mutiny/">Mutiny</a>, <a href="https://hibernate.org/reactive/">Hibernate Reactive</a>
or any of the <a href="quarkus-reactive-architecture#quarkus-extensions-enabling-reactive">Quarkus Reactive extensions</a> for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.time.Duration;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;

import io.smallrye.mutiny.Uni;

@Path("yawn")
public class Endpoint {

    @GET
    public Uni&lt;String&gt; blockingHello() throws InterruptedException {
        return Uni.createFrom().item("Yaaaawwwwnnnnnn…")
                // do a non-blocking sleep
                .onItem().delayIt().by(Duration.ofSeconds(2));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a method or class is annotated with <code>jakarta.transaction.Transactional</code> then it will also be treated as a blocking
method. This is because JTA is a blocking technology, and is generally used with other blocking technology such as
Hibernate and JDBC. An explicit <code>@Blocking</code> or <code>@NonBlocking</code> on the class will override this behaviour.</p>
</div>
<div class="sect3">
<h4 id="overriding-the-default-behaviour"><a class="anchor" href="#overriding-the-default-behaviour"></a>Overriding the default behaviour</h4>
<div class="paragraph">
<p>If you want to override the default behavior, you can annotate a <code>jakarta.ws.rs.core.Application</code> subclass in your application with <code>@Blocking</code> or <code>@NonBlocking</code>,
and this will set the default for every method that does not have an explicit annotation.</p>
</div>
<div class="paragraph">
<p>Behavior can still be overridden on a class or method level by annotating them directly, however,
all endpoints without an annotation will now follow the default, no matter their method signature.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exception-mapping"><a class="anchor" href="#exception-mapping"></a>Exception mapping</h3>
<div class="paragraph">
<p>If your application needs to return non-nominal HTTP codes in error cases, the best is
to throw exceptions that will result in the proper HTTP response being sent by the
framework using <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/WebApplicationException.html"><code>WebApplicationException</code></a> or any of its subtypes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.BadRequestException;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.NotFoundException;
import jakarta.ws.rs.Path;

@Path("cheeses/{cheese}")
public class Endpoint {

    @GET
    public String findCheese(String cheese) {
        if(cheese == null)
            // send a 400
            throw new BadRequestException();
        if(!cheese.equals("camembert"))
            // send a 404
            throw new NotFoundException("Unknown cheese: " + cheese);
        return "Camembert is a very nice cheese";
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can change the log level of the thrown <code>WebApplicationException</code> exceptions by configuring the following property <code>quarkus.log.category."WebApplicationException".level</code> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.log.category."WebApplicationException".level=DEBUG</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If your endpoint method is delegating calls to another service layer which
does not know of Jakarta REST, you need a way to turn service exceptions to an
HTTP response, and you can do that using the
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive/3.8.6.1/org/jboss/resteasy/reactive/server/ServerExceptionMapper.html"><code>@ServerExceptionMapper</code></a>
annotation on a method, with one parameter of the exception type you want to handle, and turning
that exception into a <a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestResponse.html"><code>RestResponse</code></a> (or a
<a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni&lt;RestResponse&lt;?&gt;&gt;</code></a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.util.Map;

import jakarta.enterprise.context.ApplicationScoped;
import jakarta.inject.Inject;
import jakarta.ws.rs.BadRequestException;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.Response;

import org.jboss.resteasy.reactive.server.ServerExceptionMapper;
import org.jboss.resteasy.reactive.RestResponse;

class UnknownCheeseException extends RuntimeException {
    public final String name;

    public UnknownCheeseException(String name) {
        this.name = name;
    }
}

@ApplicationScoped
class CheeseService {
    private static final Map&lt;String, String&gt; cheeses =
            Map.of("camembert", "Camembert is a very nice cheese",
                   "gouda", "Gouda is acceptable too, especially with cumin");

    public String findCheese(String name) {
        String ret = cheeses.get(name);
        if(ret != null)
            return ret;
        throw new UnknownCheeseException(name);
    }
}

@Path("cheeses/{cheese}")
public class Endpoint {

    @Inject
    CheeseService cheeses;

    @ServerExceptionMapper
    public RestResponse&lt;String&gt; mapException(UnknownCheeseException x) {
        return RestResponse.status(Response.Status.NOT_FOUND, "Unknown cheese: " + x.name);
    }

    @GET
    public String findCheese(String cheese) {
        if(cheese == null)
            // send a 400
            throw new BadRequestException();
        return cheeses.findCheese(cheese);
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, methods annotated with <code>@ServerExceptionMapper</code> do <strong>not</strong> run CDI interceptors that apply to the other methods of the class (like ones needed for implementing security method level security).</p>
</div>
<div class="paragraph">
<p>Users however can opt into interceptors by adding the corresponding annotations to the method.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Εxception mappers defined in REST endpoint classes will only be called if the  exception is thrown in the same class. If you want to define global exception mappers,
simply define them outside a REST endpoint class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import org.jboss.resteasy.reactive.server.ServerExceptionMapper;
import org.jboss.resteasy.reactive.RestResponse;

class ExceptionMappers {
    @ServerExceptionMapper
    public RestResponse&lt;String&gt; mapException(UnknownCheeseException x) {
        return RestResponse.status(Response.Status.NOT_FOUND, "Unknown cheese: " + x.name);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also declare <a href="https://jakarta.ee/specifications/restful-ws/3.1/jakarta-restful-ws-spec-3.1.html#exceptionmapper">exception mappers in the Jakarta REST way</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Your exception mapper may declare any of the following parameter types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Exception mapper parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">An exception type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the exception type you want to handle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any of the <a href="#context-objects">Context objects</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/container/ContainerRequestContext.html"><code>ContainerRequestContext</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A context object to access the current request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It may declare any of the following return types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Exception mapper return types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestResponse.html"><code>RestResponse</code></a> or <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Response.html"><code>Response</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to send to the client when the exception occurs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni&lt;RestResponse&gt;</code></a> or <a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni&lt;Response&gt;</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An asynchronous response to send to the client when the exception occurs</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When an exception occurs, RESTEasy Reactive does not log it by default (for security reasons).
This can sometimes make it hard to understand why certain exception handling code was invoked (or not invoked).
To make RESTEasy Reactive log the actual exception before an exception mapping code is run the <code>org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext</code> log category can be set to <code>DEBUG</code> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.log.category."org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext".level=DEBUG</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="request-or-response-filters"><a class="anchor" href="#request-or-response-filters"></a>Request or response filters</h3>
<div class="sect3">
<h4 id="via-annotations"><a class="anchor" href="#via-annotations"></a>Via annotations</h4>
<div class="paragraph">
<p>You can declare functions which are invoked in the following phases of the request processing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Before the endpoint method is identified: pre-routing request filter</p>
</li>
<li>
<p>After routing, but before the endpoint method is called: normal request filter</p>
</li>
<li>
<p>After the endpoint method is called: response filter</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These filters allow you to do various things such as examine the request URI,
HTTP method, influence routing, look or change request headers, abort the request,
or modify the response.</p>
</div>
<div class="paragraph">
<p>Request filters can be declared with the
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive/3.8.6.1/org/jboss/resteasy/reactive/server/ServerRequestFilter.html"><code>@ServerRequestFilter</code></a>
annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.util.Optional;

class Filters {

    @ServerRequestFilter(preMatching = true)
    public void preMatchingFilter(ContainerRequestContext requestContext) {
        // make sure we don't lose cheese lovers
        if("yes".equals(requestContext.getHeaderString("Cheese"))) {
            requestContext.setRequestUri(URI.create("/cheese"));
        }
    }

    @ServerRequestFilter
    public Optional&lt;RestResponse&lt;Void&gt;&gt; getFilter(ContainerRequestContext ctx) {
        // only allow GET methods for now
        if(ctx.getMethod().equals(HttpMethod.GET)) {
            return Optional.of(RestResponse.status(Response.Status.METHOD_NOT_ALLOWED));
        }
        return Optional.empty();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Request filters are usually executed on the same thread that the method that handles the request will be executed.
That means that if the method servicing the request is annotated with <code>@Blocking</code>, then the filters will also be run
on the worker thread.
If the method is annotated with <code>@NonBlocking</code> (or is not annotated at all), then the filters will also be run
on the same event-loop thread.</p>
</div>
<div class="paragraph">
<p>If however a filter needs to be run on the event-loop despite the fact that the method servicing the request will be
run on a worker thread, then <code>@ServerRequestFilter(nonBlocking=true)</code> can be used.
Note however, that these filters need to be run before <strong>any</strong> filter that does not use that setting and would run on a worker thread.</p>
</div>
<div class="paragraph">
<p>Keep in mind however that the information above does <strong>not</strong> apply to pre-matching filters (<code>@ServerRequestFilter(preMatching = true)</code>).
These filters are <strong>always</strong> run on an event-loop thread.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly, response filters can be declared with the
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive/3.8.6.1/org/jboss/resteasy/reactive/server/ServerResponseFilter.html"><code>@ServerResponseFilter</code></a>
annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Filters {
    @ServerResponseFilter
    public void getFilter(ContainerResponseContext responseContext) {
        Object entity = responseContext.getEntity();
        if(entity instanceof String) {
            // make it shout
            responseContext.setEntity(((String)entity).toUpperCase());
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such a response filter will also be called for <a href="#exception-mapping">handled</a> exceptions.</p>
</div>
<div class="paragraph">
<p>Your filters may declare any of the following parameter types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Filter parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any of the <a href="#context-objects">Context objects</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/container/ContainerRequestContext.html"><code>ContainerRequestContext</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A context object to access the current request</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/container/ContainerResponseContext.html"><code>ContainerResponseContext</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A context object to access the current response</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html"><code>Throwable</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any thrown and <a href="#exception-mapping">handled</a> exception, or <code>null</code> (only for response filters).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It may declare any of the following return types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Filter return types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestResponse.html"><code>RestResponse&lt;?&gt;</code></a> or <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Response.html"><code>Response</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The response to send to the client instead of continuing the filter chain, or <code>null</code> if the filter chain should proceed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html"><code>Optional&lt;RestResponse&lt;?&gt;&gt;</code></a> or <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html"><code>Optional&lt;Response&gt;</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional response to send to the client instead of continuing the filter chain, or an empty value if the filter chain should proceed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni&lt;RestResponse&lt;?&gt;&gt;</code></a> or <a href="https://javadoc.io/doc/io.smallrye.reactive/mutiny/2.1.0/io.smallrye.mutiny/io/smallrye/mutiny/Uni.html"><code>Uni&lt;Response&gt;</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An asynchronous response to send to the client instead of continuing the filter chain, or <code>null</code> if the filter chain should proceed</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can restrict the Resource methods for which a filter runs, by using <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/NameBinding.html"><code>@NameBinding</code></a> meta-annotations.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="the-jakarta-rest-way"><a class="anchor" href="#the-jakarta-rest-way"></a>The Jakarta REST way</h4>
<div class="paragraph">
<p>You can also <a href="https://jakarta.ee/specifications/restful-ws/3.1/jakarta-restful-ws-spec-3.1.html#filters">declare request and response filters in the Jakarta REST way</a>.</p>
</div>
<div class="paragraph">
<p>Both HTTP request and response can be intercepted by providing <code>ContainerRequestFilter</code> or <code>ContainerResponseFilter</code>
implementations respectively. These filters are suitable for processing the metadata associated with a message: HTTP
headers, query parameters, media type, and other metadata. They also have the capability to abort the request
processing, for instance when the user does not have the permissions to access the endpoint.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s use <code>ContainerRequestFilter</code> to add logging capability to our service. We can do that by implementing
<code>ContainerRequestFilter</code> and annotating it with the <code>@Provider</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest.json;

import io.vertx.core.http.HttpServerRequest;
import org.jboss.logging.Logger;

import jakarta.ws.rs.container.ContainerRequestContext;
import jakarta.ws.rs.container.ContainerRequestFilter;
import jakarta.ws.rs.core.Context;
import jakarta.ws.rs.core.UriInfo;
import jakarta.ws.rs.ext.Provider;

@Provider
public class LoggingFilter implements ContainerRequestFilter {

    private static final Logger LOG = Logger.getLogger(LoggingFilter.class);

    @Context
    UriInfo info;

    @Context
    HttpServerRequest request;

    @Override
    public void filter(ContainerRequestContext context) {

        final String method = context.getMethod();
        final String path = info.getPath();
        final String address = request.remoteAddress().toString();

        LOG.infof("Request %s %s from IP %s", method, path, address);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, whenever a REST method is invoked, the request will be logged into the console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">2019-06-05 12:44:26,526 INFO  [org.acm.res.jso.LoggingFilter] (executor-thread-1) Request GET /legumes from IP 127.0.0.1
2019-06-05 12:49:19,623 INFO  [org.acm.res.jso.LoggingFilter] (executor-thread-1) Request GET /fruits from IP 0:0:0:0:0:0:0:1
2019-06-05 12:50:44,019 INFO  [org.acm.res.jso.LoggingFilter] (executor-thread-1) Request POST /fruits from IP 0:0:0:0:0:0:0:1
2019-06-05 12:51:04,485 INFO  [org.acm.res.jso.LoggingFilter] (executor-thread-1) Request GET /fruits from IP 127.0.0.1</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <code>ContainerResponseFilter</code> will also be called for <a href="#exception-mapping">handled</a> exceptions.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="readers-and-writers-mapping-entities-and-http-bodies"><a class="anchor" href="#readers-and-writers-mapping-entities-and-http-bodies"></a>Readers and Writers: mapping entities and HTTP bodies</h3>
<div id="readers-writers" class="paragraph">
<p>Whenever your endpoint methods return an object (of when they return a
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive-common/3.8.6.1/org/jboss/resteasy/reactive/RestResponse.html"><code>RestResponse&lt;?&gt;</code></a>
or <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Response.html"><code>Response</code></a> with
an entity), RESTEasy Reactive will look for a way to map that into an HTTP response body.</p>
</div>
<div class="paragraph">
<p>Similarly, whenever your endpoint method takes an object as parameter, we will look for
a way to map the HTTP request body into that object.</p>
</div>
<div class="paragraph">
<p>This is done via a pluggable system of <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/MessageBodyReader.html"><code>MessageBodyReader</code></a>
and <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/MessageBodyWriter.html"><code>MessageBodyWriter</code></a> interfaces,
which are responsible for defining which Java type they map from/to, for which media types,
and how they turn HTTP bodies to/from Java instances of that type.</p>
</div>
<div class="paragraph">
<p>For example, if we have our own <code>Cheese</code> type on our endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.PUT;
import jakarta.ws.rs.Path;

class Cheese {
    public String name;

    public Cheese(String name) {
        this.name = name;
    }
}

@Path("cheese")
public class Endpoint {

    @GET
    public Cheese sayCheese() {
        return new Cheese("Cheeeeeese");
    }

    @PUT
    public void addCheese(Cheese cheese) {
        System.err.println("Received a new cheese: " + cheese.name);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we can define how to read and write it with our body reader/writers, annotated
with <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/Provider.html"><code>@Provider</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;
import java.nio.charset.StandardCharsets;

import jakarta.ws.rs.WebApplicationException;
import jakarta.ws.rs.core.MediaType;
import jakarta.ws.rs.core.MultivaluedMap;
import jakarta.ws.rs.ext.MessageBodyReader;
import jakarta.ws.rs.ext.MessageBodyWriter;
import jakarta.ws.rs.ext.Provider;

@Provider
public class CheeseBodyHandler implements MessageBodyReader&lt;Cheese&gt;,
                                           MessageBodyWriter&lt;Cheese&gt; {

    @Override
    public boolean isWriteable(Class&lt;?&gt; type, Type genericType,
                               Annotation[] annotations, MediaType mediaType) {
        return type == Cheese.class;
    }

    @Override
    public void writeTo(Cheese t, Class&lt;?&gt; type, Type genericType,
                        Annotation[] annotations, MediaType mediaType,
                        MultivaluedMap&lt;String, Object&gt; httpHeaders,
                        OutputStream entityStream)
            throws IOException, WebApplicationException {
        entityStream.write(("[CheeseV1]" + t.name)
                           .getBytes(StandardCharsets.UTF_8));
    }

    @Override
    public boolean isReadable(Class&lt;?&gt; type, Type genericType,
                              Annotation[] annotations, MediaType mediaType) {
        return type == Cheese.class;
    }

    @Override
    public Cheese readFrom(Class&lt;Cheese&gt; type, Type genericType,
                            Annotation[] annotations, MediaType mediaType,
                            MultivaluedMap&lt;String, String&gt; httpHeaders,
                            InputStream entityStream)
            throws IOException, WebApplicationException {
        String body = new String(entityStream.readAllBytes(), StandardCharsets.UTF_8);
        if(body.startsWith("[CheeseV1]"))
            return new Cheese(body.substring(11));
        throw new IOException("Invalid cheese: " + body);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to get the most performance out of your writer, you can extend the
<a href="https://javadoc.io/doc/io.quarkus.resteasy.reactive/resteasy-reactive/3.8.6.1/org/jboss/resteasy/reactive/server/spi/ServerMessageBodyWriter.html"><code>ServerMessageBodyWriter</code></a>
instead of <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/MessageBodyWriter.html"><code>MessageBodyWriter</code></a>
where you will be able to use less reflection and bypass the blocking IO layer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;
import java.nio.charset.StandardCharsets;

import jakarta.ws.rs.WebApplicationException;
import jakarta.ws.rs.core.MediaType;
import jakarta.ws.rs.core.MultivaluedMap;
import jakarta.ws.rs.ext.MessageBodyReader;
import jakarta.ws.rs.ext.Provider;

import org.jboss.resteasy.reactive.server.spi.ResteasyReactiveResourceInfo;
import org.jboss.resteasy.reactive.server.spi.ServerMessageBodyWriter;
import org.jboss.resteasy.reactive.server.spi.ServerRequestContext;

@Provider
public class CheeseBodyHandler implements MessageBodyReader&lt;Cheese&gt;,
                                           ServerMessageBodyWriter&lt;Cheese&gt; {

    // …

    @Override
    public boolean isWriteable(Class&lt;?&gt; type, ResteasyReactiveResourceInfo target,
                               MediaType mediaType) {
        return type == Cheese.class;
    }

    @Override
    public void writeResponse(Cheese t, ServerRequestContext context)
      throws WebApplicationException, IOException {
        context.serverResponse().end("[CheeseV1]" + t.name);
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can restrict which content-types your reader/writer apply to by adding
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Consumes.html"><code>Consumes</code></a>/<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/Produces.html"><code>Produces</code></a> annotations
on your provider class.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="reader-and-writer-interceptors"><a class="anchor" href="#reader-and-writer-interceptors"></a>Reader and Writer interceptors</h3>
<div class="paragraph">
<p>Just as you can intercept requests and responses, you can also intercept readers and writers, by
extending the <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/ReaderInterceptor.html"><code>ReaderInterceptor</code></a> or
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/WriterInterceptor.html"><code>WriterInterceptor</code></a> on a class annotated with
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/Provider.html"><code>@Provider</code></a>.</p>
</div>
<div class="paragraph">
<p>If we look at this endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.PUT;
import jakarta.ws.rs.Path;

@Path("cheese")
public class Endpoint {

    @GET
    public String sayCheese() {
        return "Cheeeeeese";
    }

    @PUT
    public void addCheese(String cheese) {
        System.err.println("Received a new cheese: " + cheese);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can add reader and writer interceptors like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.io.IOException;

import jakarta.ws.rs.WebApplicationException;
import jakarta.ws.rs.ext.Provider;
import jakarta.ws.rs.ext.ReaderInterceptor;
import jakarta.ws.rs.ext.ReaderInterceptorContext;
import jakarta.ws.rs.ext.WriterInterceptor;
import jakarta.ws.rs.ext.WriterInterceptorContext;

@Provider
public class CheeseIOInterceptor implements ReaderInterceptor, WriterInterceptor {

    @Override
    public void aroundWriteTo(WriterInterceptorContext context)
      throws IOException, WebApplicationException {
        System.err.println("Before writing " + context.getEntity());
        context.proceed();
        System.err.println("After writing " + context.getEntity());
    }

    @Override
    public Object aroundReadFrom(ReaderInterceptorContext context)
      throws IOException, WebApplicationException {
        System.err.println("Before reading " + context.getGenericType());
        Object entity = context.proceed();
        System.err.println("After reading " + entity);
        return entity;
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="resteasy-reactive-and-rest-client-reactive-interactions"><a class="anchor" href="#resteasy-reactive-and-rest-client-reactive-interactions"></a>RESTEasy Reactive and REST Client Reactive interactions</h4>
<div class="paragraph">
<p>In Quarkus, the RESTEasy Reactive extension and <a href="rest-client-reactive">the REST Client Reactive extension</a> share the same infrastructure.
One important consequence of this consideration is that they share the same list of providers (in the Jakarta REST meaning of the word).</p>
</div>
<div class="paragraph">
<p>For instance, if you declare a <code>WriterInterceptor</code>, it will by default intercept both the servers calls and the client calls,
which might not be the desired behavior.</p>
</div>
<div class="paragraph">
<p>However, you can change this default behavior and constrain a provider to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>only consider <strong>server</strong> calls by adding the <code>@ConstrainedTo(RuntimeType.SERVER)</code> annotation to your provider;</p>
</li>
<li>
<p>only consider <strong>client</strong> calls by adding the <code>@ConstrainedTo(RuntimeType.CLIENT)</code> annotation to your provider.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="parameter-mapping"><a class="anchor" href="#parameter-mapping"></a>Parameter mapping</h3>
<div class="paragraph">
<p>All <a href="#request-parameters">Request Parameters</a> can be declared as <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html"><code>String</code></a>,
but also any of the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Types for which a <a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/ParamConverter.html"><code>ParamConverter</code></a> is available via a registered
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/ext/ParamConverterProvider.html"><code>ParamConverterProvider</code></a>.</p>
</li>
<li>
<p>Primitive types.</p>
</li>
<li>
<p>Types that have a constructor that accepts a single <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html"><code>String</code></a> argument.</p>
</li>
<li>
<p>Types that have a static method named <code>valueOf</code> or <code>fromString</code> with a single <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html"><code>String</code></a> argument
that return an instance of the type. If both methods are present then <code>valueOf</code> will be used unless
the type is an <code>enum</code> in which case <code>fromString</code> will be used.</p>
</li>
<li>
<p><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html"><code>List&lt;T&gt;</code></a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html"><code>Set&lt;T&gt;</code></a>, or
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/SortedSet.html"><code>SortedSet&lt;T&gt;</code></a>, where <code>T</code> satisfies any above criterion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example illustrates all those possibilities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.lang.annotation.Annotation;
import java.lang.reflect.Type;
import java.util.List;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.ext.ParamConverter;
import jakarta.ws.rs.ext.ParamConverterProvider;
import jakarta.ws.rs.ext.Provider;

import org.jboss.resteasy.reactive.RestQuery;

@Provider
class MyConverterProvider implements ParamConverterProvider {

    @Override
    public &lt;T&gt; ParamConverter&lt;T&gt; getConverter(Class&lt;T&gt; rawType, Type genericType,
                                              Annotation[] annotations) {
        // declare a converter for this type
        if(rawType == Converter.class) {
            return (ParamConverter&lt;T&gt;) new MyConverter();
        }
        return null;
    }

}

// this is my custom converter
class MyConverter implements ParamConverter&lt;Converter&gt; {

    @Override
    public Converter fromString(String value) {
        return new Converter(value);
    }

    @Override
    public String toString(Converter value) {
        return value.value;
    }

}

// this uses a converter
class Converter {
    String value;
    Converter(String value) {
        this.value = value;
    }
}

class Constructor {
    String value;
    // this will use the constructor
    public Constructor(String value) {
        this.value = value;
    }
}

class ValueOf {
    String value;
    private ValueOf(String value) {
        this.value = value;
    }
    // this will use the valueOf method
    public static ValueOf valueOf(String value) {
        return new ValueOf(value);
    }
}

@Path("hello")
public class Endpoint {

    @Path("{converter}/{constructor}/{primitive}/{valueOf}")
    @GET
    public String conversions(Converter converter, Constructor constructor,
                              int primitive, ValueOf valueOf,
                              @RestQuery List&lt;Constructor&gt; list) {
        return converter + "/" + constructor + "/" + primitive
               + "/" + valueOf + "/" + list;
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="separating-query-parameter-values"><a class="anchor" href="#separating-query-parameter-values"></a>Separating Query parameter values</h4>
<div class="paragraph">
<p>Normally a collection of <code>String</code> values is used to capture the values used in multiple occurrences of the same query parameter.
For example, for the following resource method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("hello")
public static class HelloResource {

    @GET
    public String hello(@RestQuery("name") List&lt;String&gt; names) {
        if (names.isEmpty()) {
            return "hello world";
        } else {
            return "hello " + String.join(" ", names);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">GET /hello?name=foo&amp;name=bar HTTP/1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>the <code>names</code> variable will contain both <code>foo</code> and <code>bar</code> and the response will be <code>hello foo bar</code>.</p>
</div>
<div class="paragraph">
<p>It is not uncommon however to need to convert a single query parameter into a collection of values based on some delimiting character. That is where the <code>@org.jboss.resteasy.reactive.Separator</code> annotation comes into play.</p>
</div>
<div class="paragraph">
<p>If we update the resource method to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Path("hello")
public static class HelloResource {

    @GET
    public String hello(@RestQuery("name") @Separator(",") List&lt;String&gt; names) {
        if (names.isEmpty()) {
            return "hello world";
        } else {
            return "hello " + String.join(" ", names);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and use the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">GET /hello?name=foo,bar HTTP/1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>then the response will be <code>hello foo bar</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="handling-dates"><a class="anchor" href="#handling-dates"></a>Handling dates</h4>
<div class="paragraph">
<p>RESTEasy Reactive supports the use of the implementations of <code>java.time.Temporal</code> (like <code>java.time.LocalDateTime</code>) as query, path, or form params.
Furthermore, it provides the <code>@org.jboss.resteasy.reactive.DateFormat</code> annotation, which can be used to set a custom expected pattern.
Otherwise, the JDK&#8217;s default format for each type is used implicitly.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="preconditions"><a class="anchor" href="#preconditions"></a>Preconditions</h3>
<div class="paragraph">
<p><a href="https://tools.ietf.org/html/rfc7232">HTTP allows requests to be conditional</a>, based on a number of
conditions, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Date of last resource modification</p>
</li>
<li>
<p>A resource tag, similar to a hash code of the resource to designate its state or version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s see how you can do conditional request validation using the
<a href="https://javadoc.io/doc/jakarta.ws.rs/jakarta.ws.rs-api/3.1.0/jakarta.ws.rs/jakarta/ws/rs/core/Request.html"><code>Request</code></a> context object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import java.time.Instant;
import java.time.temporal.ChronoUnit;
import java.time.temporal.TemporalUnit;
import java.util.Date;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.PUT;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.core.EntityTag;
import jakarta.ws.rs.core.Request;
import jakarta.ws.rs.core.Response;
import jakarta.ws.rs.core.Response.ResponseBuilder;

@Path("conditional")
public class Endpoint {

    // It's important to keep our date on seconds because that's how it's sent to the
    // user in the Last-Modified header
    private Date date = Date.from(Instant.now().truncatedTo(ChronoUnit.SECONDS));
    private int version = 1;
    private EntityTag tag = new EntityTag("v1");
    private String resource = "Some resource";

    @GET
    public Response get(Request request) {
        // first evaluate preconditions
        ResponseBuilder conditionalResponse = request.evaluatePreconditions(date, tag);
        if(conditionalResponse != null)
            return conditionalResponse.build();
        // preconditions are OK
        return Response.ok(resource)
                .lastModified(date)
                .tag(tag)
                .build();
    }

    @PUT
    public Response put(Request request, String body) {
        // first evaluate preconditions
        ResponseBuilder conditionalResponse = request.evaluatePreconditions(date, tag);
        if(conditionalResponse != null)
            return conditionalResponse.build();
        // preconditions are OK, we can update our resource
        resource = body;
        date = Date.from(Instant.now().truncatedTo(ChronoUnit.SECONDS));
        version++;
        tag = new EntityTag("v" + version);
        return Response.ok(resource)
                .lastModified(date)
                .tag(tag)
                .build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we call <code>GET /conditional</code> the first time, we will get this response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">HTTP/1.1 200 OK
Content-Type: text/plain;charset=UTF-8
ETag: "v1"
Last-Modified: Wed, 09 Dec 2020 16:10:19 GMT
Content-Length: 13

Some resource</code></pre>
</div>
</div>
<div class="paragraph">
<p>So now if we want to check if we need to fetch a new version, we can make the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">GET /conditional HTTP/1.1
Host: localhost:8080
If-Modified-Since: Wed, 09 Dec 2020 16:10:19 GMT</code></pre>
</div>
</div>
<div class="paragraph">
<p>And we would get the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">HTTP/1.1 304 Not Modified</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the resource has not been modified since that date, this saves on sending the resource but can also help your users detect the concurrent modification.
For example, one client wants to update the resource, but another user has modified it since.
You can follow the previous <code>GET</code> request with this update:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">PUT /conditional HTTP/1.1
Host: localhost:8080
If-Unmodified-Since: Wed, 09 Dec 2020 16:25:43 GMT
If-Match: v1
Content-Length: 8
Content-Type: text/plain

newstuff</code></pre>
</div>
</div>
<div class="paragraph">
<p>And if some other user has modified the resource between your <code>GET</code> and your <code>PUT</code> you would
get this answer back:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">HTTP/1.1 412 Precondition Failed
ETag: "v2"
Content-Length: 0</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="negotiation"><a class="anchor" href="#negotiation"></a>Negotiation</h3>
<div class="paragraph">
<p>One of the main ideas of REST (<a href="https://tools.ietf.org/html/rfc7231#section-3.4">and HTTP</a>) is that
your resource is independent of its representation, and
that both the client and server are free to represent their resources in as many media types as
they want. This allows the server to declare support for multiple representations and let the
client declare which ones it supports and get served something appropriate.</p>
</div>
<div class="paragraph">
<p>The following endpoint supports serving cheese in plain text or JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import jakarta.ws.rs.Consumes;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.PUT;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

import com.fasterxml.jackson.annotation.JsonCreator;

class Cheese {
    public String name;
    @JsonCreator
    public Cheese(String name) {
        this.name = name;
    }
    @Override
    public String toString() {
        return "Cheese: " + name;
    }
}

@Path("negotiated")
public class Endpoint {

    @Produces({MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN})
    @GET
    public Cheese get() {
        return new Cheese("Morbier");
    }

    @Consumes(MediaType.TEXT_PLAIN)
    @PUT
    public Cheese putString(String cheese) {
        return new Cheese(cheese);
    }

    @Consumes(MediaType.APPLICATION_JSON)
    @PUT
    public Cheese putJson(Cheese cheese) {
        return cheese;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The user will be able to select which representation it gets with the
<a href="https://tools.ietf.org/html/rfc7231#section-5.3.2"><code>Accept</code></a> header, in the case of JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">&gt; GET /negotiated HTTP/1.1
&gt; Host: localhost:8080
&gt; Accept: application/json

&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
&lt; Content-Length: 18
&lt;
&lt; {"name":"Morbier"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And for text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">&gt; GET /negotiated HTTP/1.1
&gt; Host: localhost:8080
&gt; Accept: text/plain
&gt;
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/plain
&lt; Content-Length: 15
&lt;
&lt; Cheese: Morbier</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, you can <code>PUT</code> two different representations. JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">&gt; PUT /negotiated HTTP/1.1
&gt; Host: localhost:8080
&gt; Content-Type: application/json
&gt; Content-Length: 16
&gt;
&gt; {"name": "brie"}

&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json;charset=UTF-8
&lt; Content-Length: 15
&lt;
&lt; {"name":"brie"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or plain text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">&gt; PUT /negotiated HTTP/1.1
&gt; Host: localhost:8080
&gt; Content-Type: text/plain
&gt; Content-Length: 9
&gt;
&gt; roquefort

&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json;charset=UTF-8
&lt; Content-Length: 20
&lt;
&lt; {"name":"roquefort"}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="http-compression"><a class="anchor" href="#http-compression"></a>HTTP Compression</h3>
<div class="paragraph">
<p>The body of an HTTP response is not compressed by default.
You can enable the HTTP compression support by means of <code>quarkus.http.enable-compression=true</code>.</p>
</div>
<div class="paragraph">
<p>If compression support is enabled then the response body is compressed if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the resource method is annotated with <code>@io.quarkus.vertx.http.Compressed</code>, or</p>
</li>
<li>
<p>the <code>Content-Type</code> header is set and the value is a compressed media type as configured via <code>quarkus.http.compress-media-types</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The response body is never compressed if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the resource method is annotated with <code>@io.quarkus.vertx.http.Uncompressed</code>, or</p>
</li>
<li>
<p>the <code>Content-Type</code> header is not set.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By default, the following list of media types is compressed: <code>text/html</code>, <code>text/plain</code>, <code>text/xml</code>, <code>text/css</code>, <code>text/javascript</code> and <code>application/javascript</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the client does not support HTTP compression then the response body is not compressed.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="includeexclude-jakarta-rest-classes"><a class="anchor" href="#includeexclude-jakarta-rest-classes"></a>Include/Exclude Jakarta REST classes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="using-build-time-conditions"><a class="anchor" href="#using-build-time-conditions"></a>Using Build time conditions</h3>
<div class="paragraph">
<p>Quarkus enables the inclusion or exclusion of Jakarta REST Resources, Providers and Features directly thanks to build time conditions in the same that it does for CDI beans.
Thus, the various Jakarta REST classes can be annotated with profile conditions (<code>@io.quarkus.arc.profile.IfBuildProfile</code> or <code>@io.quarkus.arc.profile.UnlessBuildProfile</code>) and/or with property conditions (<code>io.quarkus.arc.properties.IfBuildProperty</code> or <code>io.quarkus.arc.properties.UnlessBuildProperty</code>) to indicate to Quarkus at build time under which conditions these Jakarta REST classes should be included.</p>
</div>
<div class="paragraph">
<p>In the following example, Quarkus includes the <code>ResourceForApp1Only</code> Resource class if and only if the build profile <code>app1</code> has been enabled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@IfBuildProfile("app1")
public class ResourceForApp1Only {

    @GET
    @Path("sayHello")
    public String sayHello() {
        return "hello";
     }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that if a Jakarta REST Application has been detected and the method <code>getClasses()</code> and/or <code>getSingletons()</code> has/have been overridden, Quarkus will ignore the build time conditions and consider only what has been defined in the Jakarta REST Application.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-a-runtime-property"><a class="anchor" href="#using-a-runtime-property"></a>Using a runtime property</h3>
<div class="paragraph">
<p>Quarkus can also conditionally disable Jakarta REST Resources based on the value of runtime properties using the <code>@io.quarkus.resteasy.reactive.server.EndpointDisabled</code> annotation.</p>
</div>
<div class="paragraph">
<p>In the following example, Quarkus will exclude <code>RuntimeResource</code> at runtime if the application has <code>some.property</code> configured to <code>"disable"</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EndpointDisabled(name = "some.property", stringValue = "disable")
public class RuntimeResource {

    @GET
    @Path("sayHello")
    public String sayHello() {
        return "hello";
     }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This feature does not work when using native build.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resteasy-reactive-client"><a class="anchor" href="#resteasy-reactive-client"></a>RESTEasy Reactive client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the Server side, RESTEasy Reactive comes with a new MicroProfile REST Client implementation that is non-blocking at its core.</p>
</div>
<div class="paragraph">
<p>Please note that the <code>quarkus-rest-client</code> extension may not be used with RESTEasy Reactive, use <code>quarkus-rest-client-reactive</code> instead.</p>
</div>
<div class="paragraph">
<p>See the <a href="rest-client-reactive">REST Client Reactive Guide</a> for more information about the reactive REST client.</p>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Unless it is a <a href="#path-parameter">URI template parameter</a> or a <a href="#context-objects">context object</a>.
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#what-is-resteasy-reactive">What is RESTEasy Reactive?</a></li>
<li><a href="#writing-endpoints">Writing endpoints</a>
<ul class="sectlevel2">
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#terminology">Terminology</a></li>
<li><a href="#declaring-endpoints-uri-mapping">Declaring endpoints: URI mapping</a></li>
<li><a href="#declaring-endpoints-http-methods">Declaring endpoints: HTTP methods</a></li>
<li><a href="#declaring-endpoints-representation-content-types">Declaring endpoints: representation / content types</a></li>
<li><a href="#accessing-request-parameters">Accessing request parameters</a></li>
<li><a href="#uri-parameters"> Declaring URI parameters</a></li>
<li><a href="#accessing-the-request-body">Accessing the request body</a></li>
<li><a href="#multipart">Handling Multipart Form data</a></li>
<li><a href="#returning-a-response-body">Returning a response body</a></li>
<li><a href="#setting-other-response-properties">Setting other response properties</a></li>
<li><a href="#redirect-support">Redirect support</a></li>
<li><a href="#asyncreactive-support">Async/reactive support</a></li>
<li><a href="#streaming-support">Streaming support</a></li>
<li><a href="#server-sent-event-sse-support">Server-Sent Event (SSE) support</a></li>
<li><a href="#controlling-http-caching-features">Controlling HTTP Caching features</a></li>
<li><a href="#accessing-context-objects">Accessing context objects</a></li>
<li><a href="#json-serialisation">JSON serialisation</a></li>
<li><a href="#xml-serialisation">XML serialisation</a></li>
<li><a href="#web-links-support">Web Links support</a></li>
</ul>
</li>
<li><a href="#cors-filter">CORS filter</a></li>
<li><a href="#more-advanced-usage">More advanced usage</a>
<ul class="sectlevel2">
<li><a href="#execution-model-blocking-non-blocking">Execution model, blocking, non-blocking</a></li>
<li><a href="#exception-mapping">Exception mapping</a></li>
<li><a href="#request-or-response-filters">Request or response filters</a></li>
<li><a href="#readers-and-writers-mapping-entities-and-http-bodies">Readers and Writers: mapping entities and HTTP bodies</a></li>
<li><a href="#reader-and-writer-interceptors">Reader and Writer interceptors</a></li>
<li><a href="#parameter-mapping">Parameter mapping</a></li>
<li><a href="#preconditions">Preconditions</a></li>
<li><a href="#negotiation">Negotiation</a></li>
<li><a href="#http-compression">HTTP Compression</a></li>
</ul>
</li>
<li><a href="#includeexclude-jakarta-rest-classes">Include/Exclude Jakarta REST classes</a>
<ul class="sectlevel2">
<li><a href="#using-build-time-conditions">Using Build time conditions</a></li>
<li><a href="#using-a-runtime-property">Using a runtime property</a></li>
</ul>
</li>
<li><a href="#resteasy-reactive-client">RESTEasy Reactive client</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same extensions</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.8/guides/resteasy-reactive-migration">Migrating to RESTEasy Reactive</a></li>
      
        
        <li class="howto"><a href="/version/3.8/guides/resteasy-reactive-virtual-threads">Use virtual threads in REST applications</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/rest-client-reactive">Using the REST Client</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/rest-json">Writing JSON REST Services</a></li>
      
        
        <li class="reference"><a href="/version/3.8/guides/security-authorize-web-endpoints-reference">Authorization of web endpoints</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="howto"><a href="/version/3.8/guides/resteasy-reactive-virtual-threads">Use virtual threads in REST applications</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/resteasy-reactive-migration">Migrating to RESTEasy Reactive</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/rest-client-reactive">Using the REST Client</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/rest-json">Writing JSON REST Services</a></li>
      
        
        <li class="reference"><a href="/version/3.8/guides/security-authorize-web-endpoints-reference">Authorization of web endpoints</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/rest-data-panache">Generating Jakarta REST resources with Panache</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/grpc-virtual-threads">Quarkus Virtual Thread support for gRPC services</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/messaging-virtual-threads">Quarkus Virtual Thread support with Reactive Messaging</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/resteasy">RESTEasy Classic</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/openapi-swaggerui">Using OpenAPI and Swagger UI</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/resteasy-client">Using the legacy REST Client</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/resteasy-client-multipart">Using the legacy REST Client with Multipart</a></li>
      
        
        <li class="reference"><a href="/version/3.8/guides/virtual-threads">Virtual Thread support reference</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">







<head>
  <title>Class Loading Reference - 3.8 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.8/guides/class-loading-reference" />
  <meta property="og:title" content="Class Loading Reference - 3.8" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/class-loading-reference">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/3.8/guides/class-loading-reference" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/3.8/guides/class-loading-reference" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/3.8/guides/class-loading-reference" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/3.8/guides/class-loading-reference" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/3.8/guides/class-loading-reference" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.8/guides/class-loading-reference" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.8/guides/class-loading-reference">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/3.8/guides/class-loading-reference">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.8/guides/class-loading-reference">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.8/guides/class-loading-reference">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.8/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.23.4 - Latest</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" selected>3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Class Loading Reference </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document explains the Quarkus class loading architecture. It is intended for extension
authors and advanced users who want to understand exactly how Quarkus works.</p>
</div>
<div class="paragraph">
<p>The Quarkus class loading architecture is slightly different depending on the mode that
the application is run in.</p>
</div>
<div class="paragraph">
<p>When running a production application using the <code>fast-jar</code> package type
(which is the default), almost all dependencies are loaded via the <code>io.quarkus.bootstrap.runner.RunnerClassLoader</code>
which indexes class at build time, while a small set of dependencies is loaded from the system ClassLoader.</p>
</div>
<div class="paragraph">
<p>When running a production application using the <code>legacy-jar</code> package type everything is loaded
in the system ClassLoader, so it is a completely flat classpath.</p>
</div>
<div class="paragraph">
<p>The flat classpath strategy is also used for GraalVM native images, since GraalVM does not really support multiple ClassLoaders.</p>
</div>
<div class="paragraph">
<p>For all other use cases (e.g. tests, dev mode, and building the application) Quarkus
uses the class loading architecture outlined in following section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrapping-quarkus"><a class="anchor" href="#bootstrapping-quarkus"></a>Bootstrapping Quarkus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Quarkus applications are created by the QuarkusBootstrap class in the <code>independent-projects/bootstrap</code> module. This
class is used to resolve all the relevant dependencies (both deployment and runtime) that are needed for the Quarkus
application. The end result of this process is a <code>CuratedApplication</code>, which contains all the class loading information
for the application.</p>
</div>
<div class="paragraph">
<p>The <code>CuratedApplication</code> can then be used to create an <code>AugmentAction</code> instance, which can create production application
and start/restart runtime ones. This application instance exists within an isolated ClassLoader, it is not necessary
to have any of the Quarkus deployment classes on the class path as the curate process will resolve them for you.</p>
</div>
<div class="paragraph">
<p>This bootstrap process should be the same no matter how Quarkus is launched, just with different parameters passed in.</p>
</div>
<div class="sect2">
<h3 id="current-run-modes"><a class="anchor" href="#current-run-modes"></a>Current Run Modes</h3>
<div class="paragraph">
<p>At the moment we have the following use cases for bootstrapping Quarkus:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven creating production application</p>
</li>
<li>
<p>Maven dev mode</p>
</li>
<li>
<p>Gradle creating a production application</p>
</li>
<li>
<p>Gradle dev mode</p>
</li>
<li>
<p>QuarkusTest (Maven, Gradle and IDE)</p>
</li>
<li>
<p>QuarkusUnitTest (Maven, Gradle and IDE)</p>
</li>
<li>
<p>QuarkusDevModeTest (Maven, Gradle and IDE)</p>
</li>
<li>
<p>Arquillian Adaptor</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>One of the goals of this refactor is to have all these different run modes boot Quarkus in fundamentally the same way.</p>
</div>
</div>
<div class="sect2">
<h3 id="notes-on-transformer-safety"><a class="anchor" href="#notes-on-transformer-safety"></a>Notes on Transformer Safety</h3>
<div class="paragraph">
<p>A ClassLoader is said to be 'transformer safe' if it is safe to load classes in the class loader before the transformers
are ready. Once a class has been loaded it cannot be changed, so if a class is loaded before the transformers have been
prepared this will prevent the transformation from working. Loading classes in a transformer safe ClassLoader will not
prevent the transformation, as the loaded class is not used at runtime.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="classloader-implementations"><a class="anchor" href="#classloader-implementations"></a>ClassLoader Implementations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus has a number of ClassLoaders. This shows the relationship between them :</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/classloader-hierarchy.png" alt="Quarkus ClassLoader hierarchy">
</div>
</div>
<div class="paragraph">
<p>Here are the roles of each ClassLoader:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Base ClassLoader</dt>
<dd>
<p>This is usually the normal JVM System ClassLoader. In some environments such as Maven it may be different. This ClassLoader
is used to load the bootstrap classes, and other ClassLoader instances will delegate the loading of JDK classes to it.</p>
</dd>
<dt class="hdlist1">Augmentation ClassLoader</dt>
<dd>
<p>This loads all the <code>-deployment</code> artifacts and their dependencies, as well as other user dependencies. It does not load the
application root or any hot deployed code. This ClassLoader is persistent, even if the application restarts it will remain
(which is why it cannot load application classes that may be hot deployed). Its parent is the base ClassLoader, and it is
transformer safe.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>At present this can be configured to delegate to the Base ClassLoader, however the plan is for this option to go away and
always have this as an isolated ClassLoader. Making this an isolated ClassLoader is complicated as it means that all
the builder classes are isolated, which means that use cases that want to customise the build chains are slightly more complex.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deployment ClassLoader</dt>
<dd>
<p>This can load all application classes. Its parent is the Augmentation ClassLoader, so it can also load all deployment classes.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This ClassLoader is non-persistent, it will be re-created when the application is started, and is isolated. This ClassLoader
is the context ClassLoader that is used when running the build steps. It is also transformer safe.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Base Runtime ClassLoader</dt>
<dd>
<p>This loads all the runtime extension dependencies, as well as other user dependencies (note that this may include duplicate
copies of classes also loaded by the Augmentation ClassLoader). It does not load the application root or any hot deployed
code. This ClassLoader is persistent, even if the application restarts it will remain (which is why it cannot load
application classes that may be hot deployed). Its parent is the base ClassLoader.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This loads code that is not hot-reloadable, but it does support transformation (although once the class is loaded this
transformation is no longer possible). This means that only transformers registered in the first application start
will take effect, however as these transformers are expected to be idempotent this should not cause problems. An example
of the sort of transformation that might be required here is a Panache entity packaged in an external jar. This class
needs to be transformed to have its static methods implemented, however this transformation only happens once, so
restarts use the copy of the class that was created on the first start.</p>
</div>
<div class="paragraph">
<p>This ClassLoader is isolated from the Augment and Deployment ClassLoaders. This means that it is not possible to set
values in a static field in the deployment side, and expect to read it at runtime. This allows dev and test applications
to behave more like a production application (production applications are isolated in that they run in a whole new JVM).</p>
</div>
<div class="paragraph">
<p>This also means that the runtime version can be linked against a different set of dependencies, e.g. the hibernate
version used at deployment time might want to include ByteBuddy, while the version used at runtime does not.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Runtime Class Loader</dt>
<dd>
<p>This ClassLoader is used to load the application classes and other hot deployable resources. Its parent is the base runtime
ClassLoader, and it is recreated when the application is restarted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="isolated-classloaders"><a class="anchor" href="#isolated-classloaders"></a>Isolated ClassLoaders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The runtime ClassLoader is always isolated. This means that it will have its own copies of almost every class from the
resolved dependency list. The exception to this are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK classes</p>
</li>
<li>
<p>Classes from artifacts that extensions have marked as parent first (more on this later).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="parent-first-dependencies"><a class="anchor" href="#parent-first-dependencies"></a>Parent First Dependencies</h3>
<div class="paragraph">
<p>There are some classes that should not be loaded in an isolated manner, but that should always be loaded by the system
ClassLoader (or whatever ClassLoader is responsible for bootstrapping Quarkus). Most extensions do not need to worry about
this, however there are a few cases where this is necessary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some logging related classes, as logging must be loaded by the system ClassLoader</p>
</li>
<li>
<p>Quarkus bootstrap itself</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this is required it can be configured in the <code>quarkus-extension-maven-plugin</code>. Note that if you
mark a dependency as parent first then all of its dependencies must also be parent first,
or a <code>LinkageError</code> can occur.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-extension-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;parentFirstArtifacts&gt;
            &lt;parentFirstArtifact&gt;io.quarkus:quarkus-bootstrap-core&lt;/parentFirstArtifact&gt;
            &lt;parentFirstArtifact&gt;io.quarkus:quarkus-development-mode-spi&lt;/parentFirstArtifact&gt;
            &lt;parentFirstArtifact&gt;org.jboss.logmanager:jboss-logmanager&lt;/parentFirstArtifact&gt;
            &lt;parentFirstArtifact&gt;org.jboss.logging:jboss-logging&lt;/parentFirstArtifact&gt;
            &lt;parentFirstArtifact&gt;org.ow2.asm:asm&lt;/parentFirstArtifact&gt;
        &lt;/parentFirstArtifacts&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="banned-dependencies"><a class="anchor" href="#banned-dependencies"></a>Banned Dependencies</h3>
<div class="paragraph">
<p>There are some dependencies that we can be sure we do not want. This generally happens when a dependency has had a name
change (e.g. smallrye-config changing groups from <code>org.smallrye</code> to <code>org.smallrye.config</code>, the <code>javax</code> &#8594; <code>jakarta</code> rename).
This can cause problems, as if these artifacts end up in the dependency tree out of date classes can be loaded that are
not compatible with Quarkus. To deal with this, extensions can specify artifacts that should never be loaded. This is
done by modifying the <code>quarkus-extension-maven-plugin</code> config in the pom (which generates the <code>quarkus-extension.properties</code>
file). Simply add an <code>excludedArtifacts</code> section as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-extension-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;excludedArtifacts&gt;
            &lt;excludedArtifact&gt;io.smallrye:smallrye-config&lt;/excludedArtifact&gt;
            &lt;excludedArtifact&gt;javax.enterprise:cdi-api&lt;/excludedArtifact&gt;
        &lt;/excludedArtifacts&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should only be done if the extension depends on a newer version of these artifacts. If the extension does not bring
in a replacement artifact as a dependency then classes the application needs might end up missing.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-class-loading"><a class="anchor" href="#configuring-class-loading"></a>Configuring Class Loading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to configure some aspects of class loading in dev and test mode. This can be done using <code>application.properties</code>.
Note that class loading config is different to normal config, in that it does not use the standard Quarkus config mechanisms
(as it is needed too early), so only supports <code>application.properties</code>. The following options are supported.</p>
</div>
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-class-loading-configuration-class-loading-config_configuration"></a><a href="#quarkus-class-loading-configuration-class-loading-config_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-parent-first-artifacts"></a><code><a href="#quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-parent-first-artifacts">quarkus.class-loading.parent-first-artifacts</a></code></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Artifacts that are loaded in a parent first manner. This can be used to work around issues where a given class needs to be loaded by the system ClassLoader. Note that if you make a library parent first all its dependencies should generally also be parent first.</p>
</div>
<div class="paragraph">
<p>Artifacts should be configured as a comma separated list of artifact ids, with the group, artifact-id and optional classifier separated by a colon.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This config property can only be set in application.properties
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52223">QUARKUS_CLASS_LOADING_PARENT_FIRST_ARTIFACTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52223" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-reloadable-artifacts"></a><code><a href="#quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-reloadable-artifacts">quarkus.class-loading.reloadable-artifacts</a></code></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Artifacts that are loaded in the runtime ClassLoader in dev mode, so they will be dropped and recreated on change.</p>
</div>
<div class="paragraph">
<p>This is an advanced option, it should only be used if you have a problem with libraries holding stale state between reloads. Note that if you use this any library that depends on the listed libraries will also need to be reloadable.</p>
</div>
<div class="paragraph">
<p>This setting has no impact on production builds.</p>
</div>
<div class="paragraph">
<p>Artifacts should be configured as a comma separated list of artifact ids, with the group, artifact-id and optional classifier separated by a colon.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This config property can only be set in application.properties
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52224">QUARKUS_CLASS_LOADING_RELOADABLE_ARTIFACTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52224" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-removed-artifacts"></a><code><a href="#quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-removed-artifacts">quarkus.class-loading.removed-artifacts</a></code></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Artifacts that will never be loaded by the class loader, and will not be packed into the final application. This allows you to explicitly remove artifacts from your application even though they may be present on the class path.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52225">QUARKUS_CLASS_LOADING_REMOVED_ARTIFACTS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52225" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-removed-resources-removed-resources"></a><code><a href="#quarkus-class-loading-configuration-class-loading-config_quarkus-class-loading-removed-resources-removed-resources">quarkus.class-loading.removed-resources</a></code></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>Resources that should be removed/hidden from dependencies.</p>
</div>
<div class="paragraph">
<p>This allows for classes and other resources to be removed from dependencies, so they are not accessible to the application. This is a map of artifact id (in the form group:artifact) to a list of resources to be removed.</p>
</div>
<div class="paragraph">
<p>When running in dev and test mode these resources are hidden from the ClassLoader, when running in production mode these files are removed from the jars that contain them.</p>
</div>
<div class="paragraph">
<p>Note that if you want to remove a class you need to specify the class file name. e.g. to remove <code>com.acme.Foo</code> you would specify <code>com/acme/Foo.class</code>.</p>
</div>
<div class="paragraph">
<p>Note that for technical reasons this is not supported when running with JBang.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-52226">QUARKUS_CLASS_LOADING_REMOVED_RESOURCES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-52226" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>Map&lt;String,Set&lt;String&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="hidingremoving-classes-and-resources-from-dependencies"><a class="anchor" href="#hidingremoving-classes-and-resources-from-dependencies"></a>Hiding/Removing classes and resources from dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to hide/remove classes and resources from dependencies. This is an advanced option, but it can be useful
at times. This is done via the <code>quarkus.class-loading.removed-resources</code> config key, for example:</p>
</div>
<div class="paragraph">
<p><code>quarkus.class-loading.removed-resources."io.quarkus\:quarkus-integration-test-shared-library"=io/quarkus/it/shared/RemovedResource.class</code></p>
</div>
<div class="paragraph">
<p>This will remove the <code>RemovedResource.class</code> file from the <code>io.quarkus:quarkus-integration-test-shared-library</code> artifact.</p>
</div>
<div class="paragraph">
<p>Even though this option is a class loading option it will also affect the generated application, so when the application
is created removed resources will not be accessible.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reading-class-bytecode"><a class="anchor" href="#reading-class-bytecode"></a>Reading Class Bytecode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is important to use the correct <code>ClassLoader</code>. The recommended approach is to get it by calling the
<code>Thread.currentThread().getContextClassLoader()</code> method.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BuildStep
GeneratedClassBuildItem instrument(final CombinedIndexBuildItem index) {
    final String classname = "com.example.SomeClass";
    final ClassLoader cl = Thread.currentThread().getContextClassLoader();
    final byte[] originalBytecode = IoUtil.readClassAsBytes(cl, classname);
    final byte[] enhancedBytecode = ... // class instrumentation from originalBytecode
    return new GeneratedClassBuildItem(true, classname, enhancedBytecode));
}</code></pre>
</div>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#bootstrapping-quarkus">Bootstrapping Quarkus</a>
<ul class="sectlevel2">
<li><a href="#current-run-modes">Current Run Modes</a></li>
<li><a href="#notes-on-transformer-safety">Notes on Transformer Safety</a></li>
</ul>
</li>
<li><a href="#classloader-implementations">ClassLoader Implementations</a></li>
<li><a href="#isolated-classloaders">Isolated ClassLoaders</a>
<ul class="sectlevel2">
<li><a href="#parent-first-dependencies">Parent First Dependencies</a></li>
<li><a href="#banned-dependencies">Banned Dependencies</a></li>
</ul>
</li>
<li><a href="#configuring-class-loading">Configuring Class Loading</a></li>
<li><a href="#hidingremoving-classes-and-resources-from-dependencies">Hiding/Removing classes and resources from dependencies</a></li>
<li><a href="#reading-class-bytecode">Reading Class Bytecode</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="concepts"><a href="/version/3.8/guides/duplicated-context">Duplicated context, context locals, asynchronous processing and propagation</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/extension-registry-user">Quarkus Extension Registry</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/building-my-first-extension">Building my first extension</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/conditional-extension-dependencies">Conditional Extension Dependencies</a></li>
      
        
        <li class="howto"><a href="/version/3.8/guides/doc-contribute-docs-howto">Contribute to Quarkus documentation</a></li>
      
        
        <li class="tutorial"><a href="/version/3.8/guides/doc-create-tutorial">Creating a tutorial</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/capabilities">Extension Capabilities</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/extension-codestart">Extension codestart</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/dev-mode-differences">How dev mode differs from a production application</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/performance-measure">Measuring Performance</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/platform">Platform</a></li>
      
        
        <li class="concepts"><a href="/version/3.8/guides/doc-concept">Quarkus documentation content types</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/extension-metadata">Quarkus Extension Metadata</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/quarkus-reactive-architecture">Quarkus Reactive Architecture</a></li>
      
        
        <li class="reference"><a href="/version/3.8/guides/doc-reference">Quarkus style and content guidelines</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/writing-native-applications-tips">Tips for writing native applications</a></li>
      
        
        <li class="guide"><a href="/version/3.8/guides/writing-extensions">Writing Your Own Extension</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

<!DOCTYPE html>
<html>





<head>
  <title>Dev Services for Infinispan - main - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="default-src https://dpm.demdex.net; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com https://static.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com https://app.mailjet.com http://www.youtube.com http://www.googleadservices.com https://googleads.g.doubleclick.net https://dpm.demdex.net https://giscus.app; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self'; frame-src https://www.googletagmanager.com https://www.youtube.com https://embed.restream.io https://app.mailjet.com xy0p2.mjt.lu https://giscus.app; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/main/guides/infinispan-dev-services" />
  <meta property="og:title" content="Dev Services for Infinispan - main" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/infinispan-dev-services">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/main/guides/infinispan-dev-services" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/main/guides/infinispan-dev-services" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/main/guides/infinispan-dev-services" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/main/guides/infinispan-dev-services" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">About<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/continuum" class="">REACTIVE</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/main/guides/infinispan-dev-services" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://es.quarkus.io/version/main/guides/infinispan-dev-services">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/main/guides/infinispan-dev-services">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/main/guides/infinispan-dev-services">日本語</a></li>
          </ul>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    




<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/main/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        <option value="main" selected>Main - SNAPSHOT</option>
        
        
        
        
        
        
        
        
        </select>
    </div>
  </div>
</section>

<div class="grid-wrapper guide">
  <div class="grid__item width-12-12 width-12-12-mobile">
    <h1 class="text-caps">Dev Services for Infinispan </h1>
  </div>
  <div class="width-12-12">
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#connecting-to-the-running-infinispan-server">Connecting to the running Infinispan Server</a>
<ul class="sectlevel2">
<li><a href="#accessing-to-the-infinispan-server-console">Accessing to the Infinispan Server Console</a></li>
</ul>
</li>
<li><a href="#overriding-the-infinispan-server-image">Overriding the Infinispan Server Image</a></li>
<li><a href="#enabling-disabling-dev-services-for-infinispan">Enabling / Disabling Dev Services for Infinispan</a></li>
<li><a href="#cross-site-replication">Cross Site Replication</a></li>
<li><a href="#tracing-with-opentelemetry">Tracing with OpenTelemetry</a></li>
<li><a href="#persistence-layer-for-infinispan">Persistence layer for Infinispan</a></li>
<li><a href="#shared-server">Shared server</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus supports a feature called Dev Services that allows you to create various datasources without any config.
If you have docker running and have not configured <code>quarkus.infinispan-client.hosts</code>,
Quarkus will automatically start an Infinispan container when running tests or dev mode, and automatically configure the connection.</p>
</div>
<div class="paragraph">
<p>Available properties to customize the Infinispan DevService.</p>
</div>
<div class="paragraph">
<p>When running the production version of the application, the Infinispan connection need to be configured as normal,
so if you want to include a production database config in your <code>application.properties</code> and continue to use Dev Services
we recommend that you use the <code>%prod.</code> profile to define your Infinispan settings.</p>
</div>
<div class="paragraph">
<p>Dev Services for Infinispan relies on Docker to start the server.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connecting-to-the-running-infinispan-server"><a class="anchor" href="#connecting-to-the-running-infinispan-server"></a>Connecting to the running Infinispan Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You <strong>don&#8217;t need to configure anything in dev mode</strong>.
The server will be running in a random port.
If you need a fixed port, then configure <code>quarkus.infinispan-client.devservices.port</code> property.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The running Infinispan Server has authentication enabled and a user with full admin role.
The credentials of the user are <strong>admin/password</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="accessing-to-the-infinispan-server-console"><a class="anchor" href="#accessing-to-the-infinispan-server-console"></a>Accessing to the Infinispan Server Console</h3>
<div class="paragraph">
<p>Infinispan Server provides a web console that can be accessed with a browser:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the <a href="dev-ui">Dev UI</a></p>
</li>
<li>
<p>You will see an <strong>Infinispan Client</strong> box. Click on  <strong>Web Console</strong> and enter the credentials above.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If your environment does not support Docker, you will need to spin up an Infinispan Server manually, or connect to an already running server.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overriding-the-infinispan-server-image"><a class="anchor" href="#overriding-the-infinispan-server-image"></a>Overriding the Infinispan Server Image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The extension is updated regularly and the Dev Services will start the latest final version image of Infinispan.
Use <code>quarkus.infinispan-client.devservices.image-name</code> property to specify another image that fits your needs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-disabling-dev-services-for-infinispan"><a class="anchor" href="#enabling-disabling-dev-services-for-infinispan"></a>Enabling / Disabling Dev Services for Infinispan</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dev Services for Infinispan is automatically enabled unless:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>quarkus.infinispan-client.devservices.enabled</code> is set to <code>false</code></p>
</li>
<li>
<p>the <code>quarkus.infinispan-client.server-list</code> is configured</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dev Services for Infinispan relies on Docker to start the broker.
If your environment does not support Docker, you will need to start the broker manually, or connect to an already running broker.
You can configure the broker address using <code>quarkus.infinispan-client.server-list</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cross-site-replication"><a class="anchor" href="#cross-site-replication"></a>Cross Site Replication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want run the Infinispan Server container with Cross Site Replication configuration, you need to provide a site name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.infinispan-client.devservices.site=NYC <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.infinispan-client.devservices.mcast-port=46666 <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Provides a site name for your Infinispan cluster</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Eventually configure a mcastPort if you want to avoid creating a cluster with another container</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Learn more about Cross Site Replication in the Infinispan Cross Site Replication <a href="https://infinispan.org/docs/stable/titles/xsite/xsite.html">documentation guide</a>
and in the Infinispan Cross Site Replication
<a href="https://infinispan.org/tutorials/simple/simple_tutorials.html#cross-site-replication_remote-cache-tutorials">simple code tutorial</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tracing-with-opentelemetry"><a class="anchor" href="#tracing-with-opentelemetry"></a>Tracing with OpenTelemetry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Infinispan supports instrumentation of the server via OpenTelemetry. Enable tracing setting <code>quarkus.infinispan-client.devservices.tracing.enabled</code> to true.
The default otlp exporter endpoint is <code><a href="http://localhost:4317" class="bare">http://localhost:4317</a></code>.
If you are running Jaeger in a container as explained in the <a href="opentelemetry">OpenTelemetry guide</a>, since the containers
are running in the default network, Infinispan container won&#8217;t have access to localhost.
You need to get the IP running the following command and configure the <code>quarkus.infinispan-client.devservices.tracing.exporter.otlp.endpoint</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' jaeger</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="persistence-layer-for-infinispan"><a class="anchor" href="#persistence-layer-for-infinispan"></a>Persistence layer for Infinispan</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Infinispan caches provide several features that need to connect to a persistence layer using a
particular SQL database driver such as persisting caches in a SQL database or off-loading database
tables or queries with SQL cache stores.</p>
</div>
<div class="paragraph">
<p>Infinispan needs the SQL Java Driver depending on the database kind the application is using.
To spin up a container with a particular SQL driver, configure <code>quarkus.infinispan-client.devservices.artifacts</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Learn more about persistence and SQL Cache Stores check the <a href="https://github.com/infinispan-demos/infinispan-sqlstore-demo">SQL Store Demo + Quarkus Demo</a> and
the <a href="https://infinispan.org/docs/stable/titles/configuring/configuring.html#persistence">Infinispan Persistence Documentation</a> guide.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shared-server"><a class="anchor" href="#shared-server"></a>Shared server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most of the time you need to share the server between applications.
Dev Services for Infinispan implements a <em>service discovery</em> mechanism for your multiple Quarkus applications running in <em>dev</em> mode to share a single server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dev Services for Infinispan starts the container with the <code>infinispan</code> label which is used to identify the container.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you need multiple (shared) servers, you can configure the <code>quarkus.infinispan-client.devservices.service-name</code> attribute and indicate the server name.
It looks for a container with the same value, or starts a new one if none can be found.
The default service name is <code>infinispan</code>.</p>
</div>
<div class="paragraph">
<p>Sharing is enabled by default in dev mode, but disabled in test mode.
You can disable the sharing with <code>quarkus.infinispan-client.devservices.shared=false</code></p>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://twitter.com/quarkusio" target="_blank">Twitter</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/search-filter.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
</body>

</html>

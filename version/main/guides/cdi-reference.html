<!DOCTYPE html>
<html lang="en">







<head>
  <title>Contexts and Dependency Injection - main - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://embed.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/main/guides/cdi-reference" />
  <meta property="og:title" content="Contexts and Dependency Injection - main" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/cdi-reference">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/main/guides/cdi-reference" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/main/guides/cdi-reference" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/main/guides/cdi-reference" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/main/guides/cdi-reference" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/main/guides/cdi-reference" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/continuum" class="">VERSATILITY</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/main/guides/cdi-reference" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/main/guides/cdi-reference">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/main/guides/cdi-reference">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/main/guides/cdi-reference">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/main/guides/cdi-reference">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/main/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" selected>Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.16.2 - Latest</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <a class="editlink" href="https://github.com/quarkusio/quarkus/edit/main/docs/src/main/asciidoc/cdi-reference.adoc">Edit this Page</a>
      
      <h1 class="text-caps">Contexts and Dependency Injection </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus DI solution (also called ArC) is based on the <a href="https://jakarta.ee/specifications/cdi/4.1/jakarta-cdi-spec-4.1.html" target="_blank" rel="noopener">Jakarta Contexts and Dependency Injection 4.1</a> specification.
It implements the CDI Lite specification, with selected improvements on top, and passes the CDI Lite TCK.
It does not implement CDI Full.
See also <a href="#supported_features_and_limitations">the list of supported features and limitations</a>.
Most of the existing CDI code should work just fine but there are some small differences which follow from the Quarkus architecture and goals.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you&#8217;re new to CDI we recommend you to read the <a href="cdi">Introduction to CDI</a> first.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <a href="cdi-integration">CDI integration guide</a> has more detail on common CDI-related integration use cases, and example code for solutions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bean_discovery"><a class="anchor" href="#bean_discovery"></a>1. Bean Discovery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bean discovery in CDI is a complex process which involves legacy deployment structures and accessibility requirements of the underlying module architecture.
However, Quarkus is using a <strong>simplified bean discovery</strong>.
There is only single bean archive with the <a href="https://jakarta.ee/specifications/cdi/4.1/jakarta-cdi-spec-4.1.html#default_bean_discovery" target="_blank" rel="noopener">bean discovery mode <code>annotated</code></a> and no visibility boundaries.</p>
</div>
<div class="paragraph">
<p>The bean archive is synthesized from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the application classes,</p>
</li>
<li>
<p>dependencies that contain a <code>beans.xml</code> descriptor (content is ignored),</p>
</li>
<li>
<p>dependencies that contain a Jandex index - <code>META-INF/jandex.idx</code>,</p>
</li>
<li>
<p>dependencies referenced by <code>quarkus.index-dependency</code> in <code>application.properties</code>,</p>
</li>
<li>
<p>and Quarkus integration code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bean classes that don&#8217;t have a <a href="https://jakarta.ee/specifications/cdi/4.1/jakarta-cdi-spec-4.1.html#bean_defining_annotations" target="_blank" rel="noopener">bean defining annotation</a> are not discovered.
This behavior is defined by CDI.
But producer methods and fields and observer methods are discovered even if the declaring class is not annotated with a bean defining annotation (this behavior is different to what is defined in CDI).
In fact, the declaring bean classes are considered annotated with <code>@Dependent</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Quarkus extensions may declare additional discovery rules. For example, <code>@Scheduled</code> business methods are registered even if the declaring class is not annotated with a bean defining annotation.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="how-to-generate-a-jandex-index"><a class="anchor" href="#how-to-generate-a-jandex-index"></a>1.1. How to Generate a Jandex Index</h3>
<div class="paragraph">
<p>A dependency with a Jandex index is automatically scanned for beans.
To generate the index just add the following plugin to your build file:</p>
</div>
<div class="sidebarblock primary asciidoc-tabs-sync-maven">
<div class="content">
<div class="title">Maven</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;io.smallrye&lt;/groupId&gt;
      &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;3.2.3&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;make-index&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;jandex&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-sync-gradle-groovy">
<div class="content">
<div class="title">Gradle (Groovy DSL)</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">plugins {
    id 'org.kordamp.gradle.jandex' version '1.0.0'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find the latest plugin version in the <a href="https://plugins.gradle.org/plugin/org.kordamp.gradle.jandex">Gradle Plugin Portal</a></p>
</div>
</div>
</div>
<div class="sidebarblock secondary asciidoc-tabs-sync-gradle-kotlin">
<div class="content">
<div class="title">Gradle (Kotlin DSL)</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin hljs" data-lang="kotlin">plugins {
    id("org.kordamp.gradle.jandex") version "1.0.0"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find the latest plugin version in the <a href="https://plugins.gradle.org/plugin/org.kordamp.gradle.jandex">Gradle Plugin Portal</a></p>
</div>
</div>
</div>
<div class="paragraph">
<p>If you can&#8217;t modify the dependency, you can still index it by adding <code>quarkus.index-dependency</code> entries to your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.index-dependency.&lt;name&gt;.group-id=
quarkus.index-dependency.&lt;name&gt;.artifact-id=(this one is optional)
quarkus.index-dependency.&lt;name&gt;.classifier=(this one is optional)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If no <code>artifact-id</code> is specified then all dependencies with the specified <code>group-id</code> are indexed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, the following entries ensure that the <code>org.acme:acme-api</code> dependency is indexed:</p>
</div>
<div class="listingblock">
<div class="title">Example application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.index-dependency.acme.group-id=org.acme <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.index-dependency.acme.artifact-id=acme-api <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Value is a group id for a dependency identified by name <code>acme</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Value is an artifact id for a dependency identified by name <code>acme</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="how-to-exclude-types-and-dependencies-from-discovery"><a class="anchor" href="#how-to-exclude-types-and-dependencies-from-discovery"></a>1.2. How To Exclude Types and Dependencies from Discovery</h3>
<div class="paragraph">
<p>It may happen that some beans from third-party libraries do not work correctly in Quarkus.
A typical example is a bean injecting a portable extension.
In such case, it&#8217;s possible to exclude types and dependencies from the bean discovery.
The <code>quarkus.arc.exclude-types</code> property accepts a list of string values that are used to match classes that should be excluded.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Value Examples</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match the fully qualified name of the class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match classes with package <code>org.acme</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match classes where the package starts with <code>org.acme</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match the simple name of the class</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.exclude-types=org.acme.Foo,org.acme.*,Bar <i class="conum" data-value="1"></i><b>(1)</b><i class="conum" data-value="2"></i><b>(2)</b><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Exclude the type <code>org.acme.Foo</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Exclude all types from the <code>org.acme</code> package.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Exclude all types whose simple name is <code>Bar</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is also possible to exclude a dependency artifact that would be otherwise scanned for beans.
For example, because it contains a <code>beans.xml</code> descriptor.</p>
</div>
<div class="listingblock">
<div class="title">Example application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.exclude-dependency.acme.group-id=org.acme <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.arc.exclude-dependency.acme.artifact-id=acme-services <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Value is a group id for a dependency identified by name <code>acme</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Value is an artifact id for a dependency identified by name <code>acme</code>.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="native-executables-and-private-members"><a class="anchor" href="#native-executables-and-private-members"></a>2. Native Executables and Private Members</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus is using GraalVM to build a native executable.
One of the limitations of GraalVM is the usage of <a href="https://www.graalvm.org/jdk21/reference-manual/native-image/Reflection/" target="_blank" rel="noopener">Reflection</a>.
Reflective operations are supported but all relevant members must be registered for reflection explicitly.
Those registrations result in a bigger native executable.</p>
</div>
<div class="paragraph">
<p>And if Quarkus DI needs to access a private member it <strong>has to use reflection</strong>.
That&#8217;s why Quarkus users are encouraged <em>not to use private members</em> in their beans.
This involves injection fields, constructors and initializers, observer methods, producer methods and fields, disposers and interceptor methods.</p>
</div>
<div class="paragraph">
<p>How to avoid using private members?
You can use package-private modifiers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class CounterBean {

    @Inject
    CounterService counterService; <i class="conum" data-value="1"></i><b>(1)</b>

    void onMessage(@Observes Event msg) { <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A package-private injection field.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A package-private observer method.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Or constructor injection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class CounterBean {

    private CounterService service;

    CounterBean(CounterService service) { <i class="conum" data-value="1"></i><b>(1)</b>
      this.service = service;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A package-private constructor injection. <code>@Inject</code> is optional in this particular case.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported_features_and_limitations"><a class="anchor" href="#supported_features_and_limitations"></a>3. <a id="supported_features"></a><a id="limitations"></a> Supported Features and Limitations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The CDI Lite specification is fully supported.
The following features from CDI Full are also supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Decorators</p>
<div class="ulist">
<ul>
<li>
<p>Decoration of built-in beans, such as <code>Event</code>, is not supported</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>BeanManager</code></p>
<div class="ulist">
<ul>
<li>
<p>In addition to the <code>BeanContainer</code> methods, the following methods are supported: <code>getInjectableReference()</code>, <code>resolveDecorators()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>@SessionScoped</code></p>
<div class="ulist">
<ul>
<li>
<p>Only with the Undertow extension; see <a href="cdi#bean-scope-available">here</a> for details</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>method invokers</em> implementation supports asynchronous methods.
The following methods are considered asynchronous and <code>@Dependent</code> instances are only destroyed when the asynchronous action completes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>methods that declare a return type of <code>CompletionStage</code>, <code>Uni</code>, or <code>Multi</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These additional features are not covered by the CDI Lite TCK.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nonstandard_features"><a class="anchor" href="#nonstandard_features"></a>4. Non-standard Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="eager-instantiation-of-beans"><a class="anchor" href="#eager-instantiation-of-beans"></a>4.1. Eager Instantiation of Beans</h3>
<div class="sect3">
<h4 id="lazy_by_default"><a class="anchor" href="#lazy_by_default"></a>4.1.1. Lazy By Default</h4>
<div class="paragraph">
<p>By default, CDI beans are created lazily, when needed.
What exactly "needed" means depends on the scope of a bean.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>normal scoped bean</strong> (<code>@ApplicationScoped</code>, <code>@RequestScoped</code>, etc.) is needed when a method is invoked upon an injected instance (contextual reference per the specification).</p>
<div class="paragraph">
<p>In other words, injecting a normal scoped bean will not suffice because a <em>client proxy</em> is injected instead of a contextual instance of the bean.</p>
</div>
</li>
<li>
<p>A <strong>bean with a pseudo-scope</strong> (<code>@Dependent</code> and <code>@Singleton</code> ) is created when injected.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Lazy Instantiation Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton // =&gt; pseudo-scope
class AmazingService {
  String ping() {
    return "amazing";
  }
}

@ApplicationScoped // =&gt; normal scope
class CoolService {
  String ping() {
    return "cool";
  }
}

@Path("/ping")
public class PingResource {

  @Inject
  AmazingService s1; <i class="conum" data-value="1"></i><b>(1)</b>

  @Inject
  CoolService s2; <i class="conum" data-value="2"></i><b>(2)</b>

  @GET
  public String ping() {
    return s1.ping() + s2.ping(); <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Injection triggers the instantiation of <code>AmazingService</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injection itself does not result in the instantiation of <code>CoolService</code>. A client proxy is injected.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The first invocation upon the injected proxy triggers the instantiation of <code>CoolService</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="startup_event"><a class="anchor" href="#startup_event"></a>4.1.2. Startup Event</h4>
<div class="paragraph">
<p>However, if you really need to instantiate a bean eagerly you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Declare an observer of the <code>StartupEvent</code> - the scope of the bean does not matter in this case:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
class CoolService {
  void startup(@Observes StartupEvent event) { <i class="conum" data-value="1"></i><b>(1)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A <code>CoolService</code> is created during startup to service the observer method invocation.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Use the bean in an observer of the <code>StartupEvent</code> - normal scoped beans must be used as described in <a href="#lazy_by_default">Lazy By Default</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
class MyBeanStarter {

  void startup(@Observes StartupEvent event, AmazingService amazing, CoolService cool) { <i class="conum" data-value="1"></i><b>(1)</b>
    cool.toString(); <i class="conum" data-value="2"></i><b>(2)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>AmazingService</code> is created during injection.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>CoolService</code> is a normal scoped bean, so we have to invoke a method upon the injected proxy to force the instantiation.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Annotate the bean with <code>@io.quarkus.runtime.Startup</code> as described in <a href="lifecycle#startup_annotation">Startup annotation</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Startup <i class="conum" data-value="1"></i><b>(1)</b>
@ApplicationScoped
public class EagerAppBean {

   private final String name;

   EagerAppBean(NameGenerator generator) { <i class="conum" data-value="2"></i><b>(2)</b>
     this.name = generator.createName();
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>For each bean annotated with <code>@Startup</code> a synthetic observer of <code>StartupEvent</code> is generated. The default priority is used.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The bean constructor is called when the application starts and the resulting contextual instance is stored in the application context.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Quarkus users are encouraged to always prefer the <code>@Observes StartupEvent</code> to <code>@Initialized(ApplicationScoped.class)</code> as explained in the <a href="lifecycle">Application Initialization and Termination</a> guide.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="request-context-lifecycle"><a class="anchor" href="#request-context-lifecycle"></a>4.2. Request Context Lifecycle</h3>
<div class="paragraph">
<p>The request context is also active:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>during notification of a synchronous observer method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The request context is destroyed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>after the observer notification completes for an event, if it was not already active when the notification started.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An event with qualifier <code>@Initialized(RequestScoped.class)</code> is fired when the request context is initialized for an observer notification. Moreover, the events with qualifiers <code>@BeforeDestroyed(RequestScoped.class)</code> and <code>@Destroyed(RequestScoped.class)</code> are fired when the request context is destroyed.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="how-to-enable-trace-logging-for-request-context-activation"><a class="anchor" href="#how-to-enable-trace-logging-for-request-context-activation"></a>4.2.1. How to Enable Trace Logging for Request Context Activation</h4>
<div class="paragraph">
<p>You can set the <code>TRACE</code> level for the logger <code>io.quarkus.arc.requestContext</code> and try to analyze the log output afterwards.</p>
</div>
<div class="listingblock">
<div class="title"><code>application.properties</code> Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.log.category."io.quarkus.arc.requestContext".min-level=TRACE <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.log.category."io.quarkus.arc.requestContext".level=TRACE</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You also need to adjust the minimum log level for the relevant category.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qualified-injected-fields"><a class="anchor" href="#qualified-injected-fields"></a>4.3. Qualified Injected Fields</h3>
<div class="paragraph">
<p>In CDI, if you declare a field injection point you need to use <code>@Inject</code> and optionally a set of qualifiers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  @Inject
  @ConfigProperty(name = "cool")
  String coolProperty;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Quarkus, you can skip the <code>@Inject</code> annotation completely if the injected field declares at least one qualifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  @ConfigProperty(name = "cool")
  String coolProperty;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With the notable exception of one special case discussed below, <code>@Inject</code> is still required for constructor and method injection.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="simplified-constructor-injection"><a class="anchor" href="#simplified-constructor-injection"></a>4.4. Simplified Constructor Injection</h3>
<div class="paragraph">
<p>In CDI, a normal scoped bean must always declare a no-args constructor (this constructor is normally generated by the compiler unless you declare any other constructor).
However, this requirement complicates constructor injection - you need to provide a dummy no-args constructor to make things work in CDI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyCoolService {

  private SimpleProcessor processor;

  MyCoolService() { // dummy constructor needed
  }

  @Inject // constructor injection
  MyCoolService(SimpleProcessor processor) {
    this.processor = processor;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is no need to declare dummy constructors for normal scoped bean in Quarkus - they are generated automatically.
Also, if there&#8217;s only one constructor there is no need for <code>@Inject</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyCoolService {

  private SimpleProcessor processor;

  MyCoolService(SimpleProcessor processor) {
    this.processor = processor;
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We don&#8217;t generate a no-args constructor automatically if a bean class extends a class that does not declare a no-args constructor.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="remove_unused_beans"><a class="anchor" href="#remove_unused_beans"></a>4.5. Removing Unused Beans</h3>
<div class="paragraph">
<p>The container attempts to remove all unused beans, interceptors and decorators during build by default.
This optimization helps to minimize the amount of generated classes, thus conserving memory.
However, Quarkus can&#8217;t detect the programmatic lookup performed via the <code>CDI.current()</code> static method.
Therefore, it is possible that a removal results in a false positive error, i.e. a bean is removed although it&#8217;s actually used.
In such cases, you&#8217;ll notice a big warning in the log.
Users and extension authors have several options <a href="#eliminate_false_positives">how to eliminate false positives</a>.</p>
</div>
<div class="paragraph">
<p>The optimization can be disabled by setting <code>quarkus.arc.remove-unused-beans</code> to <code>none</code> or <code>false</code>.
Quarkus also provides a middle ground where application beans are never removed whether or not they are unused, while the optimization proceeds normally for non application classes.
To use this mode, set <code>quarkus.arc.remove-unused-beans</code> to <code>fwk</code> or <code>framework</code>.</p>
</div>
<div class="sect3">
<h4 id="whats-removed"><a class="anchor" href="#whats-removed"></a>4.5.1. What&#8217;s Removed?</h4>
<div class="paragraph">
<p>Quarkus first identifies so-called <em>unremovable</em> beans that form the roots in the dependency tree.
A good example is a Jakarta REST resource class or a bean which declares a <code>@Scheduled</code> method.</p>
</div>
<div class="paragraph">
<p>An <em>unremovable</em> bean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is <a href="#eliminate_false_positives">excluded from removal</a>, or</p>
</li>
<li>
<p>has a name designated via <code>@Named</code>, or</p>
</li>
<li>
<p>declares an observer method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An <em>unused</em> bean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is not <em>unremovable</em>, and</p>
</li>
<li>
<p>is not eligible for injection to any injection point in the dependency tree of <em>unremovable</em> beans, and</p>
</li>
<li>
<p>does not declare any producer which is eligible for injection to any injection point in the dependency tree, and</p>
</li>
<li>
<p>is not eligible for injection into any <code>jakarta.enterprise.inject.Instance</code> or <code>jakarta.inject.Provider</code> injection point, and</p>
</li>
<li>
<p>is not eligible for injection into any <a href="#injecting-multiple-bean-instances-intuitively"><code>@Inject @All List&lt;&gt;</code></a> injection point.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unused interceptors and decorators are not associated with any bean.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the dev mode (running <code>./mvnw quarkus:dev</code>), you can see more information about which beans are being removed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the console - just enable the DEBUG level in your <code>application.properties</code>, i.e. <code>quarkus.log.category."io.quarkus.arc.processor".level=DEBUG</code></p>
</li>
<li>
<p>In the relevant Dev UI page</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="eliminate_false_positives"><a class="anchor" href="#eliminate_false_positives"></a>4.5.2. How To Eliminate False Positives</h4>
<div class="paragraph">
<p>Users can instruct the container to not remove any of their specific beans (even if they satisfy all the rules specified above) by annotating them with <code>@io.quarkus.arc.Unremovable</code>.
This annotation can be declared on a class, a producer method or field.</p>
</div>
<div class="paragraph">
<p>Since this is not always possible, there is an option to achieve the same via <code>application.properties</code>.
The <code>quarkus.arc.unremovable-types</code> property accepts a list of string values that are used to match beans based on their name or package.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Value Examples</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match the fully qualified name of the bean class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match beans where the package of the bean class is <code>org.acme</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match beans where the package of the bean class starts with <code>org.acme</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match the simple name of the bean class</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.unremovable-types=org.acme.Foo,org.acme.*,Bar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Furthermore, extensions can eliminate false positives by producing an <code>UnremovableBeanBuildItem</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="default_beans"><a class="anchor" href="#default_beans"></a>4.6. Default Beans</h3>
<div class="paragraph">
<p>Quarkus adds a capability that CDI currently does not support which is to conditionally declare a bean if no other bean with equal types and qualifiers was declared by any available means (bean class, producer, synthetic bean, &#8230;&#8203;)
This is done using the <code>@io.quarkus.arc.DefaultBean</code> annotation and is best explained with an example.</p>
</div>
<div class="paragraph">
<p>Say there is a Quarkus extension that among other things declares a few CDI beans like the following code does:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    public Tracer tracer(Reporter reporter, Configuration configuration) {
        return new Tracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Configuration configuration() {
        // create a Configuration
    }

    @Produces
    @DefaultBean
    public Reporter reporter(){
        // create a Reporter
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The idea is that the extension autoconfigures things for the user, eliminating a lot of boilerplate - we can just <code>@Inject</code> a <code>Tracer</code> wherever it is needed.
Now imagine that in our application we would like to utilize the configured <code>Tracer</code>, but we need to customize it a little, for example by providing a custom <code>Reporter</code>.
The only thing that would be needed in our application would be something like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class CustomTracerConfiguration {

    @Produces
    public Reporter reporter(){
        // create a custom Reporter
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@DefaultBean</code> allows extensions (or any other code for that matter) to provide defaults while backing off if beans of that type are supplied in any
way Quarkus supports.</p>
</div>
<div class="paragraph">
<p>Default beans can optionally declare <code>@jakarta.annotation.Priority</code>.
If there is no priority defined, <code>@Priority(0)</code> is assumed.
Priority value is used for bean ordering and during typesafe resolution to disambiguate multiple matching default beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class CustomizedDefaultConfiguration {

    @Produces
    @DefaultBean
    @Priority(100)
    public Configuration customizedConfiguration(){
        // create a customized default Configuration
        // this will have priority over previously defined default bean
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enable_build_profile"><a class="anchor" href="#enable_build_profile"></a>4.7. Enabling Beans for Quarkus Build Profile</h3>
<div class="paragraph">
<p>Quarkus adds a capability that CDI currently does not support which is to conditionally enable a bean when a Quarkus build time profile is enabled,
via the <code>@io.quarkus.arc.profile.IfBuildProfile</code> and <code>@io.quarkus.arc.profile.UnlessBuildProfile</code> annotations.
When used in conjunction with <code>@io.quarkus.arc.DefaultBean</code>, these annotations allow for the creation of different bean configurations for different build profiles.</p>
</div>
<div class="paragraph">
<p>Imagine for instance that an application contains a bean named <code>Tracer</code>, which needs to do nothing when in tests or in dev mode, but works in its normal capacity for the production artifact.
An elegant way to create such beans is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @IfBuildProfile("prod")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If instead, it is required that the <code>Tracer</code> bean also works in dev mode and only default to doing nothing for tests, then <code>@UnlessBuildProfile</code> would be ideal. The code would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @UnlessBuildProfile("test") // this will be enabled for both prod and dev build time profiles
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The runtime profile has absolutely no effect on the bean resolution using <code>@IfBuildProfile</code> and <code>@UnlessBuildProfile</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is also possible to use <code>@IfBuildProfile</code> and <code>@UnlessBuildProfile</code> on stereotypes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="enable_build_properties"><a class="anchor" href="#enable_build_properties"></a>4.8. Enabling Beans for Quarkus Build Properties</h3>
<div class="paragraph">
<p>Quarkus adds a capability that CDI currently does not support which is to conditionally enable a bean when a Quarkus build time property has/has not a specific value,
via the <code>@io.quarkus.arc.properties.IfBuildProperty</code> and <code>@io.quarkus.arc.properties.UnlessBuildProperty</code> annotations.
When used in conjunction with <code>@io.quarkus.arc.DefaultBean</code>, this annotation allow for the creation of different bean configurations for different build properties.</p>
</div>
<div class="paragraph">
<p>The scenario we mentioned above with <code>Tracer</code> could also be implemented in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @IfBuildProperty(name = "some.tracer.enabled", stringValue = "true")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>@IfBuildProperty</code> and <code>@UnlessBuildProperty</code> are repeatable annotations, i.e. a bean will only be enabled if <strong>all</strong> the conditions defined by these annotations are satisfied.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If instead, it is required that the <code>RealTracer</code> bean is only used if the <code>some.tracer.enabled</code> property is not <code>false</code>, then <code>@UnlessBuildProperty</code> would be ideal. The code would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Dependent
public class TracerConfiguration {

    @Produces
    @UnlessBuildProperty(name = "some.tracer.enabled", stringValue = "false")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }

    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties set at runtime have absolutely no effect on the bean resolution using <code>@IfBuildProperty</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is also possible to use <code>@IfBuildProperty</code> and <code>@UnlessBuildProperty</code> on stereotypes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="declaring-selected-alternatives"><a class="anchor" href="#declaring-selected-alternatives"></a>4.9. Declaring Selected Alternatives</h3>
<div class="paragraph">
<p>In CDI, an alternative bean may be selected either globally for an application by means of <code>@Priority</code>, or for a bean archive using a <code>beans.xml</code> descriptor.
Quarkus has a simplified bean discovery and the content of <code>beans.xml</code> is ignored.</p>
</div>
<div class="paragraph">
<p>However, it is also possible to select alternatives for an application using the unified configuration.
The <code>quarkus.arc.selected-alternatives</code> property accepts a list of string values that are used to match alternative beans.
If any value matches then the priority of <code>Integer#MAX_VALUE</code> is used for the relevant bean.
The priority declared via <code>@Priority</code> or inherited from a stereotype is overridden.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Value Examples</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.Foo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match the fully qualified name of the bean class or the bean class of the bean that declares the producer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match beans where the package of the bean class is <code>org.acme</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.acme.**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match beans where the package of the bean class starts with <code>org.acme</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Match the simple name of the bean class or the bean class of the bean that declares the producer</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.selected-alternatives=org.acme.Foo,org.acme.*,Bar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="simplified-producer-method-declaration"><a class="anchor" href="#simplified-producer-method-declaration"></a>4.10. Simplified Producer Method Declaration</h3>
<div class="paragraph">
<p>In CDI, a producer method must be always annotated with <code>@Produces</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Producers {

  @Inject
  @ConfigProperty(name = "cool")
  String coolProperty;

  @Produces
  @ApplicationScoped
  MyService produceService() {
    return new MyService(coolProperty);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In Quarkus, you can skip the <code>@Produces</code> annotation completely if the producer method is annotated with a scope annotation, a stereotype or a qualifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Producers {

  @ConfigProperty(name = "cool")
  String coolProperty;

  @ApplicationScoped
  MyService produceService() {
    return new MyService(coolProperty);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="interception_of_static_methods"><a class="anchor" href="#interception_of_static_methods"></a>4.11. Interception of Static Methods</h3>
<div class="paragraph">
<p>The Interceptors specification is clear that <em>around-invoke</em> methods must not be declared static.
However, this restriction was driven mostly by technical limitations.
And since Quarkus is a build-time oriented stack that allows for additional class transformations, those limitations don&#8217;t apply anymore.
It&#8217;s possible to annotate a non-private static method with an interceptor binding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Services {

  @Logged <i class="conum" data-value="1"></i><b>(1)</b>
  static BigDecimal computePrice(long amount) { <i class="conum" data-value="2"></i><b>(2)</b>
    BigDecimal price;
    // Perform computations...
    return price;
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Logged</code> is an interceptor binding.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Each method invocation is intercepted if there is an interceptor associated with <code>Logged</code>.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="limitations"><a class="anchor" href="#limitations"></a>4.11.1. Limitations</h4>
<div class="ulist">
<ul>
<li>
<p>Only <strong>method-level bindings</strong> are considered for backward compatibility reasons (otherwise static methods of bean classes that declare class-level bindings would be suddenly intercepted)</p>
</li>
<li>
<p>Private static methods are never intercepted</p>
</li>
<li>
<p><code>InvocationContext#getTarget()</code> returns <code>null</code> for obvious reasons; therefore not all existing interceptors may behave correctly when intercepting static methods</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Interceptors can use <code>InvocationContext.getMethod()</code> to detect static methods and adjust the behavior accordingly.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="unproxyable_classes_transformation"><a class="anchor" href="#unproxyable_classes_transformation"></a>4.12. Ability to handle 'final' classes and methods</h3>
<div class="paragraph">
<p>In normal CDI, classes that are marked as <code>final</code> and / or have <code>final</code> methods are not eligible for proxy creation,
which in turn means that interceptors and normal scoped beans don&#8217;t work properly.
This situation is very common when trying to use CDI with alternative JVM languages like Kotlin where classes and methods are <code>final</code> by default.</p>
</div>
<div class="paragraph">
<p>Quarkus however, can overcome these limitations when <code>quarkus.arc.transform-unproxyable-classes</code> is set to <code>true</code> (which is the default value).</p>
</div>
</div>
<div class="sect2">
<h3 id="container-managed-concurrency"><a class="anchor" href="#container-managed-concurrency"></a>4.13. Container-managed Concurrency</h3>
<div class="paragraph">
<p>There is no standard concurrency control mechanism for CDI beans.
Nevertheless, a bean instance can be shared and accessed concurrently from multiple threads.
In that case it should be thread-safe.
You can use standard Java constructs (<code>volatile</code>, <code>synchronized</code>, <code>ReadWriteLock</code>, etc.) or let the container control the concurrent access.
Quarkus provides <code>@io.quarkus.arc.Lock</code> and a built-in interceptor for this interceptor binding.
Each interceptor instance associated with a contextual instance of an intercepted bean holds a separate <code>ReadWriteLock</code> with non-fair ordering policy.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>io.quarkus.arc.Lock</code> is a regular interceptor binding and as such can be used for any bean with any scope. However, it is especially useful for "shared" scopes, e.g. <code>@Singleton</code> and <code>@ApplicationScoped</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Container-managed Concurrency Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.arc.Lock;

@Lock <i class="conum" data-value="1"></i><b>(1)</b>
@ApplicationScoped
class SharedService {

  void addAmount(BigDecimal amount) {
    // ...changes some internal state of the bean
  }

  @Lock(value = Lock.Type.READ, time = 1, unit = TimeUnit.SECONDS) <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>
  BigDecimal getAmount() {
    // ...it is safe to read the value concurrently
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@Lock</code> (which maps to <code>@Lock(Lock.Type.WRITE)</code>) declared on the class instructs the container to lock the bean instance for any invocation of any business method, i.e. the client has "exclusive access" and no concurrent invocations will be allowed.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@Lock(Lock.Type.READ)</code> overrides the value specified at class level. It means that any number of clients can invoke the method concurrently, unless the bean instance is locked by <code>@Lock(Lock.Type.WRITE)</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can also specify the "wait time". If it&#8217;s not possible to acquire the lock in the given time a <code>LockException</code> is thrown.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="repeatable-interceptor-bindings"><a class="anchor" href="#repeatable-interceptor-bindings"></a>4.14. Repeatable interceptor bindings</h3>
<div class="paragraph">
<p>Quarkus has limited support for <code>@Repeatable</code> interceptor binding annotations.</p>
</div>
<div class="paragraph">
<p>When binding an interceptor to a component, you can declare multiple <code>@Repeatable</code> annotations on methods.
Repeatable interceptor bindings declared on classes and stereotypes are not supported, because there are some open questions around interactions with the Interceptors specification.
This might be added in the future.</p>
</div>
<div class="paragraph">
<p>As an example, suppose we have an interceptor that clears a cache.
The corresponding interceptor binding would be called <code>@CacheInvalidateAll</code> and would be declared as <code>@Repeatable</code>.
If we wanted to clear two caches at the same time, we would add <code>@CacheInvalidateAll</code> twice:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
class CachingService {
  @CacheInvalidateAll(cacheName = "foo")
  @CacheInvalidateAll(cacheName = "bar")
  void heavyComputation() {
    // ...
    // some computation that updates a lot of data
    // and requires 2 caches to be invalidated
    // ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is how interceptors are used.
What about creating an interceptor?</p>
</div>
<div class="paragraph">
<p>When declaring interceptor bindings of an interceptor, you can add multiple <code>@Repeatable</code> annotations to the interceptor class as usual.
This is useless when the annotation members are <code>@Nonbinding</code>, as would be the case for the <code>@Cached</code> annotation, but is important otherwise.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have an interceptor that can automatically log method invocations to certain targets.
The interceptor binding annotation <code>@Logged</code> would have a member called <code>target</code>, which specifies where to store the log.
Our implementation could be restricted to console logging and file logging:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Interceptor
@Logged(target = "console")
@Logged(target = "file")
class NaiveLoggingInterceptor {
  // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other interceptors could be provided to log method invocations to different targets.</p>
</div>
</div>
<div class="sect2">
<h3 id="caching-the-result-of-programmatic-lookup"><a class="anchor" href="#caching-the-result-of-programmatic-lookup"></a>4.15. Caching the Result of Programmatic Lookup</h3>
<div class="paragraph">
<p>In certain situations, it is practical to obtain a bean instance programmatically via an injected <code>jakarta.enterprise.inject.Instance</code> and <code>Instance.get()</code>.
However, according to the specification the <code>get()</code> method must identify the matching bean and obtain a contextual reference.
As a consequence, a new instance of a  <code>@Dependent</code> bean is returned from each invocation of <code>get()</code>.
Moreover, this instance is a dependent object of the injected <code>Instance</code>.
This behavior is well-defined, but it may lead to unexpected errors and memory leaks.
Therefore, Quarkus comes with the <code>io.quarkus.arc.WithCaching</code> annotation.
An injected <code>Instance</code> annotated with this annotation will cache the result of the <code>Instance#get()</code> operation.
The result is computed on the first call and the same value is returned for all subsequent calls, even for <code>@Dependent</code> beans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class Producer {

  AtomicLong nextLong = new AtomicLong();
  AtomicInteger nextInt = new AtomicInteger();

   @Dependent
   @Produces
   Integer produceInt() {
     return nextInt.incrementAndGet();
   }

   @Dependent
   @Produces
   Long produceLong() {
     return nextLong.incrementAndGet();
   }
}

class Consumer {

  @Inject
  Instance&lt;Long&gt; longInstance;

  @Inject
  @WithCaching
  Instance&lt;Integer&gt; intInstance;

  // this method should always return true
  // Producer#produceInt() is only called once
  boolean pingInt() {
    return intInstance.get().equals(intInstance.get());
  }

  // this method should always return false
  // Producer#produceLong() is called twice per each pingLong() invocation
  boolean pingLong() {
    return longInstance.get().equals(longInstance.get());
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is also possible to clear the cached value via <code>io.quarkus.arc.InjectableInstance.clearCache()</code>. In this case, you&#8217;ll need to inject the Quarkus-specific <code>io.quarkus.arc.InjectableInstance</code> instead of <code>jakarta.enterprise.inject.Instance</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="declaratively-choose-beans-that-can-be-obtained-by-programmatic-lookup"><a class="anchor" href="#declaratively-choose-beans-that-can-be-obtained-by-programmatic-lookup"></a>4.16. Declaratively Choose Beans That Can Be Obtained by Programmatic Lookup</h3>
<div class="paragraph">
<p>It is sometimes useful to narrow down the set of beans that can be obtained by programmatic lookup via <code>jakarta.enterprise.inject.Instance</code>.
Typically, a user needs to choose the appropriate implementation of an interface based on a runtime configuration property.</p>
</div>
<div class="paragraph">
<p>Imagine that we have two beans implementing the interface <code>org.acme.Service</code>.
You can&#8217;t inject the <code>org.acme.Service</code> directly unless your implementations declare a CDI qualifier.
However, you can inject the <code>Instance&lt;Service&gt;</code> instead, then iterate over all implementations and choose the correct one manually.
Alternatively, you can use the <code>@LookupIfProperty</code> and <code>@LookupUnlessProperty</code> annotations.
<code>@LookupIfProperty</code> indicates that a bean should only be obtained if a runtime configuration property matches the provided value.
<code>@LookupUnlessProperty</code>, on the other hand, indicates that a bean should only be obtained if a runtime configuration property does not match the provided value.</p>
</div>
<div class="listingblock">
<div class="title"><code>@LookupIfProperty</code> Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> interface Service {
    String name();
 }

 @LookupIfProperty(name = "service.foo.enabled", stringValue = "true")
 @ApplicationScoped
 class ServiceFoo implements Service {

    public String name() {
       return "foo";
    }
 }

 @ApplicationScoped
 class ServiceBar implements Service {

    public String name() {
       return "bar";
    }
 }

 @ApplicationScoped
 class Client {

    @Inject
    Instance&lt;Service&gt; service;

    void printServiceName() {
       // This will print "bar" if the property "service.foo.enabled" is NOT set to "true"
       // If "service.foo.enabled" is set to "true" then service.get() would result in an AmbiguousResolutionException
       System.out.println(service.get().name());
    }
 }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sorting-beans-obtained-with-programmatic-lookup"><a class="anchor" href="#sorting-beans-obtained-with-programmatic-lookup"></a>4.17. Sorting beans obtained with programmatic lookup</h3>
<div class="paragraph">
<p>If there is more than one bean that matches the required type and qualifiers and is eligible for injection, it is possible to iterate (or stream) available bean instances.
Beans returned by both stream and iterator methods are sorted by priority as defined by <code>io.quarkus.arc.InjectableBean#getPriority()</code>. Higher priority goes first.
If no priority is explicitly declared, 0 is assumed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">interface Service {

}

@Priority(100)
@ApplicationScoped
class FirstService implements Service {

}

@Priority(10)
@ApplicationScoped
class SecondService implements Service {

}

@ApplicationScoped
class ThirdService implements Service {

}

@ApplicationScoped
class Client {

   @Inject
   Instance&lt;Service&gt; serviceInstance;

   void printServiceName() {
       if(service.isAmbiguous()){
           for (Service service : serviceInstance) {
                // FirstService, SecondService, ThirdService
           }
       }
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="injecting-multiple-bean-instances-intuitively"><a class="anchor" href="#injecting-multiple-bean-instances-intuitively"></a>4.18. Injecting Multiple Bean Instances Intuitively</h3>
<div class="paragraph">
<p>In CDI, it&#8217;s possible to inject multiple bean instances (aka contextual references) via the <code>jakarta.enterprise.inject.Instance</code> which implements <code>java.lang.Iterable</code>.
However, it&#8217;s not exactly intuitive.
Therefore, a new way was introduced in Quarkus - you can inject a <code>java.util.List</code> annotated with the <code>io.quarkus.arc.All</code> qualifier.
The type of elements in the list is used as the required type when performing the lookup.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class Processor {

     @Inject
     @All
     List&lt;Service&gt; services; <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The injected instance is an <em>immutable list</em> of the contextual references of the <em>disambiguated</em> beans.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>For this injection point the required type is <code>Service</code> and no additional qualifiers are declared.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The list is sorted by priority as defined by <code>io.quarkus.arc.InjectableBean#getPriority()</code>. Higher priority goes first. In general, the <code>@jakarta.annotation.Priority</code> annotation can be used to assign the priority to a class bean, producer method or producer field.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If an injection point declares no other qualifier than <code>@All</code> then <code>@Any</code> is used, i.e. the behavior is equivalent to <code>@Inject @Any Instance&lt;Service&gt;</code>.</p>
</div>
<div class="paragraph">
<p>You can also inject a list of bean instances wrapped in <code>io.quarkus.arc.InstanceHandle</code>.
This can be useful if you need to inspect the related bean metadata.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class Processor {

     @Inject
     @All
     List&lt;InstanceHandle&lt;Service&gt;&gt; services;

     public void doSomething() {
       for (InstanceHandle&lt;Service&gt; handle : services) {
         if (handle.getBean().getScope().equals(Dependent.class)) {
           handle.get().process();
           break;
         }
       }
     }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Neither a type variable nor a wildcard is a legal type parameter for an <code>@All List&lt;&gt;</code> injection point, i.e. <code>@Inject @All List&lt;?&gt; all</code> is not supported and results in a deployment error.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is also possible to obtain the list of all bean instance handles programmatically via the <code>Arc.container().listAll()</code> methods.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ignoring-class-level-interceptor-bindings-for-methods-and-constructors"><a class="anchor" href="#ignoring-class-level-interceptor-bindings-for-methods-and-constructors"></a>4.19. Ignoring Class-Level Interceptor Bindings for Methods and Constructors</h3>
<div class="paragraph">
<p>If a managed bean declares interceptor binding annotations on the class level, the corresponding <code>@AroundInvoke</code> interceptors will apply to all business methods.
Similarly, the corresponding <code>@AroundConstruct</code> interceptors will apply to the bean constructor.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have a logging interceptor with the <code>@Logged</code> binding annotation and a tracing interceptor with the <code>@Traced</code> binding annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
@Logged
public class MyService {
    public void doSomething() {
        ...
    }

    @Traced
    public void doSomethingElse() {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, both <code>doSomething</code> and <code>doSomethingElse</code> will be intercepted by the hypothetical logging interceptor.
Additionally, the <code>doSomethingElse</code> method will be intercepted by the hypothetical tracing interceptor.</p>
</div>
<div class="paragraph">
<p>Now, if that <code>@Traced</code> interceptor also performed all the necessary logging, we&#8217;d like to skip the <code>@Logged</code> interceptor for this method, but keep it for all other methods.
To achieve that, you can annotate the method with <code>@NoClassInterceptors</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Traced
@NoClassInterceptors
public void doSomethingElse() {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@NoClassInterceptors</code> annotation may be put on methods and constructors and means that all class-level interceptors are ignored for these methods and constructors.
In other words, if a method/constructor is annotated <code>@NoClassInterceptors</code>, then the only interceptors that will apply to this method/constructor are interceptors declared directly on the method/constructor.</p>
</div>
<div class="paragraph">
<p>This annotation affects only business method interceptors (<code>@AroundInvoke</code>) and constructor lifecycle callback interceptors (<code>@AroundConstruct</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="exceptions-thrown-by-an-asynchronous-observer-method"><a class="anchor" href="#exceptions-thrown-by-an-asynchronous-observer-method"></a>4.20. Exceptions Thrown By An Asynchronous Observer Method</h3>
<div class="paragraph">
<p>If an exception is thrown by an asynchronous observer then the <code>CompletionStage</code> returned by the <code>fireAsync()</code> method completes exceptionally so that the event producer may react appropriately.
However, if the event producer does not care then the exception is ignored silently.
Therefore, Quarkus logs an error message by default.
It is also possible to implement a custom <code>AsyncObserverExceptionHandler</code>.
A bean that implements this interface should be <code>@jakarta.inject.Singleton</code> or <code>@jakarta.enterprise.context.ApplicationScoped</code>.</p>
</div>
<div class="listingblock">
<div class="title"><code>NoopAsyncObserverExceptionHandler</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Singleton
public class NoopAsyncObserverExceptionHandler implements AsyncObserverExceptionHandler {

  void handle(Throwable throwable, ObserverMethod&lt;?&gt; observerMethod, EventContext&lt;?&gt; eventContext) {
    // do nothing
  }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="intercepted-self-invocation"><a class="anchor" href="#intercepted-self-invocation"></a>4.21. Intercepted self-invocation</h3>
<div class="paragraph">
<p>Quarkus supports what is known as intercepted self-invocation or just self-interception - a scenario where CDI bean invokes its own intercepted method from within another method while triggering any associated interceptors.
This is a non-standard feature as CDI specification doesn&#8217;t define whether self-interception should work or not.</p>
</div>
<div class="paragraph">
<p>Suppose we have a CDI bean with two methods, one of which has the <code>@Transactional</code> interceptor binding associated with it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class MyService {

  @Transactional <i class="conum" data-value="1"></i><b>(1)</b>
  void doSomething() {
    // some application logic
  }

  void doSomethingElse() {
    doSomething();<i class="conum" data-value="2"></i><b>(2)</b>
  }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>One or more interceptor bindings; <code>@Transactional</code> is just an example.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Non-intercepted method invoking another method from the same bean that has associated binding(s); this will trigger interception.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the above example, any code calling the <code>doSomething()</code> method triggers interception - in this case, the method becomes transactional.
This is regardless of whether the invocation originated directly from the <code>MyService</code> bean (such as <code>MyService#doSomethingElse</code>) or from some other bean.</p>
</div>
</div>
<div class="sect2">
<h3 id="intercepting-producer-methods-and-synthetic-beans"><a class="anchor" href="#intercepting-producer-methods-and-synthetic-beans"></a>4.22. Intercepting Producer Methods and Synthetic Beans</h3>
<div class="paragraph">
<p>By default, interception is only supported for managed beans (also known as class-based beans).
To support interception of producer methods and synthetic beans, the CDI specification includes an <code>InterceptionFactory</code>, which is a runtime oriented concept and therefore cannot be supported in Quarkus.</p>
</div>
<div class="paragraph">
<p>Instead, Quarkus has its own API: <code>InterceptionProxy</code> and <code>@BindingsSource</code>.
The <code>InterceptionProxy</code> is very similar to <code>InterceptionFactory</code>: it creates a proxy that applies <code>@AroundInvoke</code> interceptors before forwarding the method call to the target instance.
The <code>@BindingsSource</code> annotation allows setting interceptor bindings in case the intercepted class is external and cannot be changed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.arc.InterceptionProxy;

@ApplicationScoped
class MyProducer {
    @Produces
    MyClass produce(InterceptionProxy&lt;MyClass&gt; proxy) { <i class="conum" data-value="1"></i><b>(1)</b>
        return proxy.create(new MyClass()); <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declares an injection point of type <code>InterceptionProxy&lt;MyClass&gt;</code>.
This means that at build time, a subclass of <code>MyClass</code> is generated that does the interception and forwarding.
Note that the type argument must be identical to the return type of the producer method.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Creates an instance of the interception proxy for the given instance of <code>MyClass</code>.
The method calls will be forwarded to this target instance after all interceptors run.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this example, interceptor bindings are read from the <code>MyClass</code> class.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Note that <code>InterceptionProxy</code> only supports <code>@AroundInvoke</code> interceptors declared on interceptor classes.
Other kinds of interception, as well as <code>@AroundInvoke</code> interceptors declared on the target class and its superclasses, are not supported.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The intercepted class should be <a href="https://jakarta.ee/specifications/cdi/4.1/jakarta-cdi-spec-4.1#unproxyable">proxyable</a> and therefore should not be <code>final</code>, should not have non-private <code>final</code> methods, and should have a non-private zero-parameter constructor.
If it isn&#8217;t, a bytecode transformation will attempt to fix it if <a href="#unproxyable_classes_transformation">enabled</a>, but note that adding a zero-parameter constructor is not always possible.</p>
</div>
<div class="paragraph">
<p>It is often the case that the produced classes come from external libraries and don&#8217;t contain interceptor binding annotations at all.
To support such cases, the <code>@BindingsSource</code> annotation may be declared on the <code>InterceptionProxy</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.arc.BindingsSource;
import io.quarkus.arc.InterceptionProxy;

abstract class MyClassBindings { <i class="conum" data-value="1"></i><b>(1)</b>
    @MyInterceptorBinding
    abstract String doSomething();
}

@ApplicationScoped
class MyProducer {
    @Produces
    MyClass produce(@BindingsSource(MyClassBindings.class) InterceptionProxy&lt;MyClass&gt; proxy) { <i class="conum" data-value="2"></i><b>(2)</b>
        return proxy.create(new MyClass());
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A class that mirrors the <code>MyClass</code> structure and contains interceptor bindings.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>@BindingsSource</code> annotation says that interceptor bindings for <code>MyClass</code> should be read from <code>MyClassBindings</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The concept of <em>bindings source</em> is a build-time friendly equivalent of <code>InterceptionFactory.configure()</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Producer method interception and synthetic bean interception only works for instance methods.
<a href="#interception_of_static_methods">Interception of Static Methods</a> is not supported for producer methods and synthetic beans.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="declaring-bindingssource"><a class="anchor" href="#declaring-bindingssource"></a>4.22.1. Declaring <code>@BindingsSource</code></h4>
<div class="paragraph">
<p>The <code>@BindingsSource</code> annotation specifies a class that mirrors the structure of the intercepted class.
Interceptor bindings are then read from that class and treated as if they were declared on the intercepted class.</p>
</div>
<div class="paragraph">
<p>Specifically: class-level interceptor bindings declared on the bindings source class are treated as class-level bindings of the intercepted class.
Method-level interceptor bindings declared on the bindings source class are treated as method-level bindings of a method with the same name, return type, parameter types and <code>static</code> flag of the intercepted class.</p>
</div>
<div class="paragraph">
<p>It is common to make the bindings source class and methods <code>abstract</code> so that you don&#8217;t have to write method bodies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">abstract class MyClassBindings {
    @MyInterceptorBinding
    abstract String doSomething();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since this class is never instantiated and its method are never invoked, this is okay, but it&#8217;s also possible to create a non-<code>abstract</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class MyClassBindings {
    @MyInterceptorBinding
    String doSomething() {
        return null; <i class="conum" data-value="1"></i><b>(1)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The method body does not matter.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that for generic classes, the type variable names must also be identical.
For example, for the following class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class MyClass&lt;T&gt; {
    T doSomething() {
        ...
    }

    void doSomethingElse(T param) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>the bindings source class must also use <code>T</code> as the name of the type variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">abstract class MyClassBindings&lt;T&gt; {
    @MyInterceptorBinding
    abstract T doSomething();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You don&#8217;t need to declare methods that are not annotated simply because they exist on the intercepted class.
If you want to add method-level bindings to a subset of methods, you only have to declare the methods that are supposed to have an interceptor binding.
If you only want to add class-level bindings, you don&#8217;t have to declare any methods at all.</p>
</div>
<div class="paragraph">
<p>These annotations can be present on a bindings source class:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>interceptor bindings</em>: on the class and on the methods</p>
</li>
<li>
<p><em>stereotypes</em>: on the class</p>
</li>
<li>
<p><code>@NoClassInterceptors</code>: on the methods</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any other annotation present on a bindings source class is ignored.</p>
</div>
</div>
<div class="sect3">
<h4 id="synthetic-beans"><a class="anchor" href="#synthetic-beans"></a>4.22.2. Synthetic Beans</h4>
<div class="paragraph">
<p>Using <code>InterceptionProxy</code> in synthetic beans is similar.</p>
</div>
<div class="paragraph">
<p>First, you have to declare that your synthetic bean injects the <code>InterceptionProxy</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void register(RegistrationContext context) {
    context.configure(MyClass.class)
            .types(MyClass.class)
            .injectInterceptionProxy() <i class="conum" data-value="1"></i><b>(1)</b>
            .creator(MyClassCreator.class)
            .done();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Once again, this means that at build time, a subclass of <code>MyClass</code> is generated that does the interception and forwarding.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Second, you have to obtain the <code>InterceptionProxy</code> from the <code>SyntheticCreationalContext</code> in the <code>BeanCreator</code> and use it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MyClass create(SyntheticCreationalContext&lt;MyClass&gt; context) {
    InterceptionProxy&lt;MyClass&gt; proxy = context.getInterceptionProxy(); <i class="conum" data-value="1"></i><b>(1)</b>
    return proxy.create(new MyClass());
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Obtains the <code>InterceptionProxy</code> for <code>MyClass</code>, as declared above.
It would also be possible to use the <code>getInjectedReference()</code> method, passing a <code>TypeLiteral</code>, but <code>getInterceptionProxy()</code> is easier.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There&#8217;s also an equivalent of <code>@BindingsSource</code>.
The <code>injectInterceptionProxy()</code> method has an overload with a parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void register(RegistrationContext context) {
    context.configure(MyClass.class)
            .types(MyClass.class)
            .injectInterceptionProxy(MyClassBindings.class) <i class="conum" data-value="1"></i><b>(1)</b>
            .creator(MyClassCreator.class)
            .done();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The argument is the bindings source class.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="instance-handle-close-behavior"><a class="anchor" href="#instance-handle-close-behavior"></a>4.23. <code>Instance.Handle.close()</code> Behavior</h3>
<div class="paragraph">
<p>Per the CDI specification, the <code>Instance.Handle.close()</code> method always delegates to <code>destroy()</code>.
In ArC, this is only true in the <a href="#strict_mode">Strict Mode</a>.</p>
</div>
<div class="paragraph">
<p>In the default mode, the <code>close()</code> method only delegates to <code>destroy()</code> when the bean is <code>@Dependent</code> (or when the instance handle does not represent a CDI contextual object).
When the instance handle represents a bean of any other scope, the <code>close()</code> method does nothing; the bean is left as is and will be destroyed whenever its context is destroyed.</p>
</div>
<div class="paragraph">
<p>This is to make the following code behave as one would naively expect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Instance&lt;T&gt; instance = ...;
try (Instance.Handle&lt;T&gt; handle : instance.getHandle()) {
   T value = handle.get();
   ... use value ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>@Dependent</code> beans are destroyed immediately, while other beans are not destroyed at all.
This is important when multiple beans of different scopes might be returned by the <code>Instance</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reactive_pitfalls"><a class="anchor" href="#reactive_pitfalls"></a>5. Pitfalls with Reactive Programming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CDI is a purely synchronous framework.
Its notion of asynchrony is very limited and based solely on thread pools and thread offloading.
Therefore, there is a number of pitfalls when using CDI together with reactive programming.</p>
</div>
<div class="sect2">
<h3 id="detecting-when-blocking-is-allowed"><a class="anchor" href="#detecting-when-blocking-is-allowed"></a>5.1. Detecting When Blocking Is Allowed</h3>
<div class="paragraph">
<p>The <code>io.quarkus.runtime.BlockingOperationControl#isBlockingAllowed()</code> method can be used to detect whether blocking is allowed on the current thread.
When it is not, and you need to perform a blocking operation, you have to offload it to another thread.
The easiest way is to use the <code>Vertx.executeBlocking()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import io.quarkus.runtime.BlockingOperationControl;

@ApplicationScoped
public class MyBean {
    @Inject
    Vertx vertx;

    @PostConstruct
    void init() {
        if (BlockingOperationControl.isBlockingAllowed()) {
            somethingThatBlocks();
        } else {
            vertx.executeBlocking(() -&gt; {
                somethingThatBlocks();
                return null;
            });
        }
    }

    void somethingThatBlocks() {
        // use the file system or JDBC, call a REST service, etc.
        Thread.sleep(5000);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="asynchronous-observers"><a class="anchor" href="#asynchronous-observers"></a>5.2. Asynchronous Observers</h3>
<div class="paragraph">
<p>CDI asynchronous observers (<code>@ObservesAsync</code>) are not aware of reactive programming and are not meant to be used as part of reactive pipelines.
The observer methods are meant to be synchronous, they are just offloaded to a thread pool.</p>
</div>
<div class="paragraph">
<p>The <code>Event.fireAsync()</code> method returns a <code>CompletionStage</code> that completes when all observers are notified.
If all observers were notified successfully, the <code>CompletionStage</code> completes with the event payload.
If some observers have thrown an exception, the <code>CompletionStage</code> completes exceptionally with a <code>CompletionException</code>.</p>
</div>
<div class="paragraph">
<p>The return type of the observer <em>does not matter</em>.
The return value of the observer is <em>ignored</em>.</p>
</div>
<div class="paragraph">
<p>You may declare an observer method that has a return type of <code>CompletionStage&lt;&gt;</code> or <code>Uni&lt;&gt;</code>, but neither the return type nor the actual return value affect the result of <code>Event.fireAsync()</code>.
Further, if the observer declares a return type of <code>Uni&lt;&gt;</code>, the returned <code>Uni</code> will not be subscribed to, so it is quite possible that part of the observer logic will not even execute.</p>
</div>
<div class="paragraph">
<p>Therefore, it is recommended that observer methods, both synchronous and asynchronous, are always declared <code>void</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build_time_apis"><a class="anchor" href="#build_time_apis"></a>6. Build Time Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus incorporates build-time optimizations in order to provide instant startup and low memory footprint.
The downside of this approach is that CDI Portable Extensions cannot be supported.
Nevertheless, most of the functionality can be achieved using Quarkus <a href="writing-extensions">extensions</a>.
See the <a href="cdi-integration">integration guide</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev_mode"><a class="anchor" href="#dev_mode"></a>7. <a id="development-mode"></a> Dev mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In dev mode, two special endpoints are registered automatically to provide some basic debug info in the JSON format:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP GET <code>/q/arc</code> - returns the summary; number of beans, config properties, etc.</p>
</li>
<li>
<p>HTTP GET <code>/q/arc/beans</code> - returns the list of all beans</p>
<div class="ulist">
<ul>
<li>
<p>You can use query params to filter the output:</p>
<div class="ulist">
<ul>
<li>
<p><code>scope</code> - include beans with scope that ends with the given value, i.e. <code><a href="http://localhost:8080/q/arc/beans?scope=ApplicationScoped" class="bare">http://localhost:8080/q/arc/beans?scope=ApplicationScoped</a></code></p>
</li>
<li>
<p><code>beanClass</code> - include beans with bean class that starts with the given value, i.e. <code><a href="http://localhost:8080/q/arc/beans?beanClass=org.acme.Foo" class="bare">http://localhost:8080/q/arc/beans?beanClass=org.acme.Foo</a></code></p>
</li>
<li>
<p><code>kind</code> - include beans of the specified kind (<code>CLASS</code>, <code>PRODUCER_FIELD</code>, <code>PRODUCER_METHOD</code>, <code>INTERCEPTOR</code> or <code>SYNTHETIC</code>), i.e. <code><a href="http://localhost:8080/q/arc/beans?kind=PRODUCER_METHOD" class="bare">http://localhost:8080/q/arc/beans?kind=PRODUCER_METHOD</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>HTTP GET <code>/q/arc/removed-beans</code> - returns the list of unused beans removed during build</p>
</li>
<li>
<p>HTTP GET <code>/q/arc/observers</code> - returns the list of all observer methods</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These endpoints are only available in dev mode, i.e. when you run your application via <code>mvn quarkus:dev</code> (or <code>./gradlew quarkusDev</code>).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="monitoring-business-method-invocations-and-events"><a class="anchor" href="#monitoring-business-method-invocations-and-events"></a>7.1. Monitoring Business Method Invocations and Events</h3>
<div class="paragraph">
<p>In dev mode, it is also possible to enable monitoring of business method invocations and fired events.
Simply set the <code>quarkus.arc.dev-mode.monitoring-enabled</code> configuration property to <code>true</code> and explore the relevant Dev UI pages.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="strict_mode"><a class="anchor" href="#strict_mode"></a>8. Strict Mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, ArC does not perform all validations required by the CDI specification.
It also improves CDI usability in many ways, some of them being directly against the specification.</p>
</div>
<div class="paragraph">
<p>To pass the CDI Lite TCK, ArC also has a <em>strict</em> mode.
This mode enables additional validations and disables certain improvements that conflict with the specification.</p>
</div>
<div class="paragraph">
<p>To enable the strict mode, use the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.arc.strict-compatibility=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some other features affect specification compatibility as well:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#unproxyable_classes_transformation">Transformation of unproxyable classes</a></p>
</li>
<li>
<p><a href="#remove_unused_beans">Unused beans removal</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To get a behavior closer to the specification, these features should be disabled.</p>
</div>
<div class="paragraph">
<p>Applications are recommended to use the default, non-strict mode, which makes CDI more convenient to use.
The "strictness" of the strict mode (the set of additional validations and the set of disabled improvements on top of the CDI specification) may change over time.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arc-configuration-reference"><a class="anchor" href="#arc-configuration-reference"></a>9. ArC Configuration Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> Configuration property fixed at build time - All other configuration properties are overridable at runtime <input type="search" id="config-search-0" placeholder="FILTER CONFIGURATION" disabled></p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable configuration-reference-all-rows">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><span class="header-title">Configuration property</span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-remove-unused-beans"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-remove-unused-beans"><code>quarkus.arc.remove-unused-beans</code></a></span></p>
</div>
<div id="conf-collapsible-desc-1" class="openblock description description-collapsed">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>If set to <code>all</code> (or <code>true</code>) the container will attempt to remove all unused beans.</p>
</li>
<li>
<p>If set to <code>none</code> (or <code>false</code>) no beans will ever be removed even if they are unused (according to the criteria set out below)</p>
</li>
<li>
<p>If set to <code>fwk</code>, then all unused beans will be removed, except the unused beans whose classes are declared in the application code</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An unused bean:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is not a built-in bean or interceptor,</p>
</li>
<li>
<p>is not eligible for injection to any injection point,</p>
</li>
<li>
<p>is not excluded by any extension,</p>
</li>
<li>
<p>does not have a name,</p>
</li>
<li>
<p>does not declare an observer,</p>
</li>
<li>
<p>does not declare any producer which is eligible for injection to any injection point,</p>
</li>
<li>
<p>is not directly eligible for injection into any <code>jakarta.enterprise.inject.Instance</code> injection point</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51860">QUARKUS_ARC_REMOVE_UNUSED_BEANS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51860" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>all</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-auto-inject-fields"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-auto-inject-fields"><code>quarkus.arc.auto-inject-fields</code></a></span></p>
</div>
<div id="conf-collapsible-desc-2" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true <code>@Inject</code> is automatically added to all non-static non-final fields that are annotated with one of the annotations defined by <code>AutoInjectAnnotationBuildItem</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51861">QUARKUS_ARC_AUTO_INJECT_FIELDS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51861" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-transform-unproxyable-classes"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-transform-unproxyable-classes"><code>quarkus.arc.transform-unproxyable-classes</code></a></span></p>
</div>
<div id="conf-collapsible-desc-3" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true, the bytecode of unproxyable beans will be transformed. This ensures that a proxy/subclass can be created properly. If the value is set to false, then an exception is thrown at build time indicating that a subclass/proxy could not be created. Quarkus performs the following transformations when this setting is enabled:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove 'final' modifier from classes and methods when a proxy is required.</p>
</li>
<li>
<p>Create a no-args constructor if needed.</p>
</li>
<li>
<p>Makes private no-args constructors package-private if necessary.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51862">QUARKUS_ARC_TRANSFORM_UNPROXYABLE_CLASSES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51862" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-transform-private-injected-fields"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-transform-private-injected-fields"><code>quarkus.arc.transform-private-injected-fields</code></a></span></p>
</div>
<div id="conf-collapsible-desc-4" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true, the bytecode of private fields that are injection points will be transformed to package private. This ensures that field injection can be performed completely reflection-free. If the value is set to false, then a reflection fallback is used to perform the injection.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51863">QUARKUS_ARC_TRANSFORM_PRIVATE_INJECTED_FIELDS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51863" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-fail-on-intercepted-private-method"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-fail-on-intercepted-private-method"><code>quarkus.arc.fail-on-intercepted-private-method</code></a></span></p>
</div>
<div id="conf-collapsible-desc-5" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true (the default), the build fails if a private method that is neither an observer nor a producer, is annotated with an interceptor binding. An example of this is the use of <code>Transactional</code> on a private method of a bean. If set to false, Quarkus simply logs a warning that the annotation will be ignored.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51864">QUARKUS_ARC_FAIL_ON_INTERCEPTED_PRIVATE_METHOD</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51864" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-selected-alternatives"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-selected-alternatives"><code>quarkus.arc.selected-alternatives</code></a></span></p>
</div>
<div id="conf-collapsible-desc-6" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The list of selected alternatives for an application.</p>
</div>
<div class="paragraph">
<p>An element value can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a fully qualified class name, i.e. <code>org.acme.Foo</code></p>
</li>
<li>
<p>a simple class name as defined by <code>Class#getSimpleName()</code>, i.e. <code>Foo</code></p>
</li>
<li>
<p>a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, matches a package</p>
</li>
<li>
<p>a package name with suffix <code>.**</code>, i.e. <code>org.acme.**</code>, matches a package that starts with the value  Each element value is used to match an alternative bean class, an alternative stereotype annotation type or a bean class that declares an alternative producer. If any value matches then the priority of <code>Integer#MAX_VALUE</code> is used for the relevant bean. The priority declared via <code>jakarta.annotation.Priority</code> is overridden.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51865">QUARKUS_ARC_SELECTED_ALTERNATIVES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51865" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-auto-producer-methods"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-auto-producer-methods"><code>quarkus.arc.auto-producer-methods</code></a></span></p>
</div>
<div id="conf-collapsible-desc-7" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true then <code>jakarta.enterprise.inject.Produces</code> is automatically added to all non-void methods that are annotated with a scope annotation, a stereotype or a qualifier, and are not annotated with <code>Inject</code> or <code>Produces</code>, and no parameter is annotated with <code>Disposes</code>, <code>Observes</code> or <code>ObservesAsync</code>.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51866">QUARKUS_ARC_AUTO_PRODUCER_METHODS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51866" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-exclude-types"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-exclude-types"><code>quarkus.arc.exclude-types</code></a></span></p>
</div>
<div id="conf-collapsible-desc-8" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The list of types that should be excluded from discovery.</p>
</div>
<div class="paragraph">
<p>An element value can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a fully qualified class name, i.e. <code>org.acme.Foo</code></p>
</li>
<li>
<p>a simple class name as defined by <code>Class#getSimpleName()</code>, i.e. <code>Foo</code></p>
</li>
<li>
<p>a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, matches a package</p>
</li>
<li>
<p>a package name with suffix <code>.**</code>, i.e. <code>org.acme.**</code>, matches a package that starts with the value  If any element value matches a discovered type then the type is excluded from discovery, i.e. no beans and observer methods are created from this type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51867">QUARKUS_ARC_EXCLUDE_TYPES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51867" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-unremovable-types"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-unremovable-types"><code>quarkus.arc.unremovable-types</code></a></span></p>
</div>
<div id="conf-collapsible-desc-9" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>List of types that should be considered unremovable regardless of whether they are directly used or not. This is a configuration option equivalent to using <code>io.quarkus.arc.Unremovable</code> annotation.</p>
</div>
<div class="paragraph">
<p>An element value can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a fully qualified class name, i.e. <code>org.acme.Foo</code></p>
</li>
<li>
<p>a simple class name as defined by <code>Class#getSimpleName()</code>, i.e. <code>Foo</code></p>
</li>
<li>
<p>a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, matches a package</p>
</li>
<li>
<p>a package name with suffix <code>.**</code>, i.e. <code>org.acme.**</code>, matches a package that starts with the value  If any element value matches a discovered bean, then such a bean is considered unremovable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51868">QUARKUS_ARC_UNREMOVABLE_TYPES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51868" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-arc_section_quarkus-arc-exclude-dependency"></a> <span class="section-name section-level0"><a href="#quarkus-arc_section_quarkus-arc-exclude-dependency">Artifacts that should be excluded from discovery</a></span></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-exclude-dependency-dependency-name-group-id"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-exclude-dependency-dependency-name-group-id"><code>quarkus.arc.exclude-dependency."dependency-name".group-id</code></a></span></p>
</div>
<div id="conf-collapsible-desc-10" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maven groupId of the artifact.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51869">QUARKUS_ARC_EXCLUDE_DEPENDENCY__DEPENDENCY_NAME__GROUP_ID</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51869" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">required <span class="icon"><i class="fa fa-exclamation-circle" title="Configuration property is required"></i></span></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-exclude-dependency-dependency-name-artifact-id"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-exclude-dependency-dependency-name-artifact-id"><code>quarkus.arc.exclude-dependency."dependency-name".artifact-id</code></a></span></p>
</div>
<div id="conf-collapsible-desc-11" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maven artifactId of the artifact (optional).</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51870">QUARKUS_ARC_EXCLUDE_DEPENDENCY__DEPENDENCY_NAME__ARTIFACT_ID</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51870" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-exclude-dependency-dependency-name-classifier"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-exclude-dependency-dependency-name-classifier"><code>quarkus.arc.exclude-dependency."dependency-name".classifier</code></a></span></p>
</div>
<div id="conf-collapsible-desc-12" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The maven classifier of the artifact (optional).</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51871">QUARKUS_ARC_EXCLUDE_DEPENDENCY__DEPENDENCY_NAME__CLASSIFIER</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51871" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-detect-unused-false-positives"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-detect-unused-false-positives"><code>quarkus.arc.detect-unused-false-positives</code></a></span></p>
</div>
<div id="conf-collapsible-desc-13" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true then the container attempts to detect "unused removed beans" false positives during programmatic lookup at runtime. You can disable this feature to conserve some memory when running your application in production.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51872">QUARKUS_ARC_DETECT_UNUSED_FALSE_POSITIVES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51872" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-detect-wrong-annotations"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-detect-wrong-annotations"><code>quarkus.arc.detect-wrong-annotations</code></a></span></p>
</div>
<div id="conf-collapsible-desc-14" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true then the container attempts to detect <em>wrong</em> usages of annotations and eventually fails the build to prevent unexpected behavior of a Quarkus application.</p>
</div>
<div class="paragraph">
<p>A typical example is <code>@jakarta.ejb.Singleton</code> which is often confused with <code>@jakarta.inject.Singleton</code>. As a result a component annotated with <code>@jakarta.ejb.Singleton</code> would be completely ignored. Another example is an inner class annotated with a scope annotation - this component would be again completely ignored.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51873">QUARKUS_ARC_DETECT_WRONG_ANNOTATIONS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51873" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-strict-compatibility"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-strict-compatibility"><code>quarkus.arc.strict-compatibility</code></a></span></p>
</div>
<div id="conf-collapsible-desc-15" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to <code>true</code>, the container will perform additional validations mandated by the CDI specification. Some improvements on top of the CDI specification may be disabled. Applications that work as expected in the strict mode should work without a change in the default, non-strict mode.</p>
</div>
<div class="paragraph">
<p>The strict mode is mainly introduced to allow passing the CDI Lite TCK. Applications are recommended to use the default, non-strict mode, which makes CDI more convenient to use. The "strictness" of the strict mode (the set of additional validations and the set of disabled improvements on top of the CDI specification) may change over time.</p>
</div>
<div class="paragraph">
<p>Note that <code>transform-unproxyable-classes</code> and <code>remove-unused-beans</code> also has effect on specification compatibility. You may want to disable these features to get behavior closer to the specification.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51874">QUARKUS_ARC_STRICT_COMPATIBILITY</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51874" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-dev-mode-monitoring-enabled"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-dev-mode-monitoring-enabled"><code>quarkus.arc.dev-mode.monitoring-enabled</code></a></span></p>
</div>
<div id="conf-collapsible-desc-16" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true then the container monitors business method invocations and fired events during the development mode.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This config property should not be changed in the development mode as it requires a full rebuild of the application
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51875">QUARKUS_ARC_DEV_MODE_MONITORING_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51875" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-dev-mode-generate-dependency-graphs"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-dev-mode-generate-dependency-graphs"><code>quarkus.arc.dev-mode.generate-dependency-graphs</code></a></span></p>
</div>
<div id="conf-collapsible-desc-17" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true then the dependency graphs are generated and available in the Dev UI.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51876">QUARKUS_ARC_DEV_MODE_GENERATE_DEPENDENCY_GRAPHS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51876" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-test-disable-application-lifecycle-observers"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-test-disable-application-lifecycle-observers"><code>quarkus.arc.test.disable-application-lifecycle-observers</code></a></span></p>
</div>
<div id="conf-collapsible-desc-18" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true then disable <code>StartupEvent</code> and <code>ShutdownEvent</code> observers declared on application bean classes during the tests.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51877">QUARKUS_ARC_TEST_DISABLE_APPLICATION_LIFECYCLE_OBSERVERS</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51877" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc odd">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-ignored-split-packages"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-ignored-split-packages"><code>quarkus.arc.ignored-split-packages</code></a></span></p>
</div>
<div id="conf-collapsible-desc-19" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>The list of packages that will not be checked for split package issues.</p>
</div>
<div class="paragraph">
<p>A package string representation can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a full name of the package, i.e. <code>org.acme.foo</code></p>
</li>
<li>
<p>a package name with suffix <code>.*</code>, i.e. <code>org.acme.*</code>, which matches a package that starts with provided value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51878">QUARKUS_ARC_IGNORED_SPLIT_PACKAGES</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51878" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">list of string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr class="row-collapsible row-collapsed row-with-desc">
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-lock" title="Fixed at build time"></i></span> <a id="quarkus-arc_quarkus-arc-context-propagation-enabled"></a> <span class="property-path"><a href="#quarkus-arc_quarkus-arc-context-propagation-enabled"><code>quarkus.arc.context-propagation.enabled</code></a></span></p>
</div>
<div id="conf-collapsible-desc-20" class="openblock description description-collapsed">
<div class="content">
<div class="paragraph">
<p>If set to true and the SmallRye Context Propagation extension is present then the CDI contexts will be propagated by means of the MicroProfile Context Propagation API. Specifically, a <code>org.eclipse.microprofile.context.spi.ThreadContextProvider</code> implementation is registered. On the other hand, if set to false then the MicroProfile Context Propagation API will never be used to propagate the CDI contexts. Note that the CDI contexts may be propagated in a different way though. For example with the Vertx duplicated context.</p>
</div>
<div class="paragraph">
<p>Environment variable: <code id="env-var-51879">QUARKUS_ARC_CONTEXT_PROPAGATION_ENABLED</code><button class="btn-copy fa fa-clipboard inline-btn-copy" data-clipboard-action="copy" data-clipboard-target="#env-var-51879" title="Copy to clipboard" do-not-collapse="true"></button></p>
</div>
</div>
</div>
<div class="paragraph description-decoration">
<p><i class="fa fa-chevron-down"></i><span>Show more</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#bean_discovery">1. Bean Discovery</a>
<ul class="sectlevel2">
<li><a href="#how-to-generate-a-jandex-index">1.1. How to Generate a Jandex Index</a></li>
<li><a href="#how-to-exclude-types-and-dependencies-from-discovery">1.2. How To Exclude Types and Dependencies from Discovery</a></li>
</ul>
</li>
<li><a href="#native-executables-and-private-members">2. Native Executables and Private Members</a></li>
<li><a href="#supported_features_and_limitations">3.  Supported Features and Limitations</a></li>
<li><a href="#nonstandard_features">4. Non-standard Features</a>
<ul class="sectlevel2">
<li><a href="#eager-instantiation-of-beans">4.1. Eager Instantiation of Beans</a></li>
<li><a href="#request-context-lifecycle">4.2. Request Context Lifecycle</a></li>
<li><a href="#qualified-injected-fields">4.3. Qualified Injected Fields</a></li>
<li><a href="#simplified-constructor-injection">4.4. Simplified Constructor Injection</a></li>
<li><a href="#remove_unused_beans">4.5. Removing Unused Beans</a></li>
<li><a href="#default_beans">4.6. Default Beans</a></li>
<li><a href="#enable_build_profile">4.7. Enabling Beans for Quarkus Build Profile</a></li>
<li><a href="#enable_build_properties">4.8. Enabling Beans for Quarkus Build Properties</a></li>
<li><a href="#declaring-selected-alternatives">4.9. Declaring Selected Alternatives</a></li>
<li><a href="#simplified-producer-method-declaration">4.10. Simplified Producer Method Declaration</a></li>
<li><a href="#interception_of_static_methods">4.11. Interception of Static Methods</a></li>
<li><a href="#unproxyable_classes_transformation">4.12. Ability to handle 'final' classes and methods</a></li>
<li><a href="#container-managed-concurrency">4.13. Container-managed Concurrency</a></li>
<li><a href="#repeatable-interceptor-bindings">4.14. Repeatable interceptor bindings</a></li>
<li><a href="#caching-the-result-of-programmatic-lookup">4.15. Caching the Result of Programmatic Lookup</a></li>
<li><a href="#declaratively-choose-beans-that-can-be-obtained-by-programmatic-lookup">4.16. Declaratively Choose Beans That Can Be Obtained by Programmatic Lookup</a></li>
<li><a href="#sorting-beans-obtained-with-programmatic-lookup">4.17. Sorting beans obtained with programmatic lookup</a></li>
<li><a href="#injecting-multiple-bean-instances-intuitively">4.18. Injecting Multiple Bean Instances Intuitively</a></li>
<li><a href="#ignoring-class-level-interceptor-bindings-for-methods-and-constructors">4.19. Ignoring Class-Level Interceptor Bindings for Methods and Constructors</a></li>
<li><a href="#exceptions-thrown-by-an-asynchronous-observer-method">4.20. Exceptions Thrown By An Asynchronous Observer Method</a></li>
<li><a href="#intercepted-self-invocation">4.21. Intercepted self-invocation</a></li>
<li><a href="#intercepting-producer-methods-and-synthetic-beans">4.22. Intercepting Producer Methods and Synthetic Beans</a></li>
<li><a href="#instance-handle-close-behavior">4.23. <code>Instance.Handle.close()</code> Behavior</a></li>
</ul>
</li>
<li><a href="#reactive_pitfalls">5. Pitfalls with Reactive Programming</a>
<ul class="sectlevel2">
<li><a href="#detecting-when-blocking-is-allowed">5.1. Detecting When Blocking Is Allowed</a></li>
<li><a href="#asynchronous-observers">5.2. Asynchronous Observers</a></li>
</ul>
</li>
<li><a href="#build_time_apis">6. Build Time Extensions</a></li>
<li><a href="#dev_mode">7.  Dev mode</a>
<ul class="sectlevel2">
<li><a href="#monitoring-business-method-invocations-and-events">7.1. Monitoring Business Method Invocations and Events</a></li>
</ul>
</li>
<li><a href="#strict_mode">8. Strict Mode</a></li>
<li><a href="#arc-configuration-reference">9. ArC Configuration Reference</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same extensions</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/main/guides/lifecycle">Application Initialization and Termination</a></li>
      
        
        <li class="guide"><a href="/version/main/guides/cdi-integration">CDI Integration Guide</a></li>
      
        
        <li class="guide"><a href="/version/main/guides/cdi">Introduction to Contexts and Dependency Injection (CDI)</a></li>
      </ul>
    </div>
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/main/guides/cdi">Introduction to Contexts and Dependency Injection (CDI)</a></li>
      
        
        <li class="guide"><a href="/version/main/guides/cdi-integration">CDI Integration Guide</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

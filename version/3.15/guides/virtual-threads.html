<!DOCTYPE html>
<html lang="en">







<head>
  <title>Virtual Thread support reference - 3.15 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.15/guides/virtual-threads" />
  <meta property="og:title" content="Virtual Thread support reference - 3.15" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/virtual-threads">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/3.15/guides/virtual-threads" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/3.15/guides/virtual-threads" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/3.15/guides/virtual-threads" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/3.15/guides/virtual-threads" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/3.15/guides/virtual-threads" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.15/guides/virtual-threads" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.15/guides/virtual-threads">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/3.15/guides/virtual-threads">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.15/guides/virtual-threads">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.15/guides/virtual-threads">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.15/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.23.4 - Latest</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" selected>3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Virtual Thread support reference </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide explains how to benefit from Java 21+ virtual threads in Quarkus application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-are-virtual-threads"><a class="anchor" href="#what-are-virtual-threads"></a>What are virtual threads?</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="terminology"><a class="anchor" href="#terminology"></a>Terminology</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">OS thread</dt>
<dd>
<p>A "thread-like" data structure managed by the Operating System.</p>
</dd>
<dt class="hdlist1">Platform thread</dt>
<dd>
<p>Until Java 19, every instance of the <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Thread.html">Thread</a> class was a platform thread, a wrapper around an OS thread.
Creating a platform thread creates an OS thread, and blocking a platform thread blocks an OS thread.</p>
</dd>
<dt class="hdlist1">Virtual thread</dt>
<dd>
<p>Lightweight, JVM-managed threads. They extend the <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Thread.html">Thread</a> class but are not tied to one specific OS thread.
Thus, scheduling virtual threads is the responsibility of the JVM.</p>
</dd>
<dt class="hdlist1">Carrier thread</dt>
<dd>
<p>A platform thread used to execute a virtual thread is called a <strong>carrier</strong> thread.
It isn&#8217;t a class distinct from <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Thread.html">Thread</a> or <code>VirtualThread</code> but rather a functional denomination.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="differences-between-virtual-threads-and-platform-threads"><a class="anchor" href="#differences-between-virtual-threads-and-platform-threads"></a>Differences between virtual threads and platform threads</h3>
<div class="paragraph">
<p>We will give a brief overview of the topic here; please refer to the <a href="https://openjdk.org/jeps/425">JEP 425</a> for more information.</p>
</div>
<div class="paragraph">
<p>Virtual threads are a feature available since Java 19 (Java 21 is the first LTS version including virtual threads),
aiming at providing a cheap alternative to platform threads for I/O-bound workloads.</p>
</div>
<div class="paragraph">
<p>Until now, platform threads were the concurrency unit of the JVM.
They are a wrapper over OS structures.
Creating a Java platform thread creates a "thread-like" structure in your operating system.</p>
</div>
<div class="paragraph">
<p>Virtual threads, on the other hand, are managed by the JVM. To be executed, they need to be mounted on a platform thread (which acts as a carrier to that virtual thread).
As such, they have been designed to offer the following characteristics:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Lightweight </dt>
<dd>
<p>Virtual threads occupy less space than platform threads in memory.
Hence, it becomes possible to use more virtual threads than platform threads simultaneously without blowing up the memory.
By default, platform threads are created with a stack of about 1 MB, whereas virtual threads stack is "pay-as-you-go."
You can find these numbers and other motivations for virtual threads in this <a href="https://youtu.be/lIq-x_iI-kc?t=543">presentation</a> given by the lead developer of project Loom (the project that added the virtual thread support to the JVM).</p>
</dd>
<dt class="hdlist1">Cheap to create</dt>
<dd>
<p>Creating a platform thread in Java takes time.
Currently, techniques such as pooling, where threads are created once and then reused, are strongly encouraged to minimize the time lost in starting them (as well as limiting the maximum number of threads to keep memory consumption low).
Virtual threads are supposed to be disposable entities that we create when we need them,
it is discouraged to pool them or reuse them for different tasks.</p>
</dd>
<dt class="hdlist1">Cheap to block</dt>
<dd>
<p>When performing blocking I/O, the underlying OS thread wrapped by the Java platform thread is put in a wait queue, and a context switch occurs to load a new thread context onto the CPU core. This operation takes time.
Since the JVM manages virtual threads, no underlying OS thread is blocked when they perform a blocking operation.
Their state is stored in the heap, and another virtual thread is executed on the same Java platform (carrier) thread.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="the-continuation-dance"><a class="anchor" href="#the-continuation-dance"></a>The Continuation Dance</h3>
<div class="paragraph">
<p>As mentioned above, the JVM schedules the virtual threads. These virtual threads are mounted on carrier threads. The scheduling comes with a pinch of magic. When the virtual thread attempts to use blocking I/O, the JVM <em>transforms</em> this call into a non-blocking one, unmounts the virtual thread, and mounts another virtual thread on the carrier thread. When the I/O completes, the <em>waiting</em> virtual thread becomes eligible again and will be re-mounted on a carrier thread to continue its execution. For the user, all this dance is invisible. Your synchronous code is executed asynchronously.</p>
</div>
<div class="paragraph">
<p>Note that the virtual thread may not be re-mounted on the same carrier thread.</p>
</div>
</div>
<div class="sect2">
<h3 id="cpu-bound"><a class="anchor" href="#cpu-bound"></a>Virtual threads are useful for I/O-bound workloads only</h3>
<div class="paragraph">
<p>We now know we can create more virtual threads than platform threads. One could be tempted to use virtual threads to perform long computations (CPU-bound workload).
It is useless and counterproductive.
CPU-bound doesn&#8217;t consist of quickly swapping threads while they need to wait for the completion of an I/O, but in leaving
them attached to a CPU core to compute something.
In this scenario, it is worse than useless to have thousands of threads if we have tens of CPU cores, virtual threads won&#8217;t enhance the performance of CPU-bound workloads.
Even worse, when running a CPU-bound workload on a virtual thread, the virtual thread monopolizes the carrier thread on which it is mounted.
It will either reduce the chance for the other virtual thread to run or will start creating new carrier threads, leading to high memory usage.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-code-on-virtual-threads-using-runonvirtualthread"><a class="anchor" href="#run-code-on-virtual-threads-using-runonvirtualthread"></a>Run code on virtual threads using @RunOnVirtualThread</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Quarkus, the support of virtual thread is implemented using the <a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/latest/io/smallrye/common/annotation/RunOnVirtualThread.html">@RunOnVirtualThread</a> annotation.
This section briefly overviews the rationale and how to use it.
There are dedicated guides for extensions supporting that annotation, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="./rest-virtual-threads">Virtual threads in REST applications</a></p>
</li>
<li>
<p><a href="./messaging-virtual-threads">Virtual threads in reactive messaging applications</a></p>
</li>
<li>
<p><a href="./grpc-virtual-threads">Virtual threads in gRPC services</a></p>
</li>
<li>
<p><a href="./scheduler-reference#virtual_threads">Execute periodic tasks on virtual threads</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="why-not"><a class="anchor" href="#why-not"></a>Why not run everything on virtual threads?</h3>
<div class="paragraph">
<p>As mentioned above, not everything can run safely on virtual threads.
The risk of <strong>monopolization</strong> can lead to high-memory usage.
Also, there are situations where the virtual thread cannot be unmounted from the carrier thread.
This is called <strong>pinning</strong>.
Finally, some libraries use <code>ThreadLocal</code> to store and reuse objects.
Using virtual threads with these libraries will lead to massive allocation, as the intentionally pooled objects will be instantiated for every (disposable and generally short-lived) virtual thread.</p>
</div>
<div class="paragraph">
<p>As of today, it is not possible to use virtual threads in a carefree manner.
Following such a laissez-faire approach could quickly lead to memory and resource starvation issues.
Thus, Quarkus uses an explicit model until the aforementioned issues disappear (as the Java ecosystem matures).
It is also the reason why <em>reactive</em> extensions have the virtual thread support, and rarely the <em>classic</em> ones.
We need to know when to dispatch on a virtual thread.</p>
</div>
<div class="paragraph">
<p>It is essential to understand that these issues are not Quarkus limitations or bugs but are due to the current state of the Java ecosystem which needs to evolve to become virtual thread friendly.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To learn more about the internal design and choices, check the <a href="https://dl.acm.org/doi/10.1145/3583678.3596895">Considerations for integrating virtual threads in a Java framework: a Quarkus example in a resource-constrained environment</a> paper.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="monopolization"><a class="anchor" href="#monopolization"></a>Monopolization cases</h4>
<div class="paragraph">
<p>The monopolization has been explained in the <a href="#cpu-bound">Virtual threads are useful for I/O-bound workloads only</a> section.
When running long computations, we do not allow the JVM to unmount and switch to another virtual thread until the virtual thread terminates.
Indeed, the current scheduler does not support preempting tasks.</p>
</div>
<div class="paragraph">
<p>This monopolization can lead to the creation of new carrier threads to execute other virtual threads.
Creating carrier threads results in creating platform threads.
So, there is a memory cost associated with this creation.</p>
</div>
<div class="paragraph">
<p>Suppose you run in a constrained environment, such as containers. In that case, monopolization can quickly become a concern, as the high memory usage can lead to out-of-memory issues and container termination.
The memory usage may be higher than with regular worker threads because of the inherent cost of the scheduling and virtual threads.</p>
</div>
</div>
<div class="sect3">
<h4 id="pinning"><a class="anchor" href="#pinning"></a>Pinning cases</h4>
<div class="paragraph">
<p>The promise of "cheap blocking" might not always hold: a virtual thread might <em>pin</em> its carrier on certain occasions.
The platform thread is blocked in this situation, precisely as it would have been in a typical blocking scenario.</p>
</div>
<div class="paragraph">
<p>According to <a href="https://openjdk.org/jeps/425">JEP 425</a> this can happen in two situations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>when a virtual thread performs a blocking operation inside a <code>synchronized</code> block or method</p>
</li>
<li>
<p>when it executes a blocking operation inside a native method or a foreign function</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It can be reasonably easy to avoid these situations in your code, but verifying every dependency you use is hard.
Typically, while experimenting with virtual threads, we realized that versions older than 42.6.0 of the <a href="https://javadoc.io/doc/org.postgresql/postgresql/latest/index.html">postgresql-JDBC driver</a> result in frequent pinning.
Most JDBC drivers still pin the carrier thread.
Even worse, many libraries require code changes.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://quarkus.io/blog/virtual-thread-1/">When Quarkus meets Virtual Threads</a></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This information about pinning cases applies to PostgreSQL JDBC driver 42.5.4 and earlier.
For PostgreSQL JDBC driver 42.6.0 and later, virtually all synchronized methods have been replaced by reentrant locks.
For more information, see the <a href="https://jdbc.postgresql.org/changelogs/2023-03-17-42.6.0-release/">Notable Changes</a> for PostgreSQL JDBC driver 42.6.0.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="pooling"><a class="anchor" href="#pooling"></a>The pooling case</h4>
<div class="paragraph">
<p>Some libraries are using <code>ThreadLocal</code> as an object pooling mechanism.
Extremely popular libraries like <a href="https://github.com/FasterXML/jackson-core/issues/919">Jackson</a> and Netty assume that the application uses a limited number of threads, which are recycled (using a thread pool) to run multiple (unrelated but sequential) tasks.</p>
</div>
<div class="paragraph">
<p>This pattern has multiple advantages, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allocation benefit: heavy objects are only allocated once per thread, but because the number of these threads was intended to be limited, it would not use too much memory.</p>
</li>
<li>
<p>Thread safety: only one thread can access the object stored in the thread local - preventing concurrent accesses.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, this pattern is counter-productive when using virtual threads.
Virtual threads are not pooled and generally short-lived.
So, instead of a few of them, we now have many of them.
For each of them, the object stored in the <code>ThreadLocal</code> is created (often large and expensive) and won&#8217;t be reused, as the virtual thread is not pooled (and won&#8217;t be used to run another task once the execution completes).
This problem leads to high memory usage.
Unfortunately, it requires sophisticated code changes in the libraries themselves.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-runonvirtualthread-with-quarkus-rest-formerly-resteasy-reactive"><a class="anchor" href="#use-runonvirtualthread-with-quarkus-rest-formerly-resteasy-reactive"></a>Use @RunOnVirtualThread with Quarkus REST (formerly RESTEasy Reactive)</h3>
<div class="paragraph">
<p>This section shows a brief example of using the <a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/latest/io/smallrye/common/annotation/RunOnVirtualThread.html">@RunOnVirtualThread</a> annotation.
It also explains the various development and execution models offered by Quarkus.</p>
</div>
<div class="paragraph">
<p>The <code>@RunOnVirtualThread</code> annotation instructs Quarkus to invoke the annotated method on a <strong>new</strong> virtual thread instead of the current one.
Quarkus handles the creation of the virtual thread and the offloading.</p>
</div>
<div class="paragraph">
<p>Since virtual threads are disposable entities, the fundamental idea of <code>@RunOnVirtualThread</code> is to offload the execution of an endpoint handler on a new virtual thread instead of running it on an event-loop or worker thread (in the case of Quarkus REST).</p>
</div>
<div class="paragraph">
<p>To do so, it suffices to add the <a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/latest/io/smallrye/common/annotation/RunOnVirtualThread.html">@RunOnVirtualThread</a> annotation to the endpoint.
If the Java Virtual Machine used to <strong>run</strong> the application provides virtual thread support (so Java 21 or later versions), then the endpoint execution is offloaded to a virtual thread.
It will then be possible to perform blocking operations without blocking the platform thread upon which the virtual thread is mounted.</p>
</div>
<div class="paragraph">
<p>In the case of Quarkus REST, this annotation can only be used on endpoints annotated with <a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/latest/io/smallrye/common/annotation/Blocking.html">@Blocking</a> or
considered blocking because of their signature.
You can visit <a href="rest#execution-model-blocking-non-blocking">Execution model, blocking, non-blocking</a>
for more information.</p>
</div>
<div class="sect3">
<h4 id="get-started-with-virtual-threads-with-quarkus-rest"><a class="anchor" href="#get-started-with-virtual-threads-with-quarkus-rest"></a>Get started with virtual threads with Quarkus REST</h4>
<div class="paragraph">
<p>Add the following dependency to your build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-rest&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-rest")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, you also need to make sure that you are using Java 21+, this can be enforced in your pom.xml file with the following:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;properties&gt;
    &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;
&lt;/properties&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="three-development-and-execution-models"><a class="anchor" href="#three-development-and-execution-models"></a>Three development and execution models</h4>
<div class="paragraph">
<p>The example below shows the differences between three endpoints, all of them querying a <em>fortune</em> in the database then
returning it to the client.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the first one uses the traditional blocking style, it is considered blocking due to its signature.</p>
</li>
<li>
<p>the second one uses Mutiny, it is considered non-blocking due to its signature.</p>
</li>
<li>
<p>the third one uses Mutiny but in a synchronous way, since it doesn&#8217;t return a "reactive type" it is
considered blocking and the <a href="https://javadoc.io/doc/io.smallrye.common/smallrye-common-annotation/latest/io/smallrye/common/annotation/RunOnVirtualThread.html">@RunOnVirtualThread</a> annotation can be used.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.rest;

import org.acme.fortune.model.Fortune;
import org.acme.fortune.repository.FortuneRepository;
import io.smallrye.common.annotation.RunOnVirtualThread;
import io.smallrye.mutiny.Uni;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import java.util.List;
import java.util.Random;


@Path("")
public class FortuneResource {

    @Inject FortuneRepository repository;

    @GET
    @Path("/blocking")
    public Fortune blocking() {
        // Runs on a worker (platform) thread
        var list = repository.findAllBlocking();
        return pickOne(list);
    }

    @GET
    @Path("/reactive")
    public Uni&lt;Fortune&gt; reactive() {
        // Runs on the event loop
        return repository.findAllAsync()
                .map(this::pickOne);
    }

    @GET
    @Path("/virtual")
    @RunOnVirtualThread
    public Fortune virtualThread() {
        // Runs on a virtual thread
        var list = repository.findAllAsyncAndAwait();
        return pickOne(list);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table summarizes the options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Model</th>
<th class="tableblock halign-left valign-top">Example of signature</th>
<th class="tableblock halign-left valign-top">Pros</th>
<th class="tableblock halign-left valign-top">Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronous code on worker thread</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Fortune blocking()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use worker thread (limit concurrency)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reactive code on event loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Uni&lt;Fortune&gt; reactive()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High concurrency and low resource usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">More complex code</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synchronous code on virtual thread</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>@RunOnVirtualThread Fortune vt()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Risk of pinning, monopolization and under-efficient object pooling</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that all three models can be used in a single application.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-virtual-thread-friendly-clients"><a class="anchor" href="#use-virtual-thread-friendly-clients"></a>Use virtual thread friendly clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As mentioned in the <a href="#why-not">Why not run everything on virtual threads?</a> section, the Java ecosystem is not entirely ready for virtual threads.
So, you need to be careful, especially when using a libraries doing I/O.</p>
</div>
<div class="paragraph">
<p>Fortunately, Quarkus provides a massive ecosystem that is ready to be used in virtual threads.
Mutiny, the reactive programming library used in Quarkus, and the Vert.x Mutiny bindings provides the ability to write blocking code (so, no fear, no learning curve) which do not pin the carrier thread.</p>
</div>
<div class="paragraph">
<p>As a result:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Quarkus extensions providing blocking APIs on top of reactive APIs can be used in virtual threads.
This includes the REST Client, the Redis client, the mailer&#8230;&#8203;</p>
</li>
<li>
<p>API returning <code>Uni</code> can be used directly using <code>uni.await().atMost(&#8230;&#8203;)</code>. It blocks the virtual thread, without blocking the carrier thread, and also improves the resilience of your application with an easy (non-blocking) timeout support.</p>
</li>
<li>
<p>If you use a <a href="https://smallrye.io/smallrye-mutiny-vertx-bindings/latest/">Vert.x client using the Mutiny bindings</a>, use the <code>andAwait()</code> methods which block until you get the result without pinning the carrier thread. It includes all the reactive SQL drivers.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="detect-pinned-thread-in-tests"><a class="anchor" href="#detect-pinned-thread-in-tests"></a>Detect pinned thread in tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend to use the following configuration when running tests in application using virtual threads.
If would not fail the tests, but at least dump start traces if the code pins the carrier thread:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
  &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;
  &lt;configuration&gt;
      &lt;systemPropertyVariables&gt;
        &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;
        &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;
      &lt;/systemPropertyVariables&gt;
      &lt;argLine&gt;-Djdk.tracePinnedThreads&lt;/argLine&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-application-using-virtual-threads"><a class="anchor" href="#run-application-using-virtual-threads"></a>Run application using virtual threads</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar target/quarkus-app/quarkus-run.jar</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Prior to Java 21, virtual threads were still an experimental feature, you need to start your application with the <code>--enable-preview</code> flag.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-containers-for-application-using-virtual-threads"><a class="anchor" href="#build-containers-for-application-using-virtual-threads"></a>Build containers for application using virtual threads</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When running your application in JVM mode (so not compiled into native, for native check <a href="#native">the dedicated section</a>), you can follow the <a href="./container-image">containerization guide</a> to build a container.</p>
</div>
<div class="paragraph">
<p>In this section, we use JIB to build the container.
Refer to the <a href="./container-image">containerization guide</a> to learn more about the alternatives.</p>
</div>
<div class="paragraph">
<p>To containerize your Quarkus application that use <code>@RunOnVirtualThread</code>, add the following properties in your <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.container-image.build=true
quarkus.container-image.group=&lt;your-group-name&gt;
quarkus.container-image.name=&lt;you-container-name&gt;
quarkus.jib.base-jvm-image=registry.access.redhat.com/ubi8/openjdk-21-runtime <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.jib.platforms=linux/amd64,linux/arm64 <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Make sure you use a base image supporting virtual threads. Here we use an image providing Java 21. Quarkus picks an image providing Java 21+ automatically if you do not set one.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Select the target architecture. You can select more than one to build multi-archs images.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then, build your container as you would do usually.
For example, if you are using Maven, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn package</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="native"><a class="anchor" href="#native"></a>Compiling Quarkus application using virtual threads into native executable</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="using-a-local-graalvm-installation"><a class="anchor" href="#using-a-local-graalvm-installation"></a>Using a local GraalVM installation</h3>
<div class="paragraph">
<p>To compile a Quarkus applications leveraging <code>@RunOnVirtualThread</code> into a native executable, you must be sure to use a GraalVM / Mandrel <code>native-image</code> supporting virtual threads, so providing at least Java 21.</p>
</div>
<div class="paragraph">
<p>Build the native executable as indicated on <a href="./building-native-image">the native compilation guide</a>.
For example, with Maven, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn package -Dnative</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-an-in-container-build"><a class="anchor" href="#using-an-in-container-build"></a>Using an in-container build</h3>
<div class="paragraph">
<p>In-container build allows building Linux 64 executables by using a <code>native-image</code> compiler running in a container.
It avoids having to install <code>native-image</code> on your machine, and also allows configuring the GraalVM version you need.
Note that, to use in-container build, you must have Docker or Podman installed on your machine.</p>
</div>
<div class="paragraph">
<p>Then, add to your <code>application.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># In-container build to get a linux 64 executable
quarkus.native.container-build=true <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enables the in-container build</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">From ARM/64 to AMD/64</div>
<div class="paragraph">
<p>If you are using a Mac M1 or M2 (using an ARM64 CPU), you need to be aware that the native executable you will get using an in-container build will be a Linux executable, but using your host (ARM 64) architecture.
You can use emulation to force the architecture when using Docker with the following property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.native.container-runtime-options=--platform=linux/amd64</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that it increases the compilation time&#8230;&#8203; a lot (&gt;10 minutes).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="containerize-native-applications-using-virtual-threads"><a class="anchor" href="#containerize-native-applications-using-virtual-threads"></a>Containerize native applications using virtual threads</h3>
<div class="paragraph">
<p>To build a container running a Quarkus application using virtual threads compiled into a native executable, you must
make sure you have a Linux/AMD64 executable (or ARM64 if you are targeting ARM machines).</p>
</div>
<div class="paragraph">
<p>Make sure your <code>application.properties</code> contains the configuration explained in <a href="#native">the native compilation section</a>.</p>
</div>
<div class="paragraph">
<p>Then, build your container as you would do usually.
For example, if you are using Maven, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn package -Dnative</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you ever want to build a native container image and already have an existing native image you can set <code>-Dquarkus.native.reuse-existing=true</code> and the native image build will not be re-run.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-the-duplicated-context-in-virtual-threads"><a class="anchor" href="#use-the-duplicated-context-in-virtual-threads"></a>Use the duplicated context in virtual threads</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Methods annotated with <code>@RunOnVirtualThread</code> inherit from the original duplicated context (See the <a href="duplicated-context">duplicated context reference guide</a> for details).
So, the data written in the duplicated context (and the request scope, as the request scoped is stored in the duplicated context) by filters and interceptors are available during the method execution (even if the filters and interceptors are not run on the virtual thread).</p>
</div>
<div class="paragraph">
<p>However, thread locals are not propagated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="virtual-thread-names"><a class="anchor" href="#virtual-thread-names"></a>Virtual thread names</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Virtual threads are created without a thread name by default, which is not practical to identify the execution for debugging and logging purposes.
Quarkus managed virtual threads are named and prefixed with <code>quarkus-virtual-thread-</code>.
You can customize this prefix, or disable the naming altogether configuring an empty value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.virtual-threads.name-prefix=</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inject-the-virtual-thread-executor"><a class="anchor" href="#inject-the-virtual-thread-executor"></a>Inject the virtual thread executor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to run tasks on virtual threads Quarkus manages an internal <code>ThreadPerTaskExecutor</code>.
In rare instances where you&#8217;d need to access this executor directly you can inject it using the <code>@VirtualThreads</code> CDI qualifier:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Injecting the Virtual Thread ExecutorService is experimental and may change in future versions.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme;

import org.acme.fortune.repository.FortuneRepository;

import java.util.concurrent.ExecutorService;

import jakarta.enterprise.event.Observes;
import jakarta.inject.Inject;
import jakarta.transaction.Transactional;

import io.quarkus.logging.Log;
import io.quarkus.runtime.StartupEvent;
import io.quarkus.virtual.threads.VirtualThreads;

public class MyApplication {

    @Inject
    FortuneRepository repository;

    @Inject
    @VirtualThreads
    ExecutorService vThreads;

    void onEvent(@Observes StartupEvent event) {
        vThreads.execute(this::findAll);
    }

    @Transactional
    void findAll() {
        Log.info(repository.findAllBlocking());
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-virtual-thread-applications"><a class="anchor" href="#testing-virtual-thread-applications"></a>Testing virtual thread applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As mentioned above, virtual threads have a few limitations that can drastically affect your application performance and memory usage.
The <em>junit5-virtual-threads</em> extension provides a way to detect pinned carrier threads while running your tests.
Thus, you can eliminate one of the most prominent limitations or be aware of the problem.</p>
</div>
<div class="paragraph">
<p>To enable this detection:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1) Add the <code>junit5-virtual-threads</code> dependency to your project:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus.junit5&lt;/groupId&gt;
    &lt;artifactId&gt;junit5-virtual-threads&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>2) In your test case, add the <code>io.quarkus.test.junit5.virtual.VirtualThreadUnit</code>  and <code>io.quarkus.test.junit.virtual.ShouldNotPin</code> annotations:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>@QuarkusTest
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
@VirtualThreadUnit // Use the extension
@ShouldNotPin // Detect pinned carrier thread
class TodoResourceTest {
    // ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>When you run your test (remember to use Java 21+), Quarkus detects pinned carrier threads.
When it happens, the test fails.</p>
</div>
<div class="paragraph">
<p>The <code>@ShouldNotPin</code> can also be used on methods directly.</p>
</div>
<div class="paragraph">
<p>The <em>junit5-virtual-threads</em> also provides a <code>@ShouldPin</code> annotation for cases where pinning is unavoidable.
The following snippet demonstrates the <code>@ShouldPin</code> annotation usage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@VirtualThreadUnit // Use the extension
public class LoomUnitExampleTest {

    CodeUnderTest codeUnderTest = new CodeUnderTest();

    @Test
    @ShouldNotPin
    public void testThatShouldNotPin() {
        // ...
    }

    @Test
    @ShouldPin(atMost = 1)
    public void testThatShouldPinAtMostOnce() {
        codeUnderTest.pin();
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-references"><a class="anchor" href="#additional-references"></a>Additional references</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://dl.acm.org/doi/10.1145/3583678.3596895">Considerations for integrating virtual threads in a Java framework: a Quarkus example in a resource-constrained environment</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#what-are-virtual-threads">What are virtual threads?</a>
<ul class="sectlevel2">
<li><a href="#terminology">Terminology</a></li>
<li><a href="#differences-between-virtual-threads-and-platform-threads">Differences between virtual threads and platform threads</a></li>
<li><a href="#the-continuation-dance">The Continuation Dance</a></li>
<li><a href="#cpu-bound">Virtual threads are useful for I/O-bound workloads only</a></li>
</ul>
</li>
<li><a href="#run-code-on-virtual-threads-using-runonvirtualthread">Run code on virtual threads using @RunOnVirtualThread</a>
<ul class="sectlevel2">
<li><a href="#why-not">Why not run everything on virtual threads?</a></li>
<li><a href="#use-runonvirtualthread-with-quarkus-rest-formerly-resteasy-reactive">Use @RunOnVirtualThread with Quarkus REST (formerly RESTEasy Reactive)</a></li>
</ul>
</li>
<li><a href="#use-virtual-thread-friendly-clients">Use virtual thread friendly clients</a></li>
<li><a href="#detect-pinned-thread-in-tests">Detect pinned thread in tests</a></li>
<li><a href="#run-application-using-virtual-threads">Run application using virtual threads</a></li>
<li><a href="#build-containers-for-application-using-virtual-threads">Build containers for application using virtual threads</a></li>
<li><a href="#native">Compiling Quarkus application using virtual threads into native executable</a>
<ul class="sectlevel2">
<li><a href="#using-a-local-graalvm-installation">Using a local GraalVM installation</a></li>
<li><a href="#using-an-in-container-build">Using an in-container build</a></li>
<li><a href="#containerize-native-applications-using-virtual-threads">Containerize native applications using virtual threads</a></li>
</ul>
</li>
<li><a href="#use-the-duplicated-context-in-virtual-threads">Use the duplicated context in virtual threads</a></li>
<li><a href="#virtual-thread-names">Virtual thread names</a></li>
<li><a href="#inject-the-virtual-thread-executor">Inject the virtual thread executor</a></li>
<li><a href="#testing-virtual-thread-applications">Testing virtual thread applications</a></li>
<li><a href="#additional-references">Additional references</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.15/guides/grpc-virtual-threads">Quarkus Virtual Thread support for gRPC services</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/messaging-virtual-threads">Quarkus Virtual Thread support with Reactive Messaging</a></li>
      
        
        <li class="howto"><a href="/version/3.15/guides/rest-virtual-threads">Use virtual threads in REST applications</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/rest">Writing REST Services with Quarkus REST (formerly RESTEasy Reactive)</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

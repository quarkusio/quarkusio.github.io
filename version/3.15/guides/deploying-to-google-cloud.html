<!DOCTYPE html>
<html lang="en">







<head>
  <title>Deploying to Google Cloud Platform (GCP) - 3.15 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.15/guides/deploying-to-google-cloud" />
  <meta property="og:title" content="Deploying to Google Cloud Platform (GCP) - 3.15" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/deploying-to-google-cloud">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/3.15/guides/deploying-to-google-cloud" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/3.15/guides/deploying-to-google-cloud" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/3.15/guides/deploying-to-google-cloud" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/3.15/guides/deploying-to-google-cloud" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/3.15/guides/deploying-to-google-cloud" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.15/guides/deploying-to-google-cloud" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.15/guides/deploying-to-google-cloud">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/3.15/guides/deploying-to-google-cloud">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.15/guides/deploying-to-google-cloud">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.15/guides/deploying-to-google-cloud">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.15/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.23.4 - Latest</option>
        
        
        
        <option value="3.20" >3.20</option>
        
        
        
        <option value="3.15" selected>3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Deploying to Google Cloud Platform (GCP) </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide covers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login to Google Cloud</p>
</li>
<li>
<p>Deploying a function to Google Cloud Functions</p>
</li>
<li>
<p>Deploying a JAR to Google App Engine Standard</p>
</li>
<li>
<p>Deploying a Docker image to Google App Engine Flexible Custom Runtimes</p>
</li>
<li>
<p>Deploying a Docker image to Google Cloud Run</p>
</li>
<li>
<p>Using Cloud SQL</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Roughly 1 hour for all modalities</p>
</li>
<li>
<p>An IDE</p>
</li>
<li>
<p>JDK 17+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.9.8</p>
</li>
<li>
<p>Optionally the <a href="cli-tooling">Quarkus CLI</a> if you want to use it</p>
</li>
<li>
<p><a href="https://cloud.google.com/">A Google Cloud Account</a>.  Free accounts work.</p>
</li>
<li>
<p><a href="https://cloud.google.com/sdk">Cloud SDK CLI Installed</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This guide will take as input an application developed in the <a href="getting-started">Getting Started guide</a>.</p>
</div>
<div class="paragraph">
<p>Make sure you have the getting-started application at hand, or clone the Git repository: <code>git clone -b 3.15 <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code>,
or download an <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/3.15.zip">archive</a>. The solution is located in the <code>getting-started</code> directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="login-to-google-cloud"><a class="anchor" href="#login-to-google-cloud"></a>Login to Google Cloud</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Login to Google Cloud is necessary for deploying the application. It can be done as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">gcloud auth login</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-to-google-cloud-functions"><a class="anchor" href="#deploying-to-google-cloud-functions"></a>Deploying to Google Cloud Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus supports deploying your application to Google Cloud Functions via the following extensions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="gcp-functions">Google Cloud Functions</a>: Build functions using the Google Cloud Functions API.</p>
</li>
<li>
<p><a href="gcp-functions-http">Google Cloud Functions HTTP binding</a>: Build functions using Quarkus HTTP APIs: Quarkus REST (formerly RESTEasy Reactive, our Jakarta REST implementation),
Undertow (Servlet), Vert.x Web, or <a href="funqy-http">Funqy HTTP</a>.</p>
</li>
<li>
<p><a href="funqy-gcp-functions">Funky Google Cloud Functions</a>: Build functions using Funqy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each extension supports a specific kind of application development,
follow the specific guides for more information on how to develop, package and deploy your applications using them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-to-google-app-engine-standard"><a class="anchor" href="#deploying-to-google-app-engine-standard"></a>Deploying to Google App Engine Standard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, make sure to have an App Engine environment initialized for your Google Cloud project, if not, initialize one via <code>gcloud app create --project=[YOUR_PROJECT_ID]</code>.</p>
</div>
<div class="paragraph">
<p>Then, you will need to create a <code>src/main/appengine/app.yaml</code> file, let&#8217;s keep it minimalistic with only the selected engine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">runtime: java11</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a default service for your App Engine application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also use the new Java 17 runtime by defining <code>runtime: java17</code> instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>App Engine Standard does not support the default Quarkus' specific packaging layout, therefore, you must set up your application to be packaged as an uber-jar via your <code>application.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.package.jar.type=uber-jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, you can choose to build the application manually or delegating that responsibility to <code>gcloud</code> or the Google Cloud Maven plugin.</p>
</div>
<div class="sect2">
<h3 id="building-the-application-manually"><a class="anchor" href="#building-the-application-manually"></a>Building the application manually</h3>
<div class="paragraph">
<p>Use Maven to build the application using <code>mvn clean package</code>, it will generate a single JAR that contains all the classes of your application including its dependencies.</p>
</div>
<div class="paragraph">
<p>Finally, use <code>gcloud</code> to deploy your application as an App Engine service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell script hljs" data-lang="shell script">gcloud app deploy target/getting-started-1.0.0-SNAPSHOT-runner.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will upload your application jar and launch it on App Engine.</p>
</div>
<div class="paragraph">
<p>When it’s done, the output will display the URL of your application (target url), you can use it with curl or directly open it in your browser using <code>gcloud app browse</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="building-the-application-via-gcloud"><a class="anchor" href="#building-the-application-via-gcloud"></a>Building the application via gcloud</h3>
<div class="paragraph">
<p>You can choose to let <code>gcloud</code> build your application for you, this is the simplest way to deploy to App Engine.</p>
</div>
<div class="paragraph">
<p>Then, you can just launch <code>gcloud app deploy</code> in the root of your project, it will upload all your project files (the list can be reduced via the  <code>.gcloudignore</code> file),
package your JAR via Maven (or Gradle) and launch it on App Engine.</p>
</div>
<div class="paragraph">
<p>When it’s done, the output will display the URL of your application (target url), you can use it with curl or directly open it in your browser using <code>gcloud app browse</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="building-the-application-via-the-google-cloud-maven-plugin"><a class="anchor" href="#building-the-application-via-the-google-cloud-maven-plugin"></a>Building the application via the Google Cloud Maven plugin</h3>
<div class="paragraph">
<p>You can also let Maven control the deployment of your application using the App Engine Maven plugin.</p>
</div>
<div class="paragraph">
<p>First, add the plugin to your <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;
    &lt;artifactId&gt;appengine-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.4.4&lt;/version&gt;
    &lt;configuration&gt;
        &lt;projectId&gt;GCLOUD_CONFIG&lt;/projectId&gt; <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;version&gt;gettingstarted&lt;/version&gt;
        &lt;artifact&gt;${project.build.directory}/${project.artifactId}-${project.version}-runner.jar&lt;/artifact&gt; <i class="conum" data-value="2"></i><b>(2)</b>
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the default <code>gcloud</code> configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Override the default JAR name to the one generated by the Quarkus Maven plugin</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then you would be able to use Maven to build and deploy your application to App Engine via <code>mvn clean package appengine:deploy</code>.</p>
</div>
<div class="paragraph">
<p>When it’s done, the output will display the URL of your application (target URL), you can use it with curl or directly open it in your browser using <code>gcloud app browse</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-to-google-app-engine-flexible-custom-runtimes"><a class="anchor" href="#deploying-to-google-app-engine-flexible-custom-runtimes"></a>Deploying to Google App Engine Flexible Custom Runtimes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before all, make sure to have an App Engine environment initialized for your Google Cloud project, if not, initialize one via <code>gcloud app create --project=[YOUR_PROJECT_ID]</code>.</p>
</div>
<div class="paragraph">
<p>App Engine Flexible Custom Runtimes uses a Docker image to run your application.</p>
</div>
<div class="paragraph">
<p>First, create an <code>app.yaml</code> file at the root of your project with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">runtime: custom
env: flex</code></pre>
</div>
</div>
<div class="paragraph">
<p>App Engine Flexible Custom Runtimes deploys your application as a Docker container, you can choose to deploy one of the Dockerfile provided inside your application.</p>
</div>
<div class="paragraph">
<p>Both JVM and native executable versions will work.</p>
</div>
<div class="paragraph">
<p>To deploy a JVM application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the JVM Dockerfile to the root directory of your project: <code>cp src/main/docker/Dockerfile.jvm Dockerfile</code>.</p>
</li>
<li>
<p>Build your application using <code>mvn clean package</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To deploy a native application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the native Dockerfile to the root directory of your project: <code>cp src/main/docker/Dockerfile.native Dockerfile</code>.</p>
</li>
<li>
<p>Build your application as a native executable using <code>mvn clean package -Dnative</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, launch <code>gcloud app deploy</code> in the root of your project, it will upload all your project files (the list can be reduced via the  <code>.gcloudignore</code> file),
build your Dockerfile and launch it on App Engine Flexible custom runtime.</p>
</div>
<div class="paragraph">
<p>It uses Cloud Build to build your Docker image and deploy it to Google Container Registry (GCR).</p>
</div>
<div class="paragraph">
<p>When done, the output will display the URL of your application (target url), you can use it with curl or directly open it in your browser using <code>gcloud app browse</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
App Engine Flexible custom runtimes support <a href="https://cloud.google.com/appengine/docs/flexible/reference/app-yaml?tab=java#updated_health_checks">health checks</a>,
it is strongly advised to provide them thanks to Quarkus <a href="smallrye-health">SmallRye Health</a> support.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deploying-to-google-cloud-run"><a class="anchor" href="#deploying-to-google-cloud-run"></a>Deploying to Google Cloud Run</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Google Cloud Run allows you to run your Docker containers inside Google Cloud Platform in a managed way.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, Quarkus listens on port 8080, and it&#8217;s also the Cloud Run default port.
No need to use the <code>PORT</code> environment variable defined in Cloud Run to customize the Quarkus HTTP port.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Cloud Run will use Cloud Build to build your Docker image and deploy it to Google Container Registry (GCR).</p>
</div>
<div class="paragraph">
<p>Both JVM and native executable versions will work.</p>
</div>
<div class="paragraph">
<p>To deploy a JVM application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the JVM Dockerfile to the root directory of your project: <code>cp src/main/docker/Dockerfile.jvm Dockerfile</code>.</p>
</li>
<li>
<p>Build your application using <code>mvn clean package</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To deploy a native application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the native Dockerfile to the root directory of your project: <code>cp src/main/docker/Dockerfile.native Dockerfile</code>.</p>
</li>
<li>
<p>Build your application as a native executable using <code>mvn clean package -Dnative</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, create a <code>.gcloudignore</code> file to tell gcloud which files should be not be uploaded for Cloud Build,
without it, it defaults to <code>.gitignore</code> that usually exclude the target directory where you packaged application has been created.</p>
</div>
<div class="paragraph">
<p>In this example, I only exclude the <code>src</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">src/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, use Cloud Build to build your image, it will upload to a Google Cloud Storage bucket all the files of your application (except the ones ignored by the `.gcloudignore`file),
build your Docker image and push it to Google Container Registry (GCR).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell script hljs" data-lang="shell script">gcloud builds submit --tag gcr.io/PROJECT-ID/helloworld</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also build your image locally and push it to a publicly accessible Docker registry, then use this image in the next step.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, use Cloud Run to launch your application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell script hljs" data-lang="shell script">gcloud run deploy --image gcr.io/PROJECT-ID/helloworld</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cloud run will ask you questions on the service name, the region and whether unauthenticated calls are allowed.
After you answer to these questions, it will deploy your application.</p>
</div>
<div class="paragraph">
<p>When the deployment is done, the output will display the URL to access your application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cloud Run supports <a href="https://cloud.google.com/run/docs/configuring/healthchecks">health checks</a>,
it is strongly advised to provide them thanks to Quarkus <a href="smallrye-health">SmallRye Health</a> support.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-cloud-sql"><a class="anchor" href="#using-cloud-sql"></a>Using Cloud SQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Google Cloud SQL provides managed instances for MySQL, PostgreSQL and Microsoft SQL Server.
Quarkus has support for all three databases.</p>
</div>
<div class="sect2">
<h3 id="using-cloud-sql-with-a-jdbc-driver"><a class="anchor" href="#using-cloud-sql-with-a-jdbc-driver"></a>Using Cloud SQL with a JDBC driver</h3>
<div class="paragraph">
<p>To make your applications work with Cloud SQL, you first need to use the corresponding JDBC extension, for example, for PostgreSQL,
add the <code>quarkus-jdbc-postgresql</code> extension.</p>
</div>
<div class="paragraph">
<p>Then you need to add to your <code>pom.xml</code> the Cloud SQL JDBC library that provides the additional connectivity to Cloud SQL.
For PostgreSQL you will need to include the following dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.google.cloud.sql&lt;/groupId&gt;
    &lt;artifactId&gt;postgres-socket-factory&lt;/artifactId&gt;
    &lt;version&gt;${postgres-socket-factory.version}&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you need to configure your datasource specifically to use the socket factory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql:///mydatabase <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.datasource.username=quarkus
quarkus.datasource.password=quarkus
quarkus.datasource.jdbc.additional-jdbc-properties.cloudSqlInstance=project-id:gcp-region:instance <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.datasource.jdbc.additional-jdbc-properties.socketFactory=com.google.cloud.sql.postgres.SocketFactory <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The JDBC URL should not include the hostname / IP of the database.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We add the <code>cloudSqlInstance</code> additional JDBC property to configure the instance id.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We add the <code>socketFactory</code> additional JDBC property to configure the socket factory used to connect to Cloud SQL,
this one is coming from the <code>postgres-socket-factory</code> dependency.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Using a PostgreSQL socket factory is not possible in dev mode at the moment
due to issue <a href="https://github.com/quarkusio/quarkus/issues/15782">#15782</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="using-cloud-sql-with-a-reactive-sql-client"><a class="anchor" href="#using-cloud-sql-with-a-reactive-sql-client"></a>Using Cloud SQL with a reactive SQL client</h3>
<div class="paragraph">
<p>You can also use one of our reactive SQL client instead of the JDBC client.
To do so with Cloud SQL, add the following dependency
(adjust the classifier depending on your platform):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.netty&lt;/groupId&gt;
    &lt;artifactId&gt;netty-transport-native-epoll&lt;/artifactId&gt;
    &lt;classifier&gt;linux-x86_64&lt;/classifier&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then configure your reactive datasource with no hostname and with the Netty native transport:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.datasource.reactive.url=postgresql://:5432/db-name?host=/cloudsql/project-id:zone:db-name
quarkus.vertx.prefer-native-transport=true</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This only works when your application is running inside a Google Cloud managed runtime like App Engine.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="using-cloud-sql-with-native-executables"><a class="anchor" href="#using-cloud-sql-with-native-executables"></a>Using Cloud SQL with native executables</h3>
<div class="paragraph">
<p>When generating native executables, you must mark <code>jnr.ffi.provider.jffi.NativeFinalizer$SingletonHolder</code> as runtime initialized.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.native.additional-build-args=--initialize-at-run-time=jnr.ffi.provider.jffi.NativeFinalizer$SingletonHolder</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, starting with <code>com.google.cloud.sql:postgres-socket-factory:1.17.0</code>, you must also mark <code>com.kenai.jffi.internal.Cleaner</code> as runtime initialized.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.native.additional-build-args=--initialize-at-run-time=jnr.ffi.provider.jffi.NativeFinalizer$SingletonHolder\\,com.kenai.jffi.internal.Cleaner</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="going-further"><a class="anchor" href="#going-further"></a>Going further</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can find a set of extensions to access various Google Cloud Services in the Quarkiverse (a GitHub organization for Quarkus extensions maintained by the community),
including PubSub, BigQuery, Storage, Spanner, Firestore, Secret Manager (visit the repository for an accurate list of supported services).</p>
</div>
<div class="paragraph">
<p>You can find some documentation about them in the <a href="https://docs.quarkiverse.io/quarkus-google-cloud-services/main/index.html">Quarkiverse Google Cloud Services documentation</a>.</p>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#login-to-google-cloud">Login to Google Cloud</a></li>
<li><a href="#deploying-to-google-cloud-functions">Deploying to Google Cloud Functions</a></li>
<li><a href="#deploying-to-google-app-engine-standard">Deploying to Google App Engine Standard</a>
<ul class="sectlevel2">
<li><a href="#building-the-application-manually">Building the application manually</a></li>
<li><a href="#building-the-application-via-gcloud">Building the application via gcloud</a></li>
<li><a href="#building-the-application-via-the-google-cloud-maven-plugin">Building the application via the Google Cloud Maven plugin</a></li>
</ul>
</li>
<li><a href="#deploying-to-google-app-engine-flexible-custom-runtimes">Deploying to Google App Engine Flexible Custom Runtimes</a></li>
<li><a href="#deploying-to-google-cloud-run">Deploying to Google Cloud Run</a></li>
<li><a href="#using-cloud-sql">Using Cloud SQL</a>
<ul class="sectlevel2">
<li><a href="#using-cloud-sql-with-a-jdbc-driver">Using Cloud SQL with a JDBC driver</a></li>
<li><a href="#using-cloud-sql-with-a-reactive-sql-client">Using Cloud SQL with a reactive SQL client</a></li>
<li><a href="#using-cloud-sql-with-native-executables">Using Cloud SQL with native executables</a></li>
</ul>
</li>
<li><a href="#going-further">Going further</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="guide"><a href="/version/3.15/guides/deploying-to-openshift">Deploying on OpenShift</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/deploying-to-heroku">Deploying to Heroku</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/deploying-to-azure-cloud">Deploying to Microsoft Azure Cloud</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/funqy-gcp-functions">Funqy Google Cloud Functions</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/funqy-gcp-functions-http">Funqy HTTP Binding with Google Cloud Functions</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/gcp-functions">Google Cloud Functions (Serverless)</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/gcp-functions-http">Google Cloud Functions (Serverless) with Quarkus REST, Undertow, or Reactive Routes</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/deploying-to-kubernetes">Kubernetes extension</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/container-image">Container Images</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/ansible">Automate Quarkus deployment with Ansible</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/aws-lambda">AWS Lambda</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/aws-lambda-snapstart">AWS Lambda SnapStart Configuration</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/aws-lambda-http">AWS Lambda with Quarkus REST, Undertow, or Reactive Routes</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/azure-functions">Azure Functions</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/azure-functions-http">Azure Functions with Quarkus REST, Undertow, or Reactive Routes</a></li>
      
        
        <li class="concepts"><a href="/version/3.15/guides/security-openid-connect-providers">Configuring Well-Known OpenID Connect Providers</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/funqy">Funqy</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/funqy-aws-lambda">Funqy AWS Lambda Binding</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/funqy-http">Funqy HTTP Binding (Standalone)</a></li>
      
        
        <li class="guide"><a href="/version/3.15/guides/funqy-aws-lambda-http">Funqy HTTP Binding with AWS Lambda </a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

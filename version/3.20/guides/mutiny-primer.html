<!DOCTYPE html>
<html lang="en">







<head>
  <title>Mutiny - Async for mere mortals - 3.20 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://analytics.ossupstream.org/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://analytics.ossupstream.org/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://player.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/3.20/guides/mutiny-primer" />
  <meta property="og:title" content="Mutiny - Async for mere mortals - 3.20" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/mutiny-primer">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/3.20/guides/mutiny-primer" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/3.20/guides/mutiny-primer" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/3.20/guides/mutiny-primer" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/3.20/guides/mutiny-primer" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/3.20/guides/mutiny-primer" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/performance" class="">PERFORMANCE</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
          <li><a href="/versatility" class="">VERSATILITY</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>          
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/userstories/" class="">USER STORIES</a></li>  
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/3.20/guides/mutiny-primer" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/3.20/guides/mutiny-primer">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/3.20/guides/mutiny-primer">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/3.20/guides/mutiny-primer">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/3.20/guides/mutiny-primer">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/3.20/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        <option value="main" >Main - SNAPSHOT</option>
        
        
        
        <option value="latest" >3.23.4 - Latest</option>
        
        
        
        <option value="3.20" selected>3.20</option>
        
        
        
        <option value="3.15" >3.15</option>
        
        
        
        <option value="3.8" >3.8</option>
        
        
        
        <option value="3.2" >3.2</option>
        
        
        
        <option value="2.16" >2.16</option>
        
        
        
        <option value="2.13" >2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Mutiny - Async for mere mortals </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://smallrye.io/smallrye-mutiny">Mutiny</a> is an intuitive, reactive programming library.
It is the primary model to write reactive applications with Quarkus.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="an-event-driven-reactive-programming-api"><a class="anchor" href="#an-event-driven-reactive-programming-api"></a>An event-driven reactive programming API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mutiny is very different from the other reactive programming libraries.
It takes a different approach to design your program.
With Mutiny everything is event-driven: you receive events, and you react to them.
This event-driven aspect embraces the asynchronous nature of distributed systems and provides an elegant and precise way to express continuation.</p>
</div>
<div class="paragraph">
<p>Mutiny offers two types that are both event-driven and lazy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>Uni</code> emits a single event (an item or a failure).
Unis are convenient to represent asynchronous actions that return 0 or 1 result.
A good example is the result of sending a message to a message broker queue.</p>
</li>
<li>
<p>A <code>Multi</code> emits multiple events (n items, 1 failure or 1 completion).
Multis can represent streams of items, potentially unbounded.
A good example is receiving messages from a message broker queue.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These two types allow representing any type of interactions.
They are event sources.
You observe them (<em>subscription</em>) and you get notified when they emit an item, a failure, or, in the case of a bounded Multi, a completion event.
When you (the subscriber) receive the event, you can process it (e.g., transform it, filter it).
With Mutiny, you are going to write code like <em>onX().action()</em>, which reads as “on item X do action”.</p>
</div>
<div class="paragraph">
<p>If you want to know more about Mutiny, and the concepts behind it, check <a href="https://smallrye.io/smallrye-mutiny/latest/reference/why-is-asynchronous-important">the Mutiny Reference documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutiny-in-quarkus"><a class="anchor" href="#mutiny-in-quarkus"></a>Mutiny in Quarkus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mutiny is the primary API when dealing with the reactive features from Quarkus.
It means that most extensions support Mutiny either by exposing an API returning Unis and Multis (such as reactive data sources or rest clients) or understanding when your methods return a Uni or a Multi (such as Quarkus REST (formerly RESTEasy Reactive) or Reactive Messaging).</p>
</div>
<div class="paragraph">
<p>These integrations make Mutiny a prominent and cohesive model for every reactive application developed with Quarkus.
In addition, Mutiny architecture allows fine-grain dead-code elimination which improves the memory usage when compiled to native (such as with Quarkus native mode or GraalVM native image compiler).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="why-another-reactive-programming-api"><a class="anchor" href="#why-another-reactive-programming-api"></a>Why another reactive programming API?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Seasoned reactive developers may wonder why Quarkus introduced yet another reactive programming APIs while there are existing ones.
Mutiny is taking a very different angle:</p>
</div>
<div class="paragraph">
<p><strong>Event-Driven</strong> -
Mutiny places events at the core of its design.
With Mutiny, you observe events, react to them, and create elegant and readable processing pipelines.
A Ph.D. in functional programming is not required.</p>
</div>
<div class="paragraph">
<p><strong>Navigable</strong> - Even with intelligent code completion, classes with hundreds of methods are confusing.
Mutiny provides a navigable and explicit API driving you towards the operator you need.</p>
</div>
<div class="paragraph">
<p><strong>Non-Blocking I/O</strong> - Mutiny is the perfect companion to tame the asynchronous nature of applications with non-blocking I/O (which powers <a href="quarkus-reactive-architecture">Quarkus</a>).
Declaratively compose operations, transform data, enforce progress, recover from failures, and more.</p>
</div>
<div class="paragraph">
<p><strong>Made for an asynchronous world</strong> - Mutiny can be used in any asynchronous application such as event-driven microservices, message-based applications, network utilities, data stream processing, and of course&#8230;&#8203; reactive applications!</p>
</div>
<div class="paragraph">
<p><strong>Reactive Streams and Converters Built-In</strong> - Mutiny is based on the <a href="https://www.reactive-streams.org/">Reactive Streams</a> specification, and so it can be integrated with any other reactive programming library.
In addition, it proposes converters to interact with other popular libraries.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutiny-and-the-io-threads"><a class="anchor" href="#mutiny-and-the-io-threads"></a>Mutiny and the I/O Threads</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus is powered by a <a href="quarkus-reactive-architecture#engine">reactive engine</a>, and when developing a reactive application, your code is executed on one of the few I/O threads.
Remember, you must never block these threads, and the model would collapse if you do.
So, you can&#8217;t use blocking I/O.
Instead, you need to schedule the I/O operation and pass a continuation.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/reactive-thread.png" alt="Reactive Execution Model and I/O Threads" width="50%">
</div>
</div>
<div class="paragraph">
<p>The Mutiny event-driven paradigm is tailored for this.
When the I/O operation completes successfully, the Uni that represents it emits an item event.
When it fails, it emits a failure event.
The continuation is simply and naturally expressed using the event-driven API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutiny-through-examples"><a class="anchor" href="#mutiny-through-examples"></a>Mutiny through Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many Quarkus extensions expose Mutiny APIs. In this section, we use the MongoDB extension to illustrate how to use Mutiny.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s imagine a simple structure representing an element from the <a href="https://en.wikipedia.org/wiki/Periodic_table">periodic table</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Element {

   public String name;
   public String symbol;
   public int position;

   public Element(String name, String symbol, int position) {
       this.name = name;
       this.symbol = symbol;
       this.position = position;
   }

   public Element() {
        // Use by JSON mappers
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This structure contains the name, symbol, and position of the element.
To retrieve and store elements into a Mongo collection, you can use the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ApplicationScoped
public class ElementService {

   final ReactiveMongoCollection&lt;Element&gt; collection;

   @Inject
   ElementService(ReactiveMongoClient client) {
       collection = client.getDatabase("quarkus")
               .getCollection("elements", Element.class);
   }

   public void add(Element element) {
       Uni&lt;InsertOneResult&gt; insertion = collection.insertOne(element);
       insertion
           .onItem().transform(r -&gt; r.getInsertedId().asString())
           .subscribe().with(
               result -&gt; System.out.println("inserted " + result),
               failure -&gt; System.out.println("D'oh" + failure));
   }

   public void getAll() {
       collection.find()
           .subscribe().with(
              element -&gt; System.out.println("Element: " + element),
             failure -&gt; System.out.println("D'oh! " + failure),
             () -&gt; System.out.println("No more elements")
       );
   }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>First, the Mongo client is injected.
Note that it uses the reactive variant (<code>io.quarkus.mongodb.reactive.ReactiveMongoClient</code>).
In the initialize method, we retrieve and store the collection in which elements will be inserted.</p>
</div>
<div class="paragraph">
<p>The <code>add</code> method inserts an element in the collection.
It receives the element as a parameter and uses the reactive API of the collection.
Interacting with the database involves I/Os.
The reactive principles forbid blocking while waiting for the interaction to complete.
Instead, we schedule the operation and pass a continuation.
The <code>insertOne</code> method returns a Uni, i.e., an asynchronous operation.
That&#8217;s the scheduled I/O. We now need to express the continuation, which is done using the <code>.onItem()</code> method.
<code>.onItem()</code> allows configuring what needs to happen when the observed Uni emits an item, in our case when the scheduled I/Os completes.
In this example, we extract the inserted document id.
The final step is the subscription.
Without it, nothing would ever happen. Subscribing triggers the operation.
The subscription method can also define handlers:  the <code>id</code> value on success, or a failure when the insertion fails.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now look at the second method.
It retrieves all the stored elements.
In this case, it returns multiple items (one per stored element), so we are using a <code>Multi</code>.
As for the insertion, getting the stored elements involves I/Os.
The <code>find</code> is our operation.
As for Uni, you need to subscribe to trigger the operation.
The subscriber receives item events, a failure event, or a completion event when all the elements have been received.</p>
</div>
<div class="paragraph">
<p>Subscribing to a Uni or a Multi is essential, as without it, the operation is never executed.
In Quarkus some extensions deal with the subscription for you.
For example, in Quarkus REST your HTTP methods can return a Uni or a Multi, and Quarkus REST handles the subscription.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutiny-patterns"><a class="anchor" href="#mutiny-patterns"></a>Mutiny Patterns</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The example from the last section was simplistic on purpose.
Let&#8217;s have a look at a few common patterns.</p>
</div>
<div class="sect2">
<h3 id="observing-events"><a class="anchor" href="#observing-events"></a>Observing events</h3>
<div class="paragraph">
<p>You can observe the various kind of events using:</p>
</div>
<div class="paragraph">
<p><code>on{event}().invoke(ev &#8594; System.out.println(ev));</code></p>
</div>
<div class="paragraph">
<p>For example, for items use:
<code>onItem().invoke(item &#8594; &#8230;&#8203;);</code></p>
</div>
<div class="paragraph">
<p>For failure, use:
<code>onFailure().invoke(failure &#8594; &#8230;&#8203;)</code></p>
</div>
<div class="paragraph">
<p>The <code>invoke</code> method is synchronous.
Sometimes you need to execute an asynchronous action.
In this case use <code>call</code>, as in: <code>onItem().call(item &#8594; someAsyncAction(item))</code>.
Note that <code>call</code> does not change the item, it just calls an asynchronous action, and when this one completes, it emits the original item downstream.</p>
</div>
</div>
<div class="sect2">
<h3 id="transforming-item"><a class="anchor" href="#transforming-item"></a>Transforming item</h3>
<div class="paragraph">
<p>The first instrumental pattern consists of transforming the item events you receive.
As we have seen in the previous section, it could indicate the successful insertion, or the elements stored in the database.</p>
</div>
<div class="paragraph">
<p>Transforming an item is done using: <code>onItem().transform(item &#8594; &#8230;&#8203;.)</code>.</p>
</div>
<div class="paragraph">
<p>More details about transformation can be found in the <a href="https://smallrye.io/smallrye-mutiny/latest/tutorials/transforming-items/">Mutiny documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sequential-composition"><a class="anchor" href="#sequential-composition"></a>Sequential composition</h3>
<div class="paragraph">
<p>Sequential composition allows chaining dependent asynchronous operations. This is achieved using <code>onItem().transformToUni(item &#8594; &#8230;&#8203;)</code>.
Unlike <code>transform</code>, the function passed to <code>transformToUni</code> returns a Uni.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Uni&lt;String&gt; uni1 = …
uni1
.onItem().transformToUni(item -&gt; anotherAsynchronousAction(item));</code></pre>
</div>
</div>
<div class="paragraph">
<p>More details about asynchronous transformation can be found in the <a href="https://smallrye.io/smallrye-mutiny/latest/tutorials/transforming-items-asynchronously/">Mutiny documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="failure-handling"><a class="anchor" href="#failure-handling"></a>Failure handling</h3>
<div class="paragraph">
<p>So far we only handle the item events, but handling failure is essential. You can handle failures using <code>onFailure()</code>.</p>
</div>
<div class="paragraph">
<p>For example, you can recover with a fallback item using <code>onFailure().recoverWithItem(fallback)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Uni&lt;String&gt; uni1 = …
uni1
.onFailure().recoverWithItem(“my fallback value”);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also retry the operation such as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Uni&lt;String&gt; uni1 = …
uni1
.onFailure().retry().atMost(5);</code></pre>
</div>
</div>
<div class="paragraph">
<p>More info about failure recovery can be found on <a href="https://smallrye.io/smallrye-mutiny/latest/tutorials/handling-failures/">the handling failure documentation</a> and <a href="https://smallrye.io/smallrye-mutiny/latest/tutorials/retrying/">the retrying on failures documentation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events-and-actions"><a class="anchor" href="#events-and-actions"></a>Events and Actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following tables list the events that you can receive for Uni and Multi. Each of them is associated with its own group (onX). The second table lists the classic action you can do upon an event. Note that some groups offer more possibilities.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Events from the upstream</th>
<th class="tableblock halign-left valign-top">Events from the downstream</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uni</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subscription (1), Item (0..1), failure (0..1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancellation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subscription (1), Item (0..n), failure (0..1), completion (0..1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancellation, Request</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Check the full list of events on <a href="https://smallrye.io/smallrye-mutiny/latest/tutorials/observing-events/">the event documentation</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onItem().transform(Function&lt;I, O&gt; function);</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transform the event into another event using a synchronous function.
The downstream receives the result of the function (or a failure if the transformation failed).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transformToUni</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onItem().transformToUni(Function&lt;I, Uni&lt;O&gt;&gt; function);</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transform the event into another event using an asynchronous function. The downstream receives the item emitted by the produced Uni (or a failure if the transformation failed). If the produced Uni emits a failure, that failure is passed to the downstream.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invoke</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onItem().invoke(Consumer&lt;I&gt; consumer)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invokes the synchronous consumer. This is particularly convenient to execute side effects actions. The downstream receives the original event, or a failure if the consumer throws an exception</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">call</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onItem().call(Function&lt;I, Uni&lt;?&gt;&gt;)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invokes the asynchronous function. This is particularly convenient to execute asynchronous side effect actions.The downstream receives the original event, or a failure if the consumer throws an exception or if the produced Uni emits a failure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onItem().failWith(Function&lt;I, Throwable&gt;)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emits a failure when it receives the event.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">complete (Multi only)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onItem().complete()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emits the completion event when it receives the event.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="other-patterns"><a class="anchor" href="#other-patterns"></a>Other patterns</h3>
<div class="paragraph">
<p>Mutiny provides lots of other features.
Head over to the <a href="https://smallrye.io/smallrye-mutiny">Mutiny documentation</a> to see many more examples, including the whole list of events and how to handle them.</p>
</div>
<div class="paragraph">
<p>Some frequently asked guides are the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>merge vs. concatenation - <a href="https://smallrye.io/smallrye-mutiny/latest/guides/merging-and-concatenating-streams/" class="bare">https://smallrye.io/smallrye-mutiny/latest/guides/merging-and-concatenating-streams/</a></p>
</li>
<li>
<p>controlling the emission thread - <a href="https://smallrye.io/smallrye-mutiny/latest/guides/emit-on-vs-run-subscription-on/" class="bare">https://smallrye.io/smallrye-mutiny/latest/guides/emit-on-vs-run-subscription-on/</a></p>
</li>
<li>
<p>explicit blocking  - <a href="https://smallrye.io/smallrye-mutiny/latest/guides/imperative-to-reactive/" class="bare">https://smallrye.io/smallrye-mutiny/latest/guides/imperative-to-reactive/</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shortcuts"><a class="anchor" href="#shortcuts"></a>Shortcuts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using Uni, having to write <code>onItem()</code> can be cumbersome.
Fortunately, Mutiny provides a set of shortcut to make your code more concise:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shortcut</th>
<th class="tableblock halign-left valign-top">Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.map(x &#8594; y)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().transform(x &#8594; y)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.flatMap(x &#8594; uni2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().transformToUni(x &#8594; uni2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.chain(x &#8594; uni2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().transformToUni(x &#8594; uni2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.invoke(x &#8594; System.out.println(x))</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().invoke(x &#8594; System.out.println(x))</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.call(x &#8594; uni2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().call(x &#8594; uni2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.eventually(() &#8594; System.out.println("eventually"))</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItemOrFailure().invoke((ignoredItem, ignoredException) &#8594; System.out.println("eventually"))</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.eventually(() &#8594; uni2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItemOrFailure().call((ignoredItem, ignoredException) &#8594; uni2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.replaceWith(x)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().transform(ignored &#8594; x)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.replaceWith(uni2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().transformToUni(ignored &#8594; uni2)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.replaceIfNullWith(x)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uni.onItem().ifNull().continueWith(x)</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="reactive-streams"><a class="anchor" href="#reactive-streams"></a>Reactive Streams</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mutiny uses <a href="https://www.reactive-streams.org/">Reactive Streams</a>.
<code>Multi</code> implements <code>Publisher</code> and enforces the back-pressure protocol.
Emissions are constrained by the request emitted from the downstream subscribers.
Thus, it does not overload the subscribers.
Note that in some cases, you can’t follow this protocol (because the Multi emits events that can’t be controlled, such as time, or measures sensors).
In this case, Mutiny provides a way to control the overflow using <code>onOverflow()</code>.</p>
</div>
<div class="paragraph">
<p><code>Uni</code> does not implement Reactive Streams <code>Publisher</code>.
A <code>Uni</code> can only emit one event, so subscribing to the <code>Uni</code> is enough to express your intent to use the result and does not need the request protocol ceremony.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutiny-and-vert-x"><a class="anchor" href="#mutiny-and-vert-x"></a>Mutiny and Vert.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x is a toolkit to build reactive applications and systems.
It provides a huge ecosystem of libraries following the reactive principles (i.e., non-blocking and asynchronous).
Vert.x is an essential part of Quarkus, as it provides its reactive capabilities.</p>
</div>
<div class="paragraph">
<p>In addition, the whole Vert.x API can be used with Quarkus.
To provide a cohesive experience, the Vert.x API is also available using a Mutiny variant, i.e., returns Uni and Multi.</p>
</div>
<div class="paragraph">
<p>More details about this API can be found on: <a href="https://quarkus.io/blog/mutiny-vertx/" class="bare">https://quarkus.io/blog/mutiny-vertx/</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutiny-integration-in-quarkus"><a class="anchor" href="#mutiny-integration-in-quarkus"></a>Mutiny Integration in Quarkus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The integration of Mutiny in Quarkus goes beyond just the library.
Mutiny exposes hooks that allow Quarkus and Mutiny to be closely integrated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Calling <code>await</code> or <code>toIterable</code> would fail if you are running on an I/O thread, preventing blocking the I/O thread;</p>
</li>
<li>
<p>The <code>log()</code> operator use the Quarkus logger;</p>
</li>
<li>
<p>The default Mutiny thread pool is the Quarkus worker thread pool;</p>
</li>
<li>
<p>Context Propagation is enabled by default when using Mutiny Uni and Multi</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More details about the infrastructure integration can be found on <a href="https://smallrye.io/smallrye-mutiny/latest/guides/framework-integration/" class="bare">https://smallrye.io/smallrye-mutiny/latest/guides/framework-integration/</a>.</p>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#an-event-driven-reactive-programming-api">An event-driven reactive programming API</a></li>
<li><a href="#mutiny-in-quarkus">Mutiny in Quarkus</a></li>
<li><a href="#why-another-reactive-programming-api">Why another reactive programming API?</a></li>
<li><a href="#mutiny-and-the-io-threads">Mutiny and the I/O Threads</a></li>
<li><a href="#mutiny-through-examples">Mutiny through Examples</a></li>
<li><a href="#mutiny-patterns">Mutiny Patterns</a>
<ul class="sectlevel2">
<li><a href="#observing-events">Observing events</a></li>
<li><a href="#transforming-item">Transforming item</a></li>
<li><a href="#sequential-composition">Sequential composition</a></li>
<li><a href="#failure-handling">Failure handling</a></li>
</ul>
</li>
<li><a href="#events-and-actions">Events and Actions</a>
<ul class="sectlevel2">
<li><a href="#other-patterns">Other patterns</a></li>
</ul>
</li>
<li><a href="#shortcuts">Shortcuts</a></li>
<li><a href="#reactive-streams">Reactive Streams</a></li>
<li><a href="#mutiny-and-vert-x">Mutiny and Vert.x</a></li>
<li><a href="#mutiny-integration-in-quarkus">Mutiny Integration in Quarkus</a></li>
</ul></div>
    </div>
  </div>
  <h2>Related content</h2>
  <div class="grid-wrapper relations">
    <div class="grid__item width-6-12 width-12-12-m">
      <h3>On the same topics</h3>
      <ul class="related-content">
      
        
        <li class="reference"><a href="/version/3.20/guides/datasource">Configure data sources in Quarkus</a></li>
      
        
        <li class="tutorial"><a href="/version/3.20/guides/getting-started-reactive">Getting Started With Reactive</a></li>
      
        
        <li class="guide"><a href="/version/3.20/guides/quarkus-reactive-architecture">Quarkus Reactive Architecture</a></li>
      
        
        <li class="guide"><a href="/version/3.20/guides/reactive-sql-clients">Reactive SQL Clients</a></li>
      </ul>
    </div>
    </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="/userstories" target="_blank">User Stories</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a href="https://bsky.app/profile/quarkus.io" target="_blank">Bluesky</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>

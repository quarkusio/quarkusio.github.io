<!DOCTYPE html>
<html lang="en">







<head>
  <title>Authorization of Web Endpoints - 2.13 - Quarkus</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Security-Policy" content="
  connect-src 'self' https://dpm.demdex.net https://adobedc.demdex.net https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/ https://search.quarkus.io https://smetrics.redhat.com; 
  script-src 'self' 'unsafe-inline' 'unsafe-eval'
      
      https://assets.adobedtm.com
      js.bizographics.com
      https://www.redhat.com
      https://static.redhat.com
      https://app.requestly.io/
      jsonip.com
      https://ajax.googleapis.com
      https://use.fontawesome.com
      http://www.youtube.com
      http://www.googleadservices.com
      https://googleads.g.doubleclick.net
      https://giscus.app
      https://route-default-test-mscherer-matamo.apps.ospo-osci.z3b1.p1.openshiftapps.com/
      https://app.mailjet.com;

  style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; 
  img-src 'self' * data:; 
  media-src 'self'; 
  frame-src https://redhat.demdex.net https://www.youtube.com https://embed.restream.io https://app.mailjet.com http://xy0p2.mjt.lu https://mj.quarkus.io https://giscus.app; 
  base-uri 'none'; 
  object-src 'none'; 
  form-action 'none'; 
  font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;" />
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@QuarkusIO"> 
  <meta name="twitter:creator" content="@QuarkusIO">
  <meta property="og:url" content="https://quarkus.io/version/2.13/guides/security-authorization" />
  <meta property="og:title" content="Authorization of Web Endpoints - 2.13" />
  <meta property="og:description" content="Quarkus: Supersonic Subatomic Java" />
  <meta property="og:image" content="https://quarkus.io/assets/images/quarkus_card.png" />
  
  <link rel="canonical" href="https://quarkus.io/guides/security-authorization">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css?2021-07-29" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.2/css/all.css" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="/feed.xml" title="Quarkus">
  <script src="/assets/javascript/hl.js" type="text/javascript"></script>
  
  
  
  
  <link rel="alternate" hreflang="en" href="https://quarkus.io/version/2.13/guides/security-authorization" />
  
  <link rel="alternate" hreflang="pt-br" href="https://pt.quarkus.io/version/2.13/guides/security-authorization" />
  
  <link rel="alternate" hreflang="es" href="https://es.quarkus.io/version/2.13/guides/security-authorization" />
  
  <link rel="alternate" hreflang="zh" href="https://cn.quarkus.io/version/2.13/guides/security-authorization" />
  
  <link rel="alternate" hreflang="ja" href="https://ja.quarkus.io/version/2.13/guides/security-authorization" />
  
  <link rel="alternate" hreflang="x-default" href="https://quarkus.io/" />  
  <script src="/assets/javascript/tracking.js"></script>
  
  <script src="/assets/javascript/colormode.js" type="text/javascript"></script>

</head>

<body class="guides">

  
  <div class="nav-wrapper">
  <div class="grid-wrapper">
    <div class="width-12-12">
      <input type="checkbox" id="checkbox" />
      <nav id="main-nav" class="main-nav">
        <div class="logo-wrapper">
           <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        </div>
    <label class="nav-toggle" for="checkbox">
      <i class="fa fa-bars"></i>
    </label>
    <ul id="menu" class="menu">
      <li class="dropdown">
        <span href="/about/">Why<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/about" class="">WHAT IS QUARKUS?</a></li>
          <li><a href="/container-first" class="">CONTAINER FIRST</a></li>
          <li><a href="/continuum" class="">VERSATILITY</a></li>
          <li><a href="/developer-joy" class="">DEVELOPER JOY</a></li>
          <li><a href="/kubernetes-native" class="">KUBERNETES NATIVE</a></li>
          <li><a href="/standards" class="">STANDARDS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/learn/">Learn<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/get-started" class="">GET STARTED</a></li>
          <li><a href="/guides" class="active">DOCUMENTATION</a></li>
          <li><a href="/qtips" class="">"Q" TIP VIDEOS</a></li>          
          <li><a href="/books" class="">BOOKS</a></li>
          </ul>
      </li>
      <li class="dropdown">
        <span href="https://quarkus.io/extensions/">Extensions<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <!-- Note that quarkus.io is hardcoded here, because it is the only url which supports extensions -->
          <li><a href="https://quarkus.io/extensions/" class="">BROWSE EXTENSIONS</a></li>
          <li><a href="/faq/#what-is-a-quarkus-extension" class="">USE EXTENSIONS</a></li>
          <li><a href="/guides/writing-extensions" class="">CREATE EXTENSIONS</a></li>
          <li><a href="https://hub.quarkiverse.io" class="">SHARE EXTENSIONS</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <span href="/community/">Community<i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="/support/" class="">SUPPORT</a></li>
          <li><a href="/blog" class="">BLOG</a></li>
          <li><a href="/discussion" class="">DISCUSSION</a></li>
          <li><a href="/working-groups" class="">WORKING GROUPS</a></li>
          <li><a href="/insights" class="">PODCAST</a></li>
          <li><a href="/events" class="">EVENTS</a></li>
          <li><a href="/newsletter" class="">NEWSLETTER</a></li>
          <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" class="">ROADMAP</a></li>
          </ul>
      </li>
      <li>
        <a href="https://code.quarkus.io" class="button-cta secondary white">START CODING</a>
      </li>
      <li class="dropdown">
        <span href="/language/"><div class="fas fa-globe langicon"></div><i class="fas fa-chevron-down"></i></span>
        <ul class="submenu">
          <li><a href="https://quarkus.io/version/2.13/guides/security-authorization" >OFFICIAL (ENGLISH)</a></li>
          <li><a href="https://pt.quarkus.io/version/2.13/guides/security-authorization">PORTUGUÊS (BR)</a></li>
          <li><a href="https://es.quarkus.io/version/2.13/guides/security-authorization">ESPAÑOL</a></li>
          <li><a href="https://cn.quarkus.io/version/2.13/guides/security-authorization">简体中文</a></li>
          <li><a href="https://ja.quarkus.io/version/2.13/guides/security-authorization">日本語</a></li>
          </ul>
      </li>
      <li>
        <span href="#" class="modeswitcher" id='theme-toggle'><i class="fas fa-sun"></i><i class="fas fa-moon"></i><i class="fas fa-cog"></i></span>
      </li>
    </ul>
      </nav>
    </div>
  </div>
</div>

  <div class="content">
    







<section class="full-width-version-bg flexfilterbar guides">
  <div class="guideflexcontainer">
    <div class="docslink">
      <a class="returnlink" href="/version/2.13/guides/"> Back to Guides</a>
    </div>
    <div class="flexlabel">
      <label>By Version</label>
    </div>
    <div class="guidepulldown version">
    <select id="guide-version-dropdown">
      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <option value="2.13" selected>2.13</option>
        </select>
    </div>
  </div>
</section>

<div class="guide">
  <div class="grid-wrapper">
    <div class="grid__item width-8-12 width-12-12-m">
      
      <h1 class="text-caps">Authorization of Web Endpoints </h1>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus has an integrated pluggable web security layer. If security is enabled all HTTP requests will have a permission
check performed to make sure they are allowed to continue.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Configuration authorization checks are executed before any annotation-based authorization check is done, so both
checks have to pass for a request to be allowed. This means you cannot use <code>@PermitAll</code> to open up a path if the path has
been blocked using <code>quarkus.http.auth.</code> configuration. If you are using JAX-RS you may want to consider using the
<code>quarkus.security.jaxrs.deny-unannotated-endpoints</code> or <code>quarkus.security.jaxrs.default-roles-allowed</code> to set default security
requirements instead of HTTP path level matching, as these properties can be overridden by annotations on an individual
endpoint.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Authorization is based on user roles that are provided by the security provider.
To customize these roles, a <code>SecurityIdentityAugmentor</code> can be created, see
<a href="security-customization#security-identity-customization">Security Identity Customization</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authorization-using-configuration"><a class="anchor" href="#authorization-using-configuration"></a>Authorization using Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default implementation allows you to define permissions using config in <code>application.properties</code>. An example
config is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.policy.role-policy1.roles-allowed=user,admin                      <i class="conum" data-value="1"></i><b>(1)</b>

quarkus.http.auth.permission.roles1.paths=/roles-secured/*,/other/*,/api/*          <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.http.auth.permission.roles1.policy=role-policy1

quarkus.http.auth.permission.permit1.paths=/public/*                                <i class="conum" data-value="3"></i><b>(3)</b>
quarkus.http.auth.permission.permit1.policy=permit
quarkus.http.auth.permission.permit1.methods=GET

quarkus.http.auth.permission.deny1.paths=/forbidden                                 <i class="conum" data-value="4"></i><b>(4)</b>
quarkus.http.auth.permission.deny1.policy=deny</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This defines a role based policy that allows users with the <code>user</code> and <code>admin</code> roles. This is referenced by later rules.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is a permission set that references the previously defined policy. <code>roles1</code> is an arbitrary name, you can call the permission sets whatever you want.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This permission references the default <code>permit</code> built-in policy to allow <code>GET</code> methods to <code>/public</code>. This is actually a no-op in this example, as this request would have been allowed anyway.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This permission references the built-in <code>deny</code> policy for <code>/forbidden</code>. This is an exact path match as it does not end with <code>*</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Permissions are defined in config using permission sets. These are arbitrarily named permission grouping. Each permission
set must specify a policy that is used to control access. There are three built-in policies: <code>deny</code>, <code>permit</code> and <code>authenticated</code>,
which respectively permits all, denies all and only allows authenticated users.</p>
</div>
<div class="paragraph">
<p>It is also possible to define role based policies, as shown in the example. These policies will only allow users with the
specified roles to access the resources.</p>
</div>
<div class="sect2">
<h3 id="matching-on-paths-methods"><a class="anchor" href="#matching-on-paths-methods"></a>Matching on paths, methods</h3>
<div class="paragraph">
<p>Permission sets can also specify paths and methods as a comma separated list. If a path ends with <code>*</code> then it is considered
to be a wildcard match and will match all sub paths, otherwise it is an exact match and will only match that specific path:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.paths=/public/*,/css/*,/js/*,/robots.txt
quarkus.http.auth.permission.permit1.policy=permit
quarkus.http.auth.permission.permit1.methods=GET,HEAD</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="matching-path-but-not-method"><a class="anchor" href="#matching-path-but-not-method"></a>Matching path but not method</h3>
<div class="paragraph">
<p>If a request would match one or more permission sets based on the path, but does not match any due to method requirements
then the request is rejected.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Given the above permission set, <code>GET /public/foo</code> would match both the path and method and thus be allowed,
whereas <code>POST /public/foo</code> would match the path but not the method and would thus be rejected.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="matching-multiple-paths-longest-path-wins"><a class="anchor" href="#matching-multiple-paths-longest-path-wins"></a>Matching multiple paths: longest path wins</h3>
<div class="paragraph">
<p>Matching is always done on a longest path wins basis, less specific permission sets are not considered if a more specific one
has been matched:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.paths=/public/*
quarkus.http.auth.permission.permit1.policy=permit
quarkus.http.auth.permission.permit1.methods=GET,HEAD

quarkus.http.auth.permission.deny1.paths=/public/forbidden-folder/*
quarkus.http.auth.permission.deny1.policy=deny</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Given the above permission set, <code>GET /public/forbidden-folder/foo</code> would match both permission sets' paths,
but because it matches the <code>deny1</code> permission set&#8217;s path on a longer match, <code>deny1</code> will be chosen and the request will
be rejected.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Subpath permissions always win against the root path permissions as explained above in the <code>deny1</code> versus <code>permit1</code> permission example.
Here is another example showing a subpath permission allowing a public resource access with the root path permission requiring the authorization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.policy.user-policy.roles-allowed=user
quarkus.http.auth.permission.roles.paths=/api/*
quarkus.http.auth.permission.roles.policy=user-policy

quarkus.http.auth.permission.public.paths=/api/noauth/*
quarkus.http.auth.permission.public.policy=permit</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="matching-multiple-paths-most-specific-method-wins"><a class="anchor" href="#matching-multiple-paths-most-specific-method-wins"></a>Matching multiple paths: most specific method wins</h3>
<div class="paragraph">
<p>If a path is registered with multiple permission sets then any permission sets that specify an HTTP method will take
precedence and permissions sets without a method will not be considered (assuming of course the method matches). In this
instance, the permission sets without methods will only come into effect if the request method does not match any of the
sets with method permissions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.paths=/public/*
quarkus.http.auth.permission.permit1.policy=permit
quarkus.http.auth.permission.permit1.methods=GET,HEAD

quarkus.http.auth.permission.deny1.paths=/public/*
quarkus.http.auth.permission.deny1.policy=deny</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Given the above permission set, <code>GET /public/foo</code> would match both permission sets' paths,
but because it matches the <code>permit1</code> permission set&#8217;s explicit method, <code>permit1</code> will be chosen and the request will
be accepted. <code>PUT /public/foo</code> on the other hand, will not match the method permissions of <code>permit1</code> and so
<code>deny1</code> will be activated and reject the request.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="matching-multiple-paths-and-methods-both-win"><a class="anchor" href="#matching-multiple-paths-and-methods-both-win"></a>Matching multiple paths and methods: both win</h3>
<div class="paragraph">
<p>If multiple permission sets specify the same path and method (or multiple have no method) then both permissions have to
allow access for the request to proceed. Note that for this to happen both have to either have specified the method, or
have no method, method specific matches take precedence as stated above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.policy.user-policy1.roles-allowed=user
quarkus.http.auth.policy.admin-policy1.roles-allowed=admin

quarkus.http.auth.permission.roles1.paths=/api/*,/restricted/*
quarkus.http.auth.permission.roles1.policy=user-policy1

quarkus.http.auth.permission.roles2.paths=/api/*,/admin/*
quarkus.http.auth.permission.roles2.policy=admin-policy1</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Given the above permission set, <code>GET /api/foo</code> would match both permission sets' paths,
so would require both the <code>user</code> and <code>admin</code> roles.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-properties-to-deny-access"><a class="anchor" href="#configuration-properties-to-deny-access"></a>Configuration Properties to Deny access</h3>
<div class="paragraph">
<p>There are three configuration settings that alter the RBAC Deny behavior:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.security.jaxrs.deny-unannotated-endpoints=true|false</code></dt>
<dd>
<p>If set to true, the access will be denied for all JAX-RS endpoints by default, so if a JAX-RS endpoint does not have any security annotations
then it will default to <code>@DenyAll</code> behaviour. This is useful to ensure you cannot accidentally expose an endpoint that is supposed to be secured. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>quarkus.security.jaxrs.default-roles-allowed=role1,role2</code></dt>
<dd>
<p>Defines the default role requirements for unannotated endpoints. The role '**' is a special role that means any authenticated user. This cannot be combined with
<code>deny-unannotated-endpoints</code>, as the deny will take effect instead.</p>
</dd>
<dt class="hdlist1"><code>quarkus.security.deny-unannotated-members=true|false</code></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>if set to true, the access will be denied to all CDI methods
and JAX-RS endpoints that do not have security annotations but are defined in classes that contain methods with
security annotations. Defaults to <code>false</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="disabling-permissions"><a class="anchor" href="#disabling-permissions"></a>Disabling permissions</h3>
<div class="paragraph">
<p>Permissions can be disabled at build time with an <code>enabled</code> property for each declared permission, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.enabled=false
quarkus.http.auth.permission.permit1.paths=/public/*,/css/*,/js/*,/robots.txt
quarkus.http.auth.permission.permit1.policy=permit
quarkus.http.auth.permission.permit1.methods=GET,HEAD</code></pre>
</div>
</div>
<div class="paragraph">
<p>and enabled at runtime with a system property or environment variable, for example: <code>-Dquarkus.http.auth.permission.permit1.enabled=true</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="permission-paths-and-http-root-path"><a class="anchor" href="#permission-paths-and-http-root-path"></a>Permission paths and http root path</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>quarkus.http.root-path</code> configuration property is used to change the <a href="http-reference#context-path">http endpoint context path</a>.</p>
</div>
<div class="paragraph">
<p>By default, <code>quarkus.http.root-path</code> is prepended automatically to configured permission paths then do not use a forward slash, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.paths=public/*,css/*,js/*,robots.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration is equivalent to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.paths=${quarkus.http.root-path}/public/*,${quarkus.http.root-path}/css/*,${quarkus.http.root-path}/js/*,${quarkus.http.root-path}/robots.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>A leading slash will change how the configured permission path is interpreted. The configured URL will be used as-is, and paths will not be adjusted if the value of <code>quarkus.http.root-path</code> is changed. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.http.auth.permission.permit1.paths=/public/*,css/*,js/*,robots.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration will only impact resources served from the fixed/static URL <code>/public</code>, which may not match your application resources if <code>quarkus.http.root-path</code> has been set to something other than <code>/</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="https://quarkus.io/blog/path-resolution-in-quarkus/">Path Resolution in Quarkus</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="standard-security-annotations"><a class="anchor" href="#standard-security-annotations"></a>Authorization using Annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus comes with built-in security to allow for Role-Based Access Control (<a href="https://en.wikipedia.org/wiki/Role-based_access_control">RBAC</a>)
based on the common security annotations <code>@RolesAllowed</code>, <code>@DenyAll</code>, <code>@PermitAll</code> on REST endpoints and CDI beans.
An example of an endpoint that makes use of both JAX-RS and Common Security annotations to describe and secure its endpoints is given in <a href="#subject-example">SubjectExposingResource Example</a>. Quarkus also provides
the <code>io.quarkus.security.Authenticated</code> annotation that will permit any authenticated user to access the resource
(equivalent to <code>@RolesAllowed("**")</code>).</p>
</div>
<div id="subject-example" class="listingblock">
<div class="title">SubjectExposingResource Example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.security.Principal;

import javax.annotation.security.DenyAll;
import javax.annotation.security.PermitAll;
import javax.annotation.security.RolesAllowed;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.SecurityContext;

@Path("subject")
public class SubjectExposingResource {

    @GET
    @Path("secured")
    @RolesAllowed("Tester") <i class="conum" data-value="1"></i><b>(1)</b>
    public String getSubjectSecured(@Context SecurityContext sec) {
        Principal user = sec.getUserPrincipal(); <i class="conum" data-value="2"></i><b>(2)</b>
        String name = user != null ? user.getName() : "anonymous";
        return name;
    }

    @GET
    @Path("unsecured")
    @PermitAll <i class="conum" data-value="3"></i><b>(3)</b>
    public String getSubjectUnsecured(@Context SecurityContext sec) {
        Principal user = sec.getUserPrincipal(); <i class="conum" data-value="4"></i><b>(4)</b>
        String name = user != null ? user.getName() : "anonymous";
        return name;
    }

    @GET
    @Path("denied")
    @DenyAll <i class="conum" data-value="5"></i><b>(5)</b>
    public String getSubjectDenied(@Context SecurityContext sec) {
        Principal user = sec.getUserPrincipal();
        String name = user != null ? user.getName() : "anonymous";
        return name;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This <code>/subject/secured</code> endpoint requires an authenticated user that has been granted the role "Tester" through the use of the <code>@RolesAllowed("Tester")</code> annotation.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The endpoint obtains the user principal from the JAX-RS <code>SecurityContext</code>. This will be non-null for a secured endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>/subject/unsecured</code> endpoint allows for unauthenticated access by specifying the <code>@PermitAll</code> annotation.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This call to obtain the user principal will return null if the caller is unauthenticated, non-null if the caller is authenticated.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>/subject/denied</code> endpoint disallows any access regardless of whether the call is authenticated by specifying the <code>@DenyAll</code> annotation.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="security">Quarkus Security</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>
    <div class="grid__item width-4-12 width-12-12-m tocwrapper">
      <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#authorization-using-configuration">Authorization using Configuration</a>
<ul class="sectlevel2">
<li><a href="#matching-on-paths-methods">Matching on paths, methods</a></li>
<li><a href="#matching-path-but-not-method">Matching path but not method</a></li>
<li><a href="#matching-multiple-paths-longest-path-wins">Matching multiple paths: longest path wins</a></li>
<li><a href="#matching-multiple-paths-most-specific-method-wins">Matching multiple paths: most specific method wins</a></li>
<li><a href="#matching-multiple-paths-and-methods-both-win">Matching multiple paths and methods: both win</a></li>
<li><a href="#configuration-properties-to-deny-access">Configuration Properties to Deny access</a></li>
<li><a href="#disabling-permissions">Disabling permissions</a></li>
</ul>
</li>
<li><a href="#permission-paths-and-http-root-path">Permission paths and http root path</a></li>
<li><a href="#standard-security-annotations">Authorization using Annotations</a></li>
<li><a href="#references">References</a></li>
</ul></div>
    </div>
  </div>
  </div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a>, is hosted on <a href='https://pages.github.com/' target='_blank'>GitHub Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links">
          
          
            <li><a href="/" target="_blank">Home</a></li>
          
          
          
            <li><a href="/about" target="_blank">About</a></li>
          
          
          
            <li><a href="/blog" target="_blank">Blog</a></li>
          
          
          
            <li><a href="/insights" target="_blank">Podcast</a></li>
          
          
          
            <li><a href="/events" target="_blank">Events</a></li>
          
          
          
            <li><a href="/newsletter" target="_blank">Newsletter</a></li>
          
          
          
            <li><a href="https://github.com/orgs/quarkusio/projects/13/views/1" target="_blank">Roadmap</a></li>
          
          
          
            <li><a href="/security" target="_blank">Security&nbsp;policy</a></li>
          
          
          
            <li><a href="/usage" target="_blank">Usage</a></li>
          
          
          
            <li><a href="/brand" target="_blank">Brand</a></li>
          
          
          
            <li><a href="/desktopwallpapers" target="_blank">Wallpapers</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Follow Us</span>
        <ul class="footer-links">
          
          
            <li><a href="https://x.com/quarkusio" target="_blank">X</a></li>
          
          
          
            <li><a rel="me" href="https://fosstodon.org/@quarkusio" target="_blank">Mastodon</a></li>
            
          
          
            <li><a href="https://www.facebook.com/quarkusio" target="_blank">Facebook</a></li>
          
          
          
            <li><a href="https://www.linkedin.com/company/quarkusio/" target="_blank">Linkedin</a></li>
          
          
          
            <li><a href="https://www.youtube.com/channel/UCaW8QG_QoIk_FnjLgr5eOqg" target="_blank">Youtube</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio" target="_blank">GitHub</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-2-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links">
          
          
            <li><a href="/support" target="_blank">Support</a></li>
          
          
          
            <li><a href="/guides" target="_blank">Guides</a></li>
          
          
          
            <li><a href="/faq" target="_blank">FAQ</a></li>
          
          
          
            <li><a href="/get-started" target="_blank">Get Started</a></li>
          
          
          
            <li><a href="https://stackoverflow.com/questions/tagged/quarkus" target="_blank">Stack Overflow</a></li>
          
          
          
            <li><a href="https://github.com/quarkusio/quarkus/discussions" target="_blank">Discussions</a></li>
          
          
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev" target="_blank">Development mailing list</a></li>
          
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Languages</span>
        <ul class="footer-links">
          
          
            <li><a href="https://quarkus.io/" target="_blank">English</a></li>
          
          
          
            <li><a href="https://pt.quarkus.io/" target="_blank">Português&nbsp;(Brasileiro)</a></li>
          
          
          
            <li><a href="https://es.quarkus.io/" target="_blank">Español</a></li>
          
          
          
            <li><a href="https://cn.quarkus.io/" target="_blank">简体中文</a></li>
          
          
          
            <li><a href="https://ja.quarkus.io/" target="_blank">日本語</a></li>
          
          
        </ul>
      </div>
    

    
      <div class="width-4-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a blah href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a blah href="https://smallrye.io" target="_blank">SmallRye</a></li>
          
            <li><a blah href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a blah href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a blah href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a blah href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a blah href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a blah href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>

  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="/guides/javascript/config.js" type="text/javascript"></script>
  <script src="/assets/javascript/guides-version-dropdown.js" type="text/javascript"></script>
  <script src="/assets/javascript/back-to-top.js" type="text/javascript"></script>
  <script src="/assets/javascript/clipboard.min.js" type="text/javascript"></script>
  <script src="/assets/javascript/copy.js" type="text/javascript"></script>
  <script src="/assets/javascript/asciidoc-tabs.js" type="text/javascript"></script>
  <script src="/assets/javascript/future-date.js" type="text/javascript"></script>
</body>

</html>
